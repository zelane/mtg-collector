(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qt=Symbol("Comlink.proxy"),Jt=Symbol("Comlink.endpoint"),Xt=Symbol("Comlink.releaseProxy"),ct=Symbol("Comlink.finalizer"),Xe=Symbol("Comlink.thrown"),wt=C=>typeof C=="object"&&C!==null||typeof C=="function",Yt={canHandle:C=>wt(C)&&C[qt],serialize(C){const{port1:V,port2:oe}=new MessageChannel;return ut(C,V),[oe,[oe]]},deserialize(C){return C.start(),nn(C)}},Zt={canHandle:C=>wt(C)&&Xe in C,serialize({value:C}){let V;return C instanceof Error?V={isError:!0,value:{message:C.message,name:C.name,stack:C.stack}}:V={isError:!1,value:C},[V,[]]},deserialize(C){throw C.isError?Object.assign(new Error(C.value.message),C.value):C.value}},Et=new Map([["proxy",Yt],["throw",Zt]]);function en(C,V){for(const oe of C)if(V===oe||oe==="*"||oe instanceof RegExp&&oe.test(V))return!0;return!1}function ut(C,V=globalThis,oe=["*"]){V.addEventListener("message",function t(ge){if(!ge||!ge.data)return;if(!en(oe,ge.origin)){console.warn(`Invalid origin '${ge.origin}' for comlink proxy`);return}const{id:ve,type:we,path:Ie}=Object.assign({path:[]},ge.data),ke=(ge.data.argumentList||[]).map(Ne);let Ee;try{const Z=Ie.slice(0,-1).reduce((pe,Pe)=>pe[Pe],C),he=Ie.reduce((pe,Pe)=>pe[Pe],C);switch(we){case"GET":Ee=he;break;case"SET":Z[Ie.slice(-1)[0]]=Ne(ge.data.value),Ee=!0;break;case"APPLY":Ee=he.apply(Z,ke);break;case"CONSTRUCT":{const pe=new he(...ke);Ee=ln(pe)}break;case"ENDPOINT":{const{port1:pe,port2:Pe}=new MessageChannel;ut(C,Pe),Ee=an(pe,[pe])}break;case"RELEASE":Ee=void 0;break;default:return}}catch(Z){Ee={value:Z,[Xe]:0}}Promise.resolve(Ee).catch(Z=>({value:Z,[Xe]:0})).then(Z=>{const[he,pe]=tt(Z);V.postMessage(Object.assign(Object.assign({},he),{id:ve}),pe),we==="RELEASE"&&(V.removeEventListener("message",t),vt(V),ct in C&&typeof C[ct]=="function"&&C[ct]())}).catch(Z=>{const[he,pe]=tt({value:new TypeError("Unserializable return value"),[Xe]:0});V.postMessage(Object.assign(Object.assign({},he),{id:ve}),pe)})}),V.start&&V.start()}function tn(C){return C.constructor.name==="MessagePort"}function vt(C){tn(C)&&C.close()}function nn(C,V){return _t(C,[],V)}function Ye(C){if(C)throw new Error("Proxy has been released and is not useable")}function St(C){return ze(C,{type:"RELEASE"}).then(()=>{vt(C)})}const Ze=new WeakMap,et="FinalizationRegistry"in globalThis&&new FinalizationRegistry(C=>{const V=(Ze.get(C)||0)-1;Ze.set(C,V),V===0&&St(C)});function rn(C,V){const oe=(Ze.get(V)||0)+1;Ze.set(V,oe),et&&et.register(C,V,C)}function sn(C){et&&et.unregister(C)}function _t(C,V=[],oe=function(){}){let t=!1;const ge=new Proxy(oe,{get(ve,we){if(Ye(t),we===Xt)return()=>{sn(ge),St(C),t=!0};if(we==="then"){if(V.length===0)return{then:()=>ge};const Ie=ze(C,{type:"GET",path:V.map(ke=>ke.toString())}).then(Ne);return Ie.then.bind(Ie)}return _t(C,[...V,we])},set(ve,we,Ie){Ye(t);const[ke,Ee]=tt(Ie);return ze(C,{type:"SET",path:[...V,we].map(Z=>Z.toString()),value:ke},Ee).then(Ne)},apply(ve,we,Ie){Ye(t);const ke=V[V.length-1];if(ke===Jt)return ze(C,{type:"ENDPOINT"}).then(Ne);if(ke==="bind")return _t(C,V.slice(0,-1));const[Ee,Z]=xt(Ie);return ze(C,{type:"APPLY",path:V.map(he=>he.toString()),argumentList:Ee},Z).then(Ne)},construct(ve,we){Ye(t);const[Ie,ke]=xt(we);return ze(C,{type:"CONSTRUCT",path:V.map(Ee=>Ee.toString()),argumentList:Ie},ke).then(Ne)}});return rn(ge,C),ge}function on(C){return Array.prototype.concat.apply([],C)}function xt(C){const V=C.map(tt);return[V.map(oe=>oe[0]),on(V.map(oe=>oe[1]))]}const At=new WeakMap;function an(C,V){return At.set(C,V),C}function ln(C){return Object.assign(C,{[qt]:!0})}function tt(C){for(const[V,oe]of Et)if(oe.canHandle(C)){const[t,ge]=oe.serialize(C);return[{type:"HANDLER",name:V,value:t},ge]}return[{type:"RAW",value:C},At.get(C)||[]]}function Ne(C){switch(C.type){case"HANDLER":return Et.get(C.name).deserialize(C.value);case"RAW":return C.value}}function ze(C,V,oe){return new Promise(t=>{const ge=cn();C.addEventListener("message",function ve(we){!we.data||!we.data.id||we.data.id!==ge||(C.removeEventListener("message",ve),t(we.data))}),C.start&&C.start(),C.postMessage(Object.assign({id:ge},V),oe)})}function cn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var ft=(()=>{var C=self.location.href;return function(V){var oe=V||{},t=typeof oe<"u"?oe:{},ge,ve;t.ready=new Promise(function(n,e){ge=n,ve=e});const we=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,we.debugModule("globalThis.location =",globalThis.location);const Ie="emscripten-bug-17951";t[Ie]=function n(e,s){e.env.foo=function(){};const r=t.locateFile(n.uri,typeof pe>"u"?"":pe);we.debugModule("instantiateWasm() uri =",r);const i=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),e).then(m=>s(m.instance,m.module)):async()=>i().then(m=>m.arrayBuffer()).then(m=>WebAssembly.instantiate(m,e)).then(m=>s(m.instance,m.module)))(),{}},t[Ie].uri="sqlite3.wasm";var ke=Object.assign({},t),Ee="./this.program",Z=typeof window=="object",he=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var pe="";function Pe(n){return t.locateFile?t.locateFile(n,pe):pe+n}var Ve,nt,dt;(Z||he)&&(he?pe=self.location.href:typeof document<"u"&&document.currentScript&&(pe=document.currentScript.src),C&&(pe=C),pe.indexOf("blob:")!==0?pe=pe.substr(0,pe.replace(/[?#].*/,"").lastIndexOf("/")+1):pe="",Ve=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},he&&(dt=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),nt=(n,e,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){e(r.response);return}s()},r.onerror=s,r.send(null)});var rt=t.print||console.log.bind(console),Re=t.printErr||console.warn.bind(console);Object.assign(t,ke),ke=null,t.arguments&&t.arguments,t.thisProgram&&(Ee=t.thisProgram),t.quit&&t.quit;var Ge;t.wasmBinary&&(Ge=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&Qe("no native wasm support detected");var Me,kt=!1;function dn(n,e){n||Qe(e)}var Tt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ue(n,e,s){for(var r=e+s,i=e;n[i]&&!(i>=r);)++i;if(i-e>16&&n.buffer&&Tt)return Tt.decode(n.subarray(e,i));for(var a="";e<i;){var m=n[e++];if(!(m&128)){a+=String.fromCharCode(m);continue}var q=n[e++]&63;if((m&224)==192){a+=String.fromCharCode((m&31)<<6|q);continue}var F=n[e++]&63;if((m&240)==224?m=(m&15)<<12|q<<6|F:m=(m&7)<<18|q<<12|F<<6|n[e++]&63,m<65536)a+=String.fromCharCode(m);else{var B=m-65536;a+=String.fromCharCode(55296|B>>10,56320|B&1023)}}return a}function pn(n,e){return n?Ue(We,n,e):""}function st(n,e,s,r){if(!(r>0))return 0;for(var i=s,a=s+r-1,m=0;m<n.length;++m){var q=n.charCodeAt(m);if(q>=55296&&q<=57343){var F=n.charCodeAt(++m);q=65536+((q&1023)<<10)|F&1023}if(q<=127){if(s>=a)break;e[s++]=q}else if(q<=2047){if(s+1>=a)break;e[s++]=192|q>>6,e[s++]=128|q&63}else if(q<=65535){if(s+2>=a)break;e[s++]=224|q>>12,e[s++]=128|q>>6&63,e[s++]=128|q&63}else{if(s+3>=a)break;e[s++]=240|q>>18,e[s++]=128|q>>12&63,e[s++]=128|q>>6&63,e[s++]=128|q&63}}return e[s]=0,s-i}function Ft(n,e,s){return st(n,We,e,s)}function $e(n){for(var e=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++s):e+=3}return e}var Fe,We,Ot,_e,Se;function Pt(){var n=Me.buffer;t.HEAP8=Fe=new Int8Array(n),t.HEAP16=Ot=new Int16Array(n),t.HEAP32=_e=new Int32Array(n),t.HEAPU8=We=new Uint8Array(n),t.HEAPU16=new Uint16Array(n),t.HEAPU32=Se=new Uint32Array(n),t.HEAPF32=new Float32Array(n),t.HEAPF64=new Float64Array(n),t.HEAP64=new BigInt64Array(n),t.HEAPU64=new BigUint64Array(n)}var Lt=t.INITIAL_MEMORY||16777216;t.wasmMemory?Me=t.wasmMemory:Me=new WebAssembly.Memory({initial:Lt/65536,maximum:2147483648/65536}),Pt(),Lt=Me.buffer.byteLength;var Dt=[],Ct=[],Rt=[];function mn(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)yn(t.preRun.shift());mt(Dt)}function hn(){!t.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,mt(Ct)}function gn(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)qn(t.postRun.shift());mt(Rt)}function yn(n){Dt.unshift(n)}function bn(n){Ct.unshift(n)}function qn(n){Rt.unshift(n)}var je=0,Ke=null;function xr(n){return n}function pt(n){je++,t.monitorRunDependencies&&t.monitorRunDependencies(je)}function it(n){if(je--,t.monitorRunDependencies&&t.monitorRunDependencies(je),je==0&&Ke){var e=Ke;Ke=null,e()}}function Qe(n){t.onAbort&&t.onAbort(n),n="Aborted("+n+")",Re(n),kt=!0,n+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(n);throw ve(e),e}var wn="data:application/octet-stream;base64,";function Mt(n){return n.startsWith(wn)}var Oe;t.locateFile?(Oe="sqlite3.wasm",Mt(Oe)||(Oe=Pe(Oe))):Oe=new URL("/assets/sqlite3-d95cf7da.wasm",self.location).href;function Nt(n){try{if(n==Oe&&Ge)return new Uint8Array(Ge);if(dt)return dt(n);throw"both async and sync fetching of the wasm failed"}catch(e){Qe(e)}}function En(){return!Ge&&(Z||he)&&typeof fetch=="function"?fetch(Oe,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Oe+"'";return n.arrayBuffer()}).catch(function(){return Nt(Oe)}):Promise.resolve().then(function(){return Nt(Oe)})}function vn(){var n={env:Qt,wasi_snapshot_preview1:Qt};function e(m,q){var F=m.exports;t.asm=F,t.asm.__indirect_function_table,bn(t.asm.__wasm_call_ctors),it()}pt();function s(m){e(m.instance)}function r(m){return En().then(function(q){return WebAssembly.instantiate(q,n)}).then(function(q){return q}).then(m,function(q){Re("failed to asynchronously prepare wasm: "+q),Qe(q)})}function i(){return!Ge&&typeof WebAssembly.instantiateStreaming=="function"&&!Mt(Oe)&&typeof fetch=="function"?fetch(Oe,{credentials:"same-origin"}).then(function(m){var q=WebAssembly.instantiateStreaming(m,n);return q.then(s,function(F){return Re("wasm streaming compile failed: "+F),Re("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(t.instantiateWasm)try{var a=t.instantiateWasm(n,e);return a}catch(m){Re("Module.instantiateWasm callback failed with error: "+m),ve(m)}return i().catch(ve),{}}var de,Ae;function mt(n){for(;n.length>0;)n.shift()(t)}var me={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(n).slice(1)},normalizeArray:(n,e)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(e)for(;s;s--)n.unshift("..");return n},normalize:n=>{var e=me.isAbs(n),s=n.substr(-1)==="/";return n=me.normalizeArray(n.split("/").filter(r=>!!r),!e).join("/"),!n&&!e&&(n="."),n&&s&&(n+="/"),(e?"/":"")+n},dirname:n=>{var e=me.splitPath(n),s=e[0],r=e[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=me.normalize(n),n=n.replace(/\/$/,"");var e=n.lastIndexOf("/");return e===-1?n:n.substr(e+1)},join:function(){var n=Array.prototype.slice.call(arguments);return me.normalize(n.join("/"))},join2:(n,e)=>me.normalize(n+"/"+e)};function Sn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>Qe("randomDevice")}var De={resolve:function(){for(var n="",e=!1,s=arguments.length-1;s>=-1&&!e;s--){var r=s>=0?arguments[s]:o.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,e=me.isAbs(r)}return n=me.normalizeArray(n.split("/").filter(i=>!!i),!e).join("/"),(e?"/":"")+n||"."},relative:(n,e)=>{n=De.resolve(n).substr(1),e=De.resolve(e).substr(1);function s(B){for(var H=0;H<B.length&&B[H]==="";H++);for(var ee=B.length-1;ee>=0&&B[ee]==="";ee--);return H>ee?[]:B.slice(H,ee-H+1)}for(var r=s(n.split("/")),i=s(e.split("/")),a=Math.min(r.length,i.length),m=a,q=0;q<a;q++)if(r[q]!==i[q]){m=q;break}for(var F=[],q=m;q<r.length;q++)F.push("..");return F=F.concat(i.slice(m)),F.join("/")}};function ht(n,e,s){var r=s>0?s:$e(n)+1,i=new Array(r),a=st(n,i,0,i.length);return e&&(i.length=a),i}var Be={ttys:[],init:function(){},shutdown:function(){},register:function(n,e){Be.ttys[n]={input:[],output:[],ops:e},o.registerDevice(n,Be.stream_ops)},stream_ops:{open:function(n){var e=Be.ttys[n.node.rdev];if(!e)throw new o.ErrnoError(43);n.tty=e,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new o.ErrnoError(60);for(var a=0,m=0;m<r;m++){var q;try{q=n.tty.ops.get_char(n.tty)}catch{throw new o.ErrnoError(29)}if(q===void 0&&a===0)throw new o.ErrnoError(6);if(q==null)break;a++,e[s+m]=q}return a&&(n.node.timestamp=Date.now()),a},write:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var a=0;a<r;a++)n.tty.ops.put_char(n.tty,e[s+a])}catch{throw new o.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(n){if(!n.input.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;n.input=ht(e,!0)}return n.input.shift()},put_char:function(n,e){e===null||e===10?(rt(Ue(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(rt(Ue(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,e){e===null||e===10?(Re(Ue(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Re(Ue(n.output,0)),n.output=[])}}};function xn(n,e){return We.fill(0,n,n+e),n}function An(n,e){return Math.ceil(n/e)*e}function jt(n){n=An(n,65536);var e=Gt(65536,n);return e?xn(e,n):0}var ce={ops_table:null,mount:function(n){return ce.createNode(null,"/",16895,0)},createNode:function(n,e,s,r){if(o.isBlkdev(s)||o.isFIFO(s))throw new o.ErrnoError(63);ce.ops_table||(ce.ops_table={dir:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr,lookup:ce.node_ops.lookup,mknod:ce.node_ops.mknod,rename:ce.node_ops.rename,unlink:ce.node_ops.unlink,rmdir:ce.node_ops.rmdir,readdir:ce.node_ops.readdir,symlink:ce.node_ops.symlink},stream:{llseek:ce.stream_ops.llseek}},file:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr},stream:{llseek:ce.stream_ops.llseek,read:ce.stream_ops.read,write:ce.stream_ops.write,allocate:ce.stream_ops.allocate,mmap:ce.stream_ops.mmap,msync:ce.stream_ops.msync}},link:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr,readlink:ce.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ce.node_ops.getattr,setattr:ce.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(n,e,s,r);return o.isDir(i.mode)?(i.node_ops=ce.ops_table.dir.node,i.stream_ops=ce.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=ce.ops_table.file.node,i.stream_ops=ce.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=ce.ops_table.link.node,i.stream_ops=ce.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=ce.ops_table.chrdev.node,i.stream_ops=ce.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[e]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,e){var s=n.contents?n.contents.length:0;if(!(s>=e)){var r=1024*1024;e=Math.max(e,s*(s<r?2:1.125)>>>0),s!=0&&(e=Math.max(e,256));var i=n.contents;n.contents=new Uint8Array(e),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,e){if(n.usedBytes!=e)if(e==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(e),s&&n.contents.set(s.subarray(0,Math.min(e,n.usedBytes))),n.usedBytes=e}},node_ops:{getattr:function(n){var e={};return e.dev=o.isChrdev(n.mode)?n.id:1,e.ino=n.id,e.mode=n.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=n.rdev,o.isDir(n.mode)?e.size=4096:o.isFile(n.mode)?e.size=n.usedBytes:o.isLink(n.mode)?e.size=n.link.length:e.size=0,e.atime=new Date(n.timestamp),e.mtime=new Date(n.timestamp),e.ctime=new Date(n.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(n,e){e.mode!==void 0&&(n.mode=e.mode),e.timestamp!==void 0&&(n.timestamp=e.timestamp),e.size!==void 0&&ce.resizeFileStorage(n,e.size)},lookup:function(n,e){throw o.genericErrors[44]},mknod:function(n,e,s,r){return ce.createNode(n,e,s,r)},rename:function(n,e,s){if(o.isDir(n.mode)){var r;try{r=o.lookupNode(e,s)}catch{}if(r)for(var i in r.contents)throw new o.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,e.contents[s]=n,e.timestamp=n.parent.timestamp,n.parent=e},unlink:function(n,e){delete n.contents[e],n.timestamp=Date.now()},rmdir:function(n,e){var s=o.lookupNode(n,e);for(var r in s.contents)throw new o.ErrnoError(55);delete n.contents[e],n.timestamp=Date.now()},readdir:function(n){var e=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&e.push(s);return e},symlink:function(n,e,s){var r=ce.createNode(n,e,41471,0);return r.link=s,r},readlink:function(n){if(!o.isLink(n.mode))throw new o.ErrnoError(28);return n.link}},stream_ops:{read:function(n,e,s,r,i){var a=n.node.contents;if(i>=n.node.usedBytes)return 0;var m=Math.min(n.node.usedBytes-i,r);if(m>8&&a.subarray)e.set(a.subarray(i,i+m),s);else for(var q=0;q<m;q++)e[s+q]=a[i+q];return m},write:function(n,e,s,r,i,a){if(e.buffer===Fe.buffer&&(a=!1),!r)return 0;var m=n.node;if(m.timestamp=Date.now(),e.subarray&&(!m.contents||m.contents.subarray)){if(a)return m.contents=e.subarray(s,s+r),m.usedBytes=r,r;if(m.usedBytes===0&&i===0)return m.contents=e.slice(s,s+r),m.usedBytes=r,r;if(i+r<=m.usedBytes)return m.contents.set(e.subarray(s,s+r),i),r}if(ce.expandFileStorage(m,i+r),m.contents.subarray&&e.subarray)m.contents.set(e.subarray(s,s+r),i);else for(var q=0;q<r;q++)m.contents[i+q]=e[s+q];return m.usedBytes=Math.max(m.usedBytes,i+r),r},llseek:function(n,e,s){var r=e;if(s===1?r+=n.position:s===2&&o.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new o.ErrnoError(28);return r},allocate:function(n,e,s){ce.expandFileStorage(n.node,e+s),n.node.usedBytes=Math.max(n.node.usedBytes,e+s)},mmap:function(n,e,s,r,i){if(!o.isFile(n.node.mode))throw new o.ErrnoError(43);var a,m,q=n.node.contents;if(!(i&2)&&q.buffer===Fe.buffer)m=!1,a=q.byteOffset;else{if((s>0||s+e<q.length)&&(q.subarray?q=q.subarray(s,s+e):q=Array.prototype.slice.call(q,s,s+e)),m=!0,a=jt(e),!a)throw new o.ErrnoError(48);Fe.set(q,a)}return{ptr:a,allocated:m}},msync:function(n,e,s,r,i){return ce.stream_ops.write(n,e,0,r,s,!1),0}}};function In(n,e,s,r){var i=r?"":"al "+n;nt(n,a=>{dn(a,'Loading data file "'+n+'" failed (no arrayBuffer).'),e(new Uint8Array(a)),i&&it()},a=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&pt()}var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,e={})=>{if(n=De.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(e=Object.assign(s,e),e.recurse_count>8)throw new o.ErrnoError(32);for(var r=n.split("/").filter(ee=>!!ee),i=o.root,a="/",m=0;m<r.length;m++){var q=m===r.length-1;if(q&&e.parent)break;if(i=o.lookupNode(i,r[m]),a=me.join2(a,r[m]),o.isMountpoint(i)&&(!q||q&&e.follow_mount)&&(i=i.mounted.root),!q||e.follow)for(var F=0;o.isLink(i.mode);){var B=o.readlink(a);a=De.resolve(me.dirname(a),B);var H=o.lookupPath(a,{recurse_count:e.recurse_count+1});if(i=H.node,F++>40)throw new o.ErrnoError(32)}}return{path:a,node:i}},getPath:n=>{for(var e;;){if(o.isRoot(n)){var s=n.mount.mountpoint;return e?s[s.length-1]!=="/"?s+"/"+e:s+e:s}e=e?n.name+"/"+e:n.name,n=n.parent}},hashName:(n,e)=>{for(var s=0,r=0;r<e.length;r++)s=(s<<5)-s+e.charCodeAt(r)|0;return(n+s>>>0)%o.nameTable.length},hashAddNode:n=>{var e=o.hashName(n.parent.id,n.name);n.name_next=o.nameTable[e],o.nameTable[e]=n},hashRemoveNode:n=>{var e=o.hashName(n.parent.id,n.name);if(o.nameTable[e]===n)o.nameTable[e]=n.name_next;else for(var s=o.nameTable[e];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,e)=>{var s=o.mayLookup(n);if(s)throw new o.ErrnoError(s,n);for(var r=o.hashName(n.id,e),i=o.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===n.id&&a===e)return i}return o.lookup(n,e)},createNode:(n,e,s,r)=>{var i=new o.FSNode(n,e,s,r);return o.hashAddNode(i),i},destroyNode:n=>{o.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var e=o.flagModes[n];if(typeof e>"u")throw new Error("Unknown file open mode: "+n);return e},flagsToPermissionString:n=>{var e=["r","w","rw"][n&3];return n&512&&(e+="w"),e},nodePermissions:(n,e)=>o.ignorePermissions?0:e.includes("r")&&!(n.mode&292)||e.includes("w")&&!(n.mode&146)||e.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var e=o.nodePermissions(n,"x");return e||(n.node_ops.lookup?0:2)},mayCreate:(n,e)=>{try{var s=o.lookupNode(n,e);return 20}catch{}return o.nodePermissions(n,"wx")},mayDelete:(n,e,s)=>{var r;try{r=o.lookupNode(n,e)}catch(a){return a.errno}var i=o.nodePermissions(n,"wx");if(i)return i;if(s){if(!o.isDir(r.mode))return 54;if(o.isRoot(r)||o.getPath(r)===o.cwd())return 10}else if(o.isDir(r.mode))return 31;return 0},mayOpen:(n,e)=>n?o.isLink(n.mode)?32:o.isDir(n.mode)&&(o.flagsToPermissionString(e)!=="r"||e&512)?31:o.nodePermissions(n,o.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,e=o.MAX_OPEN_FDS)=>{for(var s=n;s<=e;s++)if(!o.streams[s])return s;throw new o.ErrnoError(33)},getStream:n=>o.streams[n],createStream:(n,e,s)=>{o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new o.FSStream,n);var r=o.nextfd(e,s);return n.fd=r,o.streams[r]=n,n},closeStream:n=>{o.streams[n]=null},chrdev_stream_ops:{open:n=>{var e=o.getDevice(n.node.rdev);n.stream_ops=e.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new o.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,e)=>n<<8|e,registerDevice:(n,e)=>{o.devices[n]={stream_ops:e}},getDevice:n=>o.devices[n],getMounts:n=>{for(var e=[],s=[n];s.length;){var r=s.pop();e.push(r),s.push.apply(s,r.mounts)}return e},syncfs:(n,e)=>{typeof n=="function"&&(e=n,n=!1),o.syncFSRequests++,o.syncFSRequests>1&&Re("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=o.getMounts(o.root.mount),r=0;function i(m){return o.syncFSRequests--,e(m)}function a(m){if(m)return a.errored?void 0:(a.errored=!0,i(m));++r>=s.length&&i(null)}s.forEach(m=>{if(!m.type.syncfs)return a(null);m.type.syncfs(m,n,a)})},mount:(n,e,s)=>{var r=s==="/",i=!s,a;if(r&&o.root)throw new o.ErrnoError(10);if(!r&&!i){var m=o.lookupPath(s,{follow_mount:!1});if(s=m.path,a=m.node,o.isMountpoint(a))throw new o.ErrnoError(10);if(!o.isDir(a.mode))throw new o.ErrnoError(54)}var q={type:n,opts:e,mountpoint:s,mounts:[]},F=n.mount(q);return F.mount=q,q.root=F,r?o.root=F:a&&(a.mounted=q,a.mount&&a.mount.mounts.push(q)),F},unmount:n=>{var e=o.lookupPath(n,{follow_mount:!1});if(!o.isMountpoint(e.node))throw new o.ErrnoError(28);var s=e.node,r=s.mounted,i=o.getMounts(r);Object.keys(o.nameTable).forEach(m=>{for(var q=o.nameTable[m];q;){var F=q.name_next;i.includes(q.mount)&&o.destroyNode(q),q=F}}),s.mounted=null;var a=s.mount.mounts.indexOf(r);s.mount.mounts.splice(a,1)},lookup:(n,e)=>n.node_ops.lookup(n,e),mknod:(n,e,s)=>{var r=o.lookupPath(n,{parent:!0}),i=r.node,a=me.basename(n);if(!a||a==="."||a==="..")throw new o.ErrnoError(28);var m=o.mayCreate(i,a);if(m)throw new o.ErrnoError(m);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,a,e,s)},create:(n,e)=>(e=e!==void 0?e:438,e&=4095,e|=32768,o.mknod(n,e,0)),mkdir:(n,e)=>(e=e!==void 0?e:511,e&=1023,e|=16384,o.mknod(n,e,0)),mkdirTree:(n,e)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{o.mkdir(r,e)}catch(a){if(a.errno!=20)throw a}}},mkdev:(n,e,s)=>(typeof s>"u"&&(s=e,e=438),e|=8192,o.mknod(n,e,s)),symlink:(n,e)=>{if(!De.resolve(n))throw new o.ErrnoError(44);var s=o.lookupPath(e,{parent:!0}),r=s.node;if(!r)throw new o.ErrnoError(44);var i=me.basename(e),a=o.mayCreate(r,i);if(a)throw new o.ErrnoError(a);if(!r.node_ops.symlink)throw new o.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,e)=>{var s=me.dirname(n),r=me.dirname(e),i=me.basename(n),a=me.basename(e),m,q,F;if(m=o.lookupPath(n,{parent:!0}),q=m.node,m=o.lookupPath(e,{parent:!0}),F=m.node,!q||!F)throw new o.ErrnoError(44);if(q.mount!==F.mount)throw new o.ErrnoError(75);var B=o.lookupNode(q,i),H=De.relative(n,r);if(H.charAt(0)!==".")throw new o.ErrnoError(28);if(H=De.relative(e,s),H.charAt(0)!==".")throw new o.ErrnoError(55);var ee;try{ee=o.lookupNode(F,a)}catch{}if(B!==ee){var x=o.isDir(B.mode),f=o.mayDelete(q,i,x);if(f)throw new o.ErrnoError(f);if(f=ee?o.mayDelete(F,a,x):o.mayCreate(F,a),f)throw new o.ErrnoError(f);if(!q.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(B)||ee&&o.isMountpoint(ee))throw new o.ErrnoError(10);if(F!==q&&(f=o.nodePermissions(q,"w"),f))throw new o.ErrnoError(f);o.hashRemoveNode(B);try{q.node_ops.rename(B,F,a)}catch(d){throw d}finally{o.hashAddNode(B)}}},rmdir:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node,r=me.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!0);if(a)throw new o.ErrnoError(a);if(!s.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.rmdir(s,r),o.destroyNode(i)},readdir:n=>{var e=o.lookupPath(n,{follow:!0}),s=e.node;if(!s.node_ops.readdir)throw new o.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node;if(!s)throw new o.ErrnoError(44);var r=me.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!1);if(a)throw new o.ErrnoError(a);if(!s.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.unlink(s,r),o.destroyNode(i)},readlink:n=>{var e=o.lookupPath(n),s=e.node;if(!s)throw new o.ErrnoError(44);if(!s.node_ops.readlink)throw new o.ErrnoError(28);return De.resolve(o.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,e)=>{var s=o.lookupPath(n,{follow:!e}),r=s.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.getattr)throw new o.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>o.stat(n,!0),chmod:(n,e,s)=>{var r;if(typeof n=="string"){var i=o.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new o.ErrnoError(63);r.node_ops.setattr(r,{mode:e&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,e)=>{o.chmod(n,e,!0)},fchmod:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);o.chmod(s.node,e)},chown:(n,e,s,r)=>{var i;if(typeof n=="string"){var a=o.lookupPath(n,{follow:!r});i=a.node}else i=n;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,e,s)=>{o.chown(n,e,s,!0)},fchown:(n,e,s)=>{var r=o.getStream(n);if(!r)throw new o.ErrnoError(8);o.chown(r.node,e,s)},truncate:(n,e)=>{if(e<0)throw new o.ErrnoError(28);var s;if(typeof n=="string"){var r=o.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(s.mode))throw new o.ErrnoError(31);if(!o.isFile(s.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(s,"w");if(i)throw new o.ErrnoError(i);s.node_ops.setattr(s,{size:e,timestamp:Date.now()})},ftruncate:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);if(!(s.flags&2097155))throw new o.ErrnoError(28);o.truncate(s.node,e)},utime:(n,e,s)=>{var r=o.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(e,s)})},open:(n,e,s)=>{if(n==="")throw new o.ErrnoError(44);e=typeof e=="string"?o.modeStringToFlags(e):e,s=typeof s>"u"?438:s,e&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=me.normalize(n);try{var i=o.lookupPath(n,{follow:!(e&131072)});r=i.node}catch{}}var a=!1;if(e&64)if(r){if(e&128)throw new o.ErrnoError(20)}else r=o.mknod(n,s,0),a=!0;if(!r)throw new o.ErrnoError(44);if(o.isChrdev(r.mode)&&(e&=-513),e&65536&&!o.isDir(r.mode))throw new o.ErrnoError(54);if(!a){var m=o.mayOpen(r,e);if(m)throw new o.ErrnoError(m)}e&512&&!a&&o.truncate(r,0),e&=-131713;var q=o.createStream({node:r,path:o.getPath(r),flags:e,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return q.stream_ops.open&&q.stream_ops.open(q),t.logReadFiles&&!(e&1)&&(o.readFiles||(o.readFiles={}),n in o.readFiles||(o.readFiles[n]=1)),q},close:n=>{if(o.isClosed(n))throw new o.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(e){throw e}finally{o.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new o.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new o.ErrnoError(28);return n.position=n.stream_ops.llseek(n,e,s),n.ungotten=[],n.position},read:(n,e,s,r,i)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if((n.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.read)throw new o.ErrnoError(28);var a=typeof i<"u";if(!a)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var m=n.stream_ops.read(n,e,s,r,i);return a||(n.position+=m),m},write:(n,e,s,r,i,a)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.write)throw new o.ErrnoError(28);n.seekable&&n.flags&1024&&o.llseek(n,0,2);var m=typeof i<"u";if(!m)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var q=n.stream_ops.write(n,e,s,r,i,a);return m||(n.position+=q),q},allocate:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(e<0||s<=0)throw new o.ErrnoError(28);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(n.node.mode)&&!o.isDir(n.node.mode))throw new o.ErrnoError(43);if(!n.stream_ops.allocate)throw new o.ErrnoError(138);n.stream_ops.allocate(n,e,s)},mmap:(n,e,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new o.ErrnoError(2);if((n.flags&2097155)===1)throw new o.ErrnoError(2);if(!n.stream_ops.mmap)throw new o.ErrnoError(43);return n.stream_ops.mmap(n,e,s,r,i)},msync:(n,e,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,e,s,r,i):0,munmap:n=>0,ioctl:(n,e,s)=>{if(!n.stream_ops.ioctl)throw new o.ErrnoError(59);return n.stream_ops.ioctl(n,e,s)},readFile:(n,e={})=>{if(e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw new Error('Invalid encoding type "'+e.encoding+'"');var s,r=o.open(n,e.flags),i=o.stat(n),a=i.size,m=new Uint8Array(a);return o.read(r,m,0,a,0),e.encoding==="utf8"?s=Ue(m,0):e.encoding==="binary"&&(s=m),o.close(r),s},writeFile:(n,e,s={})=>{s.flags=s.flags||577;var r=o.open(n,s.flags,s.mode);if(typeof e=="string"){var i=new Uint8Array($e(e)+1),a=st(e,i,0,i.length);o.write(r,i,0,a,void 0,s.canOwn)}else if(ArrayBuffer.isView(e))o.write(r,e,0,e.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");o.close(r)},cwd:()=>o.currentPath,chdir:n=>{var e=o.lookupPath(n,{follow:!0});if(e.node===null)throw new o.ErrnoError(44);if(!o.isDir(e.node.mode))throw new o.ErrnoError(54);var s=o.nodePermissions(e.node,"x");if(s)throw new o.ErrnoError(s);o.currentPath=e.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(e,s,r,i,a)=>i}),o.mkdev("/dev/null",o.makedev(1,3)),Be.register(o.makedev(5,0),Be.default_tty_ops),Be.register(o.makedev(6,0),Be.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var n=Sn();o.createDevice("/dev","random",n),o.createDevice("/dev","urandom",n),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var n=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var e=o.createNode(n,"fd",16895,73);return e.node_ops={lookup:(s,r)=>{var i=+r,a=o.getStream(i);if(!a)throw new o.ErrnoError(8);var m={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return m.parent=m,m}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?o.createDevice("/dev","stdin",t.stdin):o.symlink("/dev/tty","/dev/stdin"),t.stdout?o.createDevice("/dev","stdout",null,t.stdout):o.symlink("/dev/tty","/dev/stdout"),t.stderr?o.createDevice("/dev","stderr",null,t.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=function(e,s){this.node=s,this.setErrno=function(r){this.errno=r},this.setErrno(e),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(n=>{o.genericErrors[n]=new o.ErrnoError(n),o.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(ce,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:ce}},init:(n,e,s)=>{o.init.initialized=!0,o.ensureErrnoError(),t.stdin=n||t.stdin,t.stdout=e||t.stdout,t.stderr=s||t.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var n=0;n<o.streams.length;n++){var e=o.streams[n];e&&o.close(e)}},getMode:(n,e)=>{var s=0;return n&&(s|=365),e&&(s|=146),s},findObject:(n,e)=>{var s=o.analyzePath(n,e);return s.exists?s.object:null},analyzePath:(n,e)=>{try{var s=o.lookupPath(n,{follow:!e});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=o.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=me.basename(n),s=o.lookupPath(n,{follow:!e}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,e,s,r)=>{n=typeof n=="string"?n:o.getPath(n);for(var i=e.split("/").reverse();i.length;){var a=i.pop();if(a){var m=me.join2(n,a);try{o.mkdir(m)}catch{}n=m}}return m},createFile:(n,e,s,r,i)=>{var a=me.join2(typeof n=="string"?n:o.getPath(n),e),m=o.getMode(r,i);return o.create(a,m)},createDataFile:(n,e,s,r,i,a)=>{var m=e;n&&(n=typeof n=="string"?n:o.getPath(n),m=e?me.join2(n,e):n);var q=o.getMode(r,i),F=o.create(m,q);if(s){if(typeof s=="string"){for(var B=new Array(s.length),H=0,ee=s.length;H<ee;++H)B[H]=s.charCodeAt(H);s=B}o.chmod(F,q|146);var x=o.open(F,577);o.write(x,s,0,s.length,0,a),o.close(x),o.chmod(F,q)}return F},createDevice:(n,e,s,r)=>{var i=me.join2(typeof n=="string"?n:o.getPath(n),e),a=o.getMode(!!s,!!r);o.createDevice.major||(o.createDevice.major=64);var m=o.makedev(o.createDevice.major++,0);return o.registerDevice(m,{open:q=>{q.seekable=!1},close:q=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(q,F,B,H,ee)=>{for(var x=0,f=0;f<H;f++){var d;try{d=s()}catch{throw new o.ErrnoError(29)}if(d===void 0&&x===0)throw new o.ErrnoError(6);if(d==null)break;x++,F[B+f]=d}return x&&(q.node.timestamp=Date.now()),x},write:(q,F,B,H,ee)=>{for(var x=0;x<H;x++)try{r(F[B+x])}catch{throw new o.ErrnoError(29)}return H&&(q.node.timestamp=Date.now()),x}}),o.mkdev(i,a,m)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Ve)try{n.contents=ht(Ve(n.url),!0),n.usedBytes=n.contents.length}catch{throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,e,s,r,i)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(f){if(!(f>this.length-1||f<0)){var d=f%this.chunkSize,y=f/this.chunkSize|0;return this.getter(y)[d]}},a.prototype.setDataGetter=function(f){this.getter=f},a.prototype.cacheLength=function(){var f=new XMLHttpRequest;if(f.open("HEAD",s,!1),f.send(null),!(f.status>=200&&f.status<300||f.status===304))throw new Error("Couldn't load "+s+". Status: "+f.status);var d=Number(f.getResponseHeader("Content-length")),y,E=(y=f.getResponseHeader("Accept-Ranges"))&&y==="bytes",h=(y=f.getResponseHeader("Content-Encoding"))&&y==="gzip",L=1024*1024;E||(L=d);var M=(O,se)=>{if(O>se)throw new Error("invalid range ("+O+", "+se+") or no bytes requested!");if(se>d-1)throw new Error("only "+d+" bytes available! programmer error!");var _=new XMLHttpRequest;if(_.open("GET",s,!1),d!==L&&_.setRequestHeader("Range","bytes="+O+"-"+se),_.responseType="arraybuffer",_.overrideMimeType&&_.overrideMimeType("text/plain; charset=x-user-defined"),_.send(null),!(_.status>=200&&_.status<300||_.status===304))throw new Error("Couldn't load "+s+". Status: "+_.status);return _.response!==void 0?new Uint8Array(_.response||[]):ht(_.responseText||"",!0)},z=this;z.setDataGetter(O=>{var se=O*L,_=(O+1)*L-1;if(_=Math.min(_,d-1),typeof z.chunks[O]>"u"&&(z.chunks[O]=M(se,_)),typeof z.chunks[O]>"u")throw new Error("doXHR failed!");return z.chunks[O]}),(h||!d)&&(L=d=1,d=this.getter(0).length,L=d,rt("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=d,this._chunkSize=L,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!he)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var m=new a;Object.defineProperties(m,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var q={isDevice:!1,contents:m}}else var q={isDevice:!1,url:s};var F=o.createFile(n,e,q,r,i);q.contents?F.contents=q.contents:q.url&&(F.contents=null,F.url=q.url),Object.defineProperties(F,{usedBytes:{get:function(){return this.contents.length}}});var B={},H=Object.keys(F.stream_ops);H.forEach(x=>{var f=F.stream_ops[x];B[x]=function(){return o.forceLoadFile(F),f.apply(null,arguments)}});function ee(x,f,d,y,E){var h=x.node.contents;if(E>=h.length)return 0;var L=Math.min(h.length-E,y);if(h.slice)for(var M=0;M<L;M++)f[d+M]=h[E+M];else for(var M=0;M<L;M++)f[d+M]=h.get(E+M);return L}return B.read=(x,f,d,y,E)=>(o.forceLoadFile(F),ee(x,f,d,y,E)),B.mmap=(x,f,d,y,E)=>{o.forceLoadFile(F);var h=jt(f);if(!h)throw new o.ErrnoError(48);return ee(x,Fe,h,f,d),{ptr:h,allocated:!0}},F.stream_ops=B,F},createPreloadedFile:(n,e,s,r,i,a,m,q,F,B)=>{var H=e?De.resolve(me.join2(n,e)):n;function ee(x){function f(d){B&&B(),q||o.createDataFile(n,e,d,r,i,F),a&&a(),it()}Browser.handledByPreloadPlugin(x,H,f,()=>{m&&m(),it()})||f(x)}pt(),typeof s=="string"?In(s,x=>ee(x),m):ee(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=()=>{rt("creating db");var a=i.result;a.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=()=>{var a=i.result,m=a.transaction([o.DB_STORE_NAME],"readwrite"),q=m.objectStore(o.DB_STORE_NAME),F=0,B=0,H=n.length;function ee(){B==0?e():s()}n.forEach(x=>{var f=q.put(o.analyzePath(x).object.contents,x);f.onsuccess=()=>{F++,F+B==H&&ee()},f.onerror=()=>{B++,F+B==H&&ee()}}),m.onerror=s},i.onerror=s},loadFilesFromDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=s,i.onsuccess=()=>{var a=i.result;try{var m=a.transaction([o.DB_STORE_NAME],"readonly")}catch(x){s(x);return}var q=m.objectStore(o.DB_STORE_NAME),F=0,B=0,H=n.length;function ee(){B==0?e():s()}n.forEach(x=>{var f=q.get(x);f.onsuccess=()=>{o.analyzePath(x).exists&&o.unlink(x),o.createDataFile(me.dirname(x),me.basename(x),f.result,!0,!0,!0),F++,F+B==H&&ee()},f.onerror=()=>{B++,F+B==H&&ee()}}),m.onerror=s},i.onerror=s}},le={DEFAULT_POLLMASK:5,calculateAt:function(n,e,s){if(me.isAbs(e))return e;var r;if(n===-100)r=o.cwd();else{var i=le.getStreamFromFD(n);r=i.path}if(e.length==0){if(!s)throw new o.ErrnoError(44);return r}return me.join2(r,e)},doStat:function(n,e,s){try{var r=n(e)}catch(q){if(q&&q.node&&me.normalize(e)!==me.normalize(o.getPath(q.node)))return-54;throw q}_e[s>>2]=r.dev,_e[s+8>>2]=r.ino,_e[s+12>>2]=r.mode,Se[s+16>>2]=r.nlink,_e[s+20>>2]=r.uid,_e[s+24>>2]=r.gid,_e[s+28>>2]=r.rdev,Ae=[r.size>>>0,(de=r.size,+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+40>>2]=Ae[0],_e[s+44>>2]=Ae[1],_e[s+48>>2]=4096,_e[s+52>>2]=r.blocks;var i=r.atime.getTime(),a=r.mtime.getTime(),m=r.ctime.getTime();return Ae=[Math.floor(i/1e3)>>>0,(de=Math.floor(i/1e3),+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+56>>2]=Ae[0],_e[s+60>>2]=Ae[1],Se[s+64>>2]=i%1e3*1e3,Ae=[Math.floor(a/1e3)>>>0,(de=Math.floor(a/1e3),+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+72>>2]=Ae[0],_e[s+76>>2]=Ae[1],Se[s+80>>2]=a%1e3*1e3,Ae=[Math.floor(m/1e3)>>>0,(de=Math.floor(m/1e3),+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+88>>2]=Ae[0],_e[s+92>>2]=Ae[1],Se[s+96>>2]=m%1e3*1e3,Ae=[r.ino>>>0,(de=r.ino,+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[s+104>>2]=Ae[0],_e[s+108>>2]=Ae[1],0},doMsync:function(n,e,s,r,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);if(r&2)return 0;var a=We.slice(n,n+s);o.msync(e,a,i,s,r)},varargs:void 0,get:function(){le.varargs+=4;var n=_e[le.varargs-4>>2];return n},getStr:function(n){var e=pn(n);return e},getStreamFromFD:function(n){var e=o.getStream(n);if(!e)throw new o.ErrnoError(8);return e}};function kn(n,e){try{return n=le.getStr(n),o.chmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Tn(n,e,s,r){try{if(e=le.getStr(e),e=le.calculateAt(n,e),s&-8)return-28;var i=o.lookupPath(e,{follow:!0}),a=i.node;if(!a)return-44;var m="";return s&4&&(m+="r"),s&2&&(m+="w"),s&1&&(m+="x"),m&&o.nodePermissions(a,m)?-2:0}catch(q){if(typeof o>"u"||!(q instanceof o.ErrnoError))throw q;return-q.errno}}function Fn(n,e){try{return o.fchmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function On(n,e,s){try{return o.fchown(n,e,s),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Pn(n){return _e[Ht()>>2]=n,n}function Ln(n,e,s){le.varargs=s;try{var r=le.getStreamFromFD(n);switch(e){case 0:{var i=le.get();if(i<0)return-28;var a;return a=o.createStream(r,i),a.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=le.get();return r.flags|=i,0}case 5:{var i=le.get(),m=0;return Ot[i+m>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Pn(28),-1;default:return-28}}catch(q){if(typeof o>"u"||!(q instanceof o.ErrnoError))throw q;return-q.errno}}function Dn(n,e){try{var s=le.getStreamFromFD(n);return le.doStat(o.stat,s.path,e)}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}var Cn=9007199254740992,Rn=-9007199254740992;function Bt(n){return n<Rn||n>Cn?NaN:Number(n)}function Mn(n,e){try{return e=Bt(e),isNaN(e)?-61:(o.ftruncate(n,e),0)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Nn(n,e){try{if(e===0)return-28;var s=o.cwd(),r=$e(s)+1;return e<r?-68:(Ft(s,n,e),r)}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return-i.errno}}function jn(n,e,s){le.varargs=s;try{var r=le.getStreamFromFD(n);switch(e){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=le.get();return _e[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=le.get();return o.ioctl(r,e,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function Bn(n,e){try{return n=le.getStr(n),le.doStat(o.lstat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function zn(n,e,s){try{return e=le.getStr(e),e=le.calculateAt(n,e),e=me.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),o.mkdir(e,s,0),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Un(n,e,s,r){try{e=le.getStr(e);var i=r&256,a=r&4096;return r=r&-6401,e=le.calculateAt(n,e,a),le.doStat(i?o.lstat:o.stat,e,s)}catch(m){if(typeof o>"u"||!(m instanceof o.ErrnoError))throw m;return-m.errno}}function Wn(n,e,s,r){le.varargs=r;try{e=le.getStr(e),e=le.calculateAt(n,e);var i=r?le.get():0;return o.open(e,s,i).fd}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function Qn(n,e,s,r){try{if(e=le.getStr(e),e=le.calculateAt(n,e),r<=0)return-28;var i=o.readlink(e),a=Math.min(r,$e(i)),m=Fe[s+a];return Ft(i,s,r+1),Fe[s+a]=m,a}catch(q){if(typeof o>"u"||!(q instanceof o.ErrnoError))throw q;return-q.errno}}function Hn(n){try{return n=le.getStr(n),o.rmdir(n),0}catch(e){if(typeof o>"u"||!(e instanceof o.ErrnoError))throw e;return-e.errno}}function Vn(n,e){try{return n=le.getStr(n),le.doStat(o.stat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Gn(n,e,s){try{return e=le.getStr(e),e=le.calculateAt(n,e),s===0?o.unlink(e):s===512?o.rmdir(e):Qe("Invalid flags passed to unlinkat"),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function gt(n){return Se[n>>2]+_e[n+4>>2]*4294967296}function $n(n,e,s,r){try{if(e=le.getStr(e),e=le.calculateAt(n,e,!0),s){var m=gt(s),q=_e[s+8>>2];i=m*1e3+q/(1e3*1e3),s+=16,m=gt(s),q=_e[s+8>>2],a=m*1e3+q/(1e3*1e3)}else var i=Date.now(),a=i;return o.utime(e,i,a),0}catch(F){if(typeof o>"u"||!(F instanceof o.ErrnoError))throw F;return-F.errno}}var Kn=!0;function Jn(){return Kn}function Xn(n){return n%4===0&&(n%100!==0||n%400===0)}var Yn=[0,31,60,91,121,152,182,213,244,274,305,335],Zn=[0,31,59,90,120,151,181,212,243,273,304,334];function er(n){var e=Xn(n.getFullYear()),s=e?Yn:Zn,r=s[n.getMonth()]+n.getDate()-1;return r}function tr(n,e){var s=new Date(gt(n)*1e3);_e[e>>2]=s.getSeconds(),_e[e+4>>2]=s.getMinutes(),_e[e+8>>2]=s.getHours(),_e[e+12>>2]=s.getDate(),_e[e+16>>2]=s.getMonth(),_e[e+20>>2]=s.getFullYear()-1900,_e[e+24>>2]=s.getDay();var r=er(s)|0;_e[e+28>>2]=r,_e[e+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),a=new Date(s.getFullYear(),6,1).getTimezoneOffset(),m=i.getTimezoneOffset(),q=(a!=m&&s.getTimezoneOffset()==Math.min(m,a))|0;_e[e+32>>2]=q}function nr(n,e,s,r,i,a,m){try{var q=le.getStreamFromFD(r),F=o.mmap(q,n,i,e,s),B=F.ptr;return _e[a>>2]=F.allocated,Se[m>>2]=B,0}catch(H){if(typeof o>"u"||!(H instanceof o.ErrnoError))throw H;return-H.errno}}function rr(n,e,s,r,i,a){try{var m=le.getStreamFromFD(i);s&2&&le.doMsync(n,m,e,r,a),o.munmap(m)}catch(q){if(typeof o>"u"||!(q instanceof o.ErrnoError))throw q;return-q.errno}}function zt(n){var e=$e(n)+1,s=Vt(e);return s&&st(n,Fe,s,e),s}function sr(n,e,s){var r=new Date().getFullYear(),i=new Date(r,0,1),a=new Date(r,6,1),m=i.getTimezoneOffset(),q=a.getTimezoneOffset(),F=Math.max(m,q);Se[n>>2]=F*60,_e[e>>2]=+(m!=q);function B(d){var y=d.toTimeString().match(/\(([A-Za-z ]+)\)$/);return y?y[1]:"GMT"}var H=B(i),ee=B(a),x=zt(H),f=zt(ee);q<m?(Se[s>>2]=x,Se[s+4>>2]=f):(Se[s>>2]=f,Se[s+4>>2]=x)}function ir(){return Date.now()}var Ut;Ut=()=>performance.now();function or(){return 2147483648}function ar(n){var e=Me.buffer;try{return Me.grow(n-e.byteLength+65535>>>16),Pt(),1}catch{}}function lr(n){var e=We.length;n=n>>>0;var s=or();if(n>s)return!1;let r=(F,B)=>F+(B-F%B)%B;for(var i=1;i<=4;i*=2){var a=e*(1+.2/i);a=Math.min(a,n+100663296);var m=Math.min(s,r(Math.max(n,a),65536)),q=ar(m);if(q)return!0}return!1}var yt={};function cr(){return Ee||"./this.program"}function Je(){if(!Je.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:cr()};for(var s in yt)yt[s]===void 0?delete e[s]:e[s]=yt[s];var r=[];for(var s in e)r.push(s+"="+e[s]);Je.strings=r}return Je.strings}function ur(n,e,s){for(var r=0;r<n.length;++r)Fe[e++>>0]=n.charCodeAt(r);s||(Fe[e>>0]=0)}function _r(n,e){var s=0;return Je().forEach(function(r,i){var a=e+s;Se[n+i*4>>2]=a,ur(r,a),s+=r.length+1}),0}function fr(n,e){var s=Je();Se[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),Se[e>>2]=r,0}function dr(n){try{var e=le.getStreamFromFD(n);return o.close(e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function pr(n,e){try{var s=le.getStreamFromFD(n),r=s.tty?2:o.isDir(s.mode)?3:o.isLink(s.mode)?7:4;return Fe[e>>0]=r,0}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return i.errno}}function mr(n,e,s,r){for(var i=0,a=0;a<s;a++){var m=Se[e>>2],q=Se[e+4>>2];e+=8;var F=o.read(n,Fe,m,q,r);if(F<0)return-1;if(i+=F,F<q)break;typeof r<"u"&&(r+=F)}return i}function hr(n,e,s,r){try{var i=le.getStreamFromFD(n),a=mr(i,e,s);return Se[r>>2]=a,0}catch(m){if(typeof o>"u"||!(m instanceof o.ErrnoError))throw m;return m.errno}}function gr(n,e,s,r){try{if(e=Bt(e),isNaN(e))return 61;var i=le.getStreamFromFD(n);return o.llseek(i,e,s),Ae=[i.position>>>0,(de=i.position,+Math.abs(de)>=1?de>0?(Math.min(+Math.floor(de/4294967296),4294967295)|0)>>>0:~~+Math.ceil((de-+(~~de>>>0))/4294967296)>>>0:0)],_e[r>>2]=Ae[0],_e[r+4>>2]=Ae[1],i.getdents&&e===0&&s===0&&(i.getdents=null),0}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return a.errno}}function yr(n){try{var e=le.getStreamFromFD(n);return e.stream_ops&&e.stream_ops.fsync?e.stream_ops.fsync(e):0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function br(n,e,s,r){for(var i=0,a=0;a<s;a++){var m=Se[e>>2],q=Se[e+4>>2];e+=8;var F=o.write(n,Fe,m,q,r);if(F<0)return-1;i+=F,typeof r<"u"&&(r+=F)}return i}function qr(n,e,s,r){try{var i=le.getStreamFromFD(n),a=br(i,e,s);return Se[r>>2]=a,0}catch(m){if(typeof o>"u"||!(m instanceof o.ErrnoError))throw m;return m.errno}}var Wt=function(n,e,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=o.nextInode++,this.name=e,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},ot=365,at=146;Object.defineProperties(Wt.prototype,{read:{get:function(){return(this.mode&ot)===ot},set:function(n){n?this.mode|=ot:this.mode&=~ot}},write:{get:function(){return(this.mode&at)===at},set:function(n){n?this.mode|=at:this.mode&=~at}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=Wt,o.staticInit();var Qt={__syscall_chmod:kn,__syscall_faccessat:Tn,__syscall_fchmod:Fn,__syscall_fchown32:On,__syscall_fcntl64:Ln,__syscall_fstat64:Dn,__syscall_ftruncate64:Mn,__syscall_getcwd:Nn,__syscall_ioctl:jn,__syscall_lstat64:Bn,__syscall_mkdirat:zn,__syscall_newfstatat:Un,__syscall_openat:Wn,__syscall_readlinkat:Qn,__syscall_rmdir:Hn,__syscall_stat64:Vn,__syscall_unlinkat:Gn,__syscall_utimensat:$n,_emscripten_get_now_is_monotonic:Jn,_localtime_js:tr,_mmap_js:nr,_munmap_js:rr,_tzset_js:sr,emscripten_date_now:ir,emscripten_get_now:Ut,emscripten_resize_heap:lr,environ_get:_r,environ_sizes_get:fr,fd_close:dr,fd_fdstat_get:pr,fd_read:hr,fd_seek:gr,fd_sync:yr,fd_write:qr,memory:Me};vn(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},t._sqlite3_status64=function(){return(t._sqlite3_status64=t.asm.sqlite3_status64).apply(null,arguments)},t._sqlite3_status=function(){return(t._sqlite3_status=t.asm.sqlite3_status).apply(null,arguments)},t._sqlite3_db_status=function(){return(t._sqlite3_db_status=t.asm.sqlite3_db_status).apply(null,arguments)},t._sqlite3_msize=function(){return(t._sqlite3_msize=t.asm.sqlite3_msize).apply(null,arguments)},t._sqlite3_vfs_find=function(){return(t._sqlite3_vfs_find=t.asm.sqlite3_vfs_find).apply(null,arguments)},t._sqlite3_initialize=function(){return(t._sqlite3_initialize=t.asm.sqlite3_initialize).apply(null,arguments)},t._sqlite3_malloc=function(){return(t._sqlite3_malloc=t.asm.sqlite3_malloc).apply(null,arguments)},t._sqlite3_free=function(){return(t._sqlite3_free=t.asm.sqlite3_free).apply(null,arguments)},t._sqlite3_vfs_register=function(){return(t._sqlite3_vfs_register=t.asm.sqlite3_vfs_register).apply(null,arguments)},t._sqlite3_vfs_unregister=function(){return(t._sqlite3_vfs_unregister=t.asm.sqlite3_vfs_unregister).apply(null,arguments)},t._sqlite3_malloc64=function(){return(t._sqlite3_malloc64=t.asm.sqlite3_malloc64).apply(null,arguments)},t._sqlite3_realloc=function(){return(t._sqlite3_realloc=t.asm.sqlite3_realloc).apply(null,arguments)},t._sqlite3_realloc64=function(){return(t._sqlite3_realloc64=t.asm.sqlite3_realloc64).apply(null,arguments)},t._sqlite3_value_text=function(){return(t._sqlite3_value_text=t.asm.sqlite3_value_text).apply(null,arguments)},t._sqlite3_randomness=function(){return(t._sqlite3_randomness=t.asm.sqlite3_randomness).apply(null,arguments)},t._sqlite3_stricmp=function(){return(t._sqlite3_stricmp=t.asm.sqlite3_stricmp).apply(null,arguments)},t._sqlite3_strnicmp=function(){return(t._sqlite3_strnicmp=t.asm.sqlite3_strnicmp).apply(null,arguments)},t._sqlite3_uri_parameter=function(){return(t._sqlite3_uri_parameter=t.asm.sqlite3_uri_parameter).apply(null,arguments)};var Ht=t.___errno_location=function(){return(Ht=t.___errno_location=t.asm.__errno_location).apply(null,arguments)};t._sqlite3_uri_boolean=function(){return(t._sqlite3_uri_boolean=t.asm.sqlite3_uri_boolean).apply(null,arguments)},t._sqlite3_serialize=function(){return(t._sqlite3_serialize=t.asm.sqlite3_serialize).apply(null,arguments)},t._sqlite3_prepare_v2=function(){return(t._sqlite3_prepare_v2=t.asm.sqlite3_prepare_v2).apply(null,arguments)},t._sqlite3_step=function(){return(t._sqlite3_step=t.asm.sqlite3_step).apply(null,arguments)},t._sqlite3_column_int64=function(){return(t._sqlite3_column_int64=t.asm.sqlite3_column_int64).apply(null,arguments)},t._sqlite3_column_int=function(){return(t._sqlite3_column_int=t.asm.sqlite3_column_int).apply(null,arguments)},t._sqlite3_finalize=function(){return(t._sqlite3_finalize=t.asm.sqlite3_finalize).apply(null,arguments)},t._sqlite3_file_control=function(){return(t._sqlite3_file_control=t.asm.sqlite3_file_control).apply(null,arguments)},t._sqlite3_reset=function(){return(t._sqlite3_reset=t.asm.sqlite3_reset).apply(null,arguments)},t._sqlite3_deserialize=function(){return(t._sqlite3_deserialize=t.asm.sqlite3_deserialize).apply(null,arguments)},t._sqlite3_clear_bindings=function(){return(t._sqlite3_clear_bindings=t.asm.sqlite3_clear_bindings).apply(null,arguments)},t._sqlite3_value_blob=function(){return(t._sqlite3_value_blob=t.asm.sqlite3_value_blob).apply(null,arguments)},t._sqlite3_value_bytes=function(){return(t._sqlite3_value_bytes=t.asm.sqlite3_value_bytes).apply(null,arguments)},t._sqlite3_value_double=function(){return(t._sqlite3_value_double=t.asm.sqlite3_value_double).apply(null,arguments)},t._sqlite3_value_int=function(){return(t._sqlite3_value_int=t.asm.sqlite3_value_int).apply(null,arguments)},t._sqlite3_value_int64=function(){return(t._sqlite3_value_int64=t.asm.sqlite3_value_int64).apply(null,arguments)},t._sqlite3_value_subtype=function(){return(t._sqlite3_value_subtype=t.asm.sqlite3_value_subtype).apply(null,arguments)},t._sqlite3_value_pointer=function(){return(t._sqlite3_value_pointer=t.asm.sqlite3_value_pointer).apply(null,arguments)},t._sqlite3_value_type=function(){return(t._sqlite3_value_type=t.asm.sqlite3_value_type).apply(null,arguments)},t._sqlite3_value_nochange=function(){return(t._sqlite3_value_nochange=t.asm.sqlite3_value_nochange).apply(null,arguments)},t._sqlite3_value_frombind=function(){return(t._sqlite3_value_frombind=t.asm.sqlite3_value_frombind).apply(null,arguments)},t._sqlite3_value_dup=function(){return(t._sqlite3_value_dup=t.asm.sqlite3_value_dup).apply(null,arguments)},t._sqlite3_value_free=function(){return(t._sqlite3_value_free=t.asm.sqlite3_value_free).apply(null,arguments)},t._sqlite3_result_blob=function(){return(t._sqlite3_result_blob=t.asm.sqlite3_result_blob).apply(null,arguments)},t._sqlite3_result_error_toobig=function(){return(t._sqlite3_result_error_toobig=t.asm.sqlite3_result_error_toobig).apply(null,arguments)},t._sqlite3_result_error_nomem=function(){return(t._sqlite3_result_error_nomem=t.asm.sqlite3_result_error_nomem).apply(null,arguments)},t._sqlite3_result_double=function(){return(t._sqlite3_result_double=t.asm.sqlite3_result_double).apply(null,arguments)},t._sqlite3_result_error=function(){return(t._sqlite3_result_error=t.asm.sqlite3_result_error).apply(null,arguments)},t._sqlite3_result_int=function(){return(t._sqlite3_result_int=t.asm.sqlite3_result_int).apply(null,arguments)},t._sqlite3_result_int64=function(){return(t._sqlite3_result_int64=t.asm.sqlite3_result_int64).apply(null,arguments)},t._sqlite3_result_null=function(){return(t._sqlite3_result_null=t.asm.sqlite3_result_null).apply(null,arguments)},t._sqlite3_result_pointer=function(){return(t._sqlite3_result_pointer=t.asm.sqlite3_result_pointer).apply(null,arguments)},t._sqlite3_result_subtype=function(){return(t._sqlite3_result_subtype=t.asm.sqlite3_result_subtype).apply(null,arguments)},t._sqlite3_result_text=function(){return(t._sqlite3_result_text=t.asm.sqlite3_result_text).apply(null,arguments)},t._sqlite3_result_zeroblob=function(){return(t._sqlite3_result_zeroblob=t.asm.sqlite3_result_zeroblob).apply(null,arguments)},t._sqlite3_result_zeroblob64=function(){return(t._sqlite3_result_zeroblob64=t.asm.sqlite3_result_zeroblob64).apply(null,arguments)},t._sqlite3_result_error_code=function(){return(t._sqlite3_result_error_code=t.asm.sqlite3_result_error_code).apply(null,arguments)},t._sqlite3_user_data=function(){return(t._sqlite3_user_data=t.asm.sqlite3_user_data).apply(null,arguments)},t._sqlite3_context_db_handle=function(){return(t._sqlite3_context_db_handle=t.asm.sqlite3_context_db_handle).apply(null,arguments)},t._sqlite3_vtab_nochange=function(){return(t._sqlite3_vtab_nochange=t.asm.sqlite3_vtab_nochange).apply(null,arguments)},t._sqlite3_vtab_in_first=function(){return(t._sqlite3_vtab_in_first=t.asm.sqlite3_vtab_in_first).apply(null,arguments)},t._sqlite3_vtab_in_next=function(){return(t._sqlite3_vtab_in_next=t.asm.sqlite3_vtab_in_next).apply(null,arguments)},t._sqlite3_aggregate_context=function(){return(t._sqlite3_aggregate_context=t.asm.sqlite3_aggregate_context).apply(null,arguments)},t._sqlite3_get_auxdata=function(){return(t._sqlite3_get_auxdata=t.asm.sqlite3_get_auxdata).apply(null,arguments)},t._sqlite3_set_auxdata=function(){return(t._sqlite3_set_auxdata=t.asm.sqlite3_set_auxdata).apply(null,arguments)},t._sqlite3_column_count=function(){return(t._sqlite3_column_count=t.asm.sqlite3_column_count).apply(null,arguments)},t._sqlite3_data_count=function(){return(t._sqlite3_data_count=t.asm.sqlite3_data_count).apply(null,arguments)},t._sqlite3_column_blob=function(){return(t._sqlite3_column_blob=t.asm.sqlite3_column_blob).apply(null,arguments)},t._sqlite3_column_bytes=function(){return(t._sqlite3_column_bytes=t.asm.sqlite3_column_bytes).apply(null,arguments)},t._sqlite3_column_double=function(){return(t._sqlite3_column_double=t.asm.sqlite3_column_double).apply(null,arguments)},t._sqlite3_column_text=function(){return(t._sqlite3_column_text=t.asm.sqlite3_column_text).apply(null,arguments)},t._sqlite3_column_value=function(){return(t._sqlite3_column_value=t.asm.sqlite3_column_value).apply(null,arguments)},t._sqlite3_column_type=function(){return(t._sqlite3_column_type=t.asm.sqlite3_column_type).apply(null,arguments)},t._sqlite3_column_name=function(){return(t._sqlite3_column_name=t.asm.sqlite3_column_name).apply(null,arguments)},t._sqlite3_bind_blob=function(){return(t._sqlite3_bind_blob=t.asm.sqlite3_bind_blob).apply(null,arguments)},t._sqlite3_bind_double=function(){return(t._sqlite3_bind_double=t.asm.sqlite3_bind_double).apply(null,arguments)},t._sqlite3_bind_int=function(){return(t._sqlite3_bind_int=t.asm.sqlite3_bind_int).apply(null,arguments)},t._sqlite3_bind_int64=function(){return(t._sqlite3_bind_int64=t.asm.sqlite3_bind_int64).apply(null,arguments)},t._sqlite3_bind_null=function(){return(t._sqlite3_bind_null=t.asm.sqlite3_bind_null).apply(null,arguments)},t._sqlite3_bind_pointer=function(){return(t._sqlite3_bind_pointer=t.asm.sqlite3_bind_pointer).apply(null,arguments)},t._sqlite3_bind_text=function(){return(t._sqlite3_bind_text=t.asm.sqlite3_bind_text).apply(null,arguments)},t._sqlite3_bind_parameter_count=function(){return(t._sqlite3_bind_parameter_count=t.asm.sqlite3_bind_parameter_count).apply(null,arguments)},t._sqlite3_bind_parameter_index=function(){return(t._sqlite3_bind_parameter_index=t.asm.sqlite3_bind_parameter_index).apply(null,arguments)},t._sqlite3_db_handle=function(){return(t._sqlite3_db_handle=t.asm.sqlite3_db_handle).apply(null,arguments)},t._sqlite3_stmt_readonly=function(){return(t._sqlite3_stmt_readonly=t.asm.sqlite3_stmt_readonly).apply(null,arguments)},t._sqlite3_stmt_isexplain=function(){return(t._sqlite3_stmt_isexplain=t.asm.sqlite3_stmt_isexplain).apply(null,arguments)},t._sqlite3_stmt_status=function(){return(t._sqlite3_stmt_status=t.asm.sqlite3_stmt_status).apply(null,arguments)},t._sqlite3_sql=function(){return(t._sqlite3_sql=t.asm.sqlite3_sql).apply(null,arguments)},t._sqlite3_expanded_sql=function(){return(t._sqlite3_expanded_sql=t.asm.sqlite3_expanded_sql).apply(null,arguments)},t._sqlite3_preupdate_old=function(){return(t._sqlite3_preupdate_old=t.asm.sqlite3_preupdate_old).apply(null,arguments)},t._sqlite3_preupdate_count=function(){return(t._sqlite3_preupdate_count=t.asm.sqlite3_preupdate_count).apply(null,arguments)},t._sqlite3_preupdate_depth=function(){return(t._sqlite3_preupdate_depth=t.asm.sqlite3_preupdate_depth).apply(null,arguments)},t._sqlite3_preupdate_blobwrite=function(){return(t._sqlite3_preupdate_blobwrite=t.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},t._sqlite3_preupdate_new=function(){return(t._sqlite3_preupdate_new=t.asm.sqlite3_preupdate_new).apply(null,arguments)},t._sqlite3_value_numeric_type=function(){return(t._sqlite3_value_numeric_type=t.asm.sqlite3_value_numeric_type).apply(null,arguments)},t._sqlite3_errmsg=function(){return(t._sqlite3_errmsg=t.asm.sqlite3_errmsg).apply(null,arguments)},t._sqlite3_set_authorizer=function(){return(t._sqlite3_set_authorizer=t.asm.sqlite3_set_authorizer).apply(null,arguments)},t._sqlite3_strglob=function(){return(t._sqlite3_strglob=t.asm.sqlite3_strglob).apply(null,arguments)},t._sqlite3_strlike=function(){return(t._sqlite3_strlike=t.asm.sqlite3_strlike).apply(null,arguments)},t._sqlite3_exec=function(){return(t._sqlite3_exec=t.asm.sqlite3_exec).apply(null,arguments)},t._sqlite3_auto_extension=function(){return(t._sqlite3_auto_extension=t.asm.sqlite3_auto_extension).apply(null,arguments)},t._sqlite3_cancel_auto_extension=function(){return(t._sqlite3_cancel_auto_extension=t.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},t._sqlite3_reset_auto_extension=function(){return(t._sqlite3_reset_auto_extension=t.asm.sqlite3_reset_auto_extension).apply(null,arguments)},t._sqlite3_prepare_v3=function(){return(t._sqlite3_prepare_v3=t.asm.sqlite3_prepare_v3).apply(null,arguments)},t._sqlite3_create_module=function(){return(t._sqlite3_create_module=t.asm.sqlite3_create_module).apply(null,arguments)},t._sqlite3_create_module_v2=function(){return(t._sqlite3_create_module_v2=t.asm.sqlite3_create_module_v2).apply(null,arguments)},t._sqlite3_drop_modules=function(){return(t._sqlite3_drop_modules=t.asm.sqlite3_drop_modules).apply(null,arguments)},t._sqlite3_declare_vtab=function(){return(t._sqlite3_declare_vtab=t.asm.sqlite3_declare_vtab).apply(null,arguments)},t._sqlite3_vtab_on_conflict=function(){return(t._sqlite3_vtab_on_conflict=t.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},t._sqlite3_vtab_collation=function(){return(t._sqlite3_vtab_collation=t.asm.sqlite3_vtab_collation).apply(null,arguments)},t._sqlite3_vtab_in=function(){return(t._sqlite3_vtab_in=t.asm.sqlite3_vtab_in).apply(null,arguments)},t._sqlite3_vtab_rhs_value=function(){return(t._sqlite3_vtab_rhs_value=t.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},t._sqlite3_vtab_distinct=function(){return(t._sqlite3_vtab_distinct=t.asm.sqlite3_vtab_distinct).apply(null,arguments)},t._sqlite3_keyword_name=function(){return(t._sqlite3_keyword_name=t.asm.sqlite3_keyword_name).apply(null,arguments)},t._sqlite3_keyword_count=function(){return(t._sqlite3_keyword_count=t.asm.sqlite3_keyword_count).apply(null,arguments)},t._sqlite3_keyword_check=function(){return(t._sqlite3_keyword_check=t.asm.sqlite3_keyword_check).apply(null,arguments)},t._sqlite3_complete=function(){return(t._sqlite3_complete=t.asm.sqlite3_complete).apply(null,arguments)},t._sqlite3_libversion=function(){return(t._sqlite3_libversion=t.asm.sqlite3_libversion).apply(null,arguments)},t._sqlite3_libversion_number=function(){return(t._sqlite3_libversion_number=t.asm.sqlite3_libversion_number).apply(null,arguments)},t._sqlite3_shutdown=function(){return(t._sqlite3_shutdown=t.asm.sqlite3_shutdown).apply(null,arguments)},t._sqlite3_last_insert_rowid=function(){return(t._sqlite3_last_insert_rowid=t.asm.sqlite3_last_insert_rowid).apply(null,arguments)},t._sqlite3_set_last_insert_rowid=function(){return(t._sqlite3_set_last_insert_rowid=t.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},t._sqlite3_changes64=function(){return(t._sqlite3_changes64=t.asm.sqlite3_changes64).apply(null,arguments)},t._sqlite3_changes=function(){return(t._sqlite3_changes=t.asm.sqlite3_changes).apply(null,arguments)},t._sqlite3_total_changes64=function(){return(t._sqlite3_total_changes64=t.asm.sqlite3_total_changes64).apply(null,arguments)},t._sqlite3_total_changes=function(){return(t._sqlite3_total_changes=t.asm.sqlite3_total_changes).apply(null,arguments)},t._sqlite3_txn_state=function(){return(t._sqlite3_txn_state=t.asm.sqlite3_txn_state).apply(null,arguments)},t._sqlite3_close_v2=function(){return(t._sqlite3_close_v2=t.asm.sqlite3_close_v2).apply(null,arguments)},t._sqlite3_busy_handler=function(){return(t._sqlite3_busy_handler=t.asm.sqlite3_busy_handler).apply(null,arguments)},t._sqlite3_progress_handler=function(){return(t._sqlite3_progress_handler=t.asm.sqlite3_progress_handler).apply(null,arguments)},t._sqlite3_busy_timeout=function(){return(t._sqlite3_busy_timeout=t.asm.sqlite3_busy_timeout).apply(null,arguments)},t._sqlite3_create_function=function(){return(t._sqlite3_create_function=t.asm.sqlite3_create_function).apply(null,arguments)},t._sqlite3_create_function_v2=function(){return(t._sqlite3_create_function_v2=t.asm.sqlite3_create_function_v2).apply(null,arguments)},t._sqlite3_create_window_function=function(){return(t._sqlite3_create_window_function=t.asm.sqlite3_create_window_function).apply(null,arguments)},t._sqlite3_overload_function=function(){return(t._sqlite3_overload_function=t.asm.sqlite3_overload_function).apply(null,arguments)},t._sqlite3_trace_v2=function(){return(t._sqlite3_trace_v2=t.asm.sqlite3_trace_v2).apply(null,arguments)},t._sqlite3_commit_hook=function(){return(t._sqlite3_commit_hook=t.asm.sqlite3_commit_hook).apply(null,arguments)},t._sqlite3_update_hook=function(){return(t._sqlite3_update_hook=t.asm.sqlite3_update_hook).apply(null,arguments)},t._sqlite3_rollback_hook=function(){return(t._sqlite3_rollback_hook=t.asm.sqlite3_rollback_hook).apply(null,arguments)},t._sqlite3_preupdate_hook=function(){return(t._sqlite3_preupdate_hook=t.asm.sqlite3_preupdate_hook).apply(null,arguments)},t._sqlite3_error_offset=function(){return(t._sqlite3_error_offset=t.asm.sqlite3_error_offset).apply(null,arguments)},t._sqlite3_errcode=function(){return(t._sqlite3_errcode=t.asm.sqlite3_errcode).apply(null,arguments)},t._sqlite3_extended_errcode=function(){return(t._sqlite3_extended_errcode=t.asm.sqlite3_extended_errcode).apply(null,arguments)},t._sqlite3_errstr=function(){return(t._sqlite3_errstr=t.asm.sqlite3_errstr).apply(null,arguments)},t._sqlite3_limit=function(){return(t._sqlite3_limit=t.asm.sqlite3_limit).apply(null,arguments)},t._sqlite3_open=function(){return(t._sqlite3_open=t.asm.sqlite3_open).apply(null,arguments)},t._sqlite3_open_v2=function(){return(t._sqlite3_open_v2=t.asm.sqlite3_open_v2).apply(null,arguments)},t._sqlite3_create_collation=function(){return(t._sqlite3_create_collation=t.asm.sqlite3_create_collation).apply(null,arguments)},t._sqlite3_create_collation_v2=function(){return(t._sqlite3_create_collation_v2=t.asm.sqlite3_create_collation_v2).apply(null,arguments)},t._sqlite3_collation_needed=function(){return(t._sqlite3_collation_needed=t.asm.sqlite3_collation_needed).apply(null,arguments)},t._sqlite3_table_column_metadata=function(){return(t._sqlite3_table_column_metadata=t.asm.sqlite3_table_column_metadata).apply(null,arguments)},t._sqlite3_extended_result_codes=function(){return(t._sqlite3_extended_result_codes=t.asm.sqlite3_extended_result_codes).apply(null,arguments)},t._sqlite3_uri_key=function(){return(t._sqlite3_uri_key=t.asm.sqlite3_uri_key).apply(null,arguments)},t._sqlite3_uri_int64=function(){return(t._sqlite3_uri_int64=t.asm.sqlite3_uri_int64).apply(null,arguments)},t._sqlite3_db_name=function(){return(t._sqlite3_db_name=t.asm.sqlite3_db_name).apply(null,arguments)},t._sqlite3_db_filename=function(){return(t._sqlite3_db_filename=t.asm.sqlite3_db_filename).apply(null,arguments)},t._sqlite3_compileoption_used=function(){return(t._sqlite3_compileoption_used=t.asm.sqlite3_compileoption_used).apply(null,arguments)},t._sqlite3_compileoption_get=function(){return(t._sqlite3_compileoption_get=t.asm.sqlite3_compileoption_get).apply(null,arguments)},t._sqlite3session_diff=function(){return(t._sqlite3session_diff=t.asm.sqlite3session_diff).apply(null,arguments)},t._sqlite3session_attach=function(){return(t._sqlite3session_attach=t.asm.sqlite3session_attach).apply(null,arguments)},t._sqlite3session_create=function(){return(t._sqlite3session_create=t.asm.sqlite3session_create).apply(null,arguments)},t._sqlite3session_delete=function(){return(t._sqlite3session_delete=t.asm.sqlite3session_delete).apply(null,arguments)},t._sqlite3session_table_filter=function(){return(t._sqlite3session_table_filter=t.asm.sqlite3session_table_filter).apply(null,arguments)},t._sqlite3session_changeset=function(){return(t._sqlite3session_changeset=t.asm.sqlite3session_changeset).apply(null,arguments)},t._sqlite3session_changeset_strm=function(){return(t._sqlite3session_changeset_strm=t.asm.sqlite3session_changeset_strm).apply(null,arguments)},t._sqlite3session_patchset_strm=function(){return(t._sqlite3session_patchset_strm=t.asm.sqlite3session_patchset_strm).apply(null,arguments)},t._sqlite3session_patchset=function(){return(t._sqlite3session_patchset=t.asm.sqlite3session_patchset).apply(null,arguments)},t._sqlite3session_enable=function(){return(t._sqlite3session_enable=t.asm.sqlite3session_enable).apply(null,arguments)},t._sqlite3session_indirect=function(){return(t._sqlite3session_indirect=t.asm.sqlite3session_indirect).apply(null,arguments)},t._sqlite3session_isempty=function(){return(t._sqlite3session_isempty=t.asm.sqlite3session_isempty).apply(null,arguments)},t._sqlite3session_memory_used=function(){return(t._sqlite3session_memory_used=t.asm.sqlite3session_memory_used).apply(null,arguments)},t._sqlite3session_object_config=function(){return(t._sqlite3session_object_config=t.asm.sqlite3session_object_config).apply(null,arguments)},t._sqlite3session_changeset_size=function(){return(t._sqlite3session_changeset_size=t.asm.sqlite3session_changeset_size).apply(null,arguments)},t._sqlite3changeset_start=function(){return(t._sqlite3changeset_start=t.asm.sqlite3changeset_start).apply(null,arguments)},t._sqlite3changeset_start_v2=function(){return(t._sqlite3changeset_start_v2=t.asm.sqlite3changeset_start_v2).apply(null,arguments)},t._sqlite3changeset_start_strm=function(){return(t._sqlite3changeset_start_strm=t.asm.sqlite3changeset_start_strm).apply(null,arguments)},t._sqlite3changeset_start_v2_strm=function(){return(t._sqlite3changeset_start_v2_strm=t.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},t._sqlite3changeset_next=function(){return(t._sqlite3changeset_next=t.asm.sqlite3changeset_next).apply(null,arguments)},t._sqlite3changeset_op=function(){return(t._sqlite3changeset_op=t.asm.sqlite3changeset_op).apply(null,arguments)},t._sqlite3changeset_pk=function(){return(t._sqlite3changeset_pk=t.asm.sqlite3changeset_pk).apply(null,arguments)},t._sqlite3changeset_old=function(){return(t._sqlite3changeset_old=t.asm.sqlite3changeset_old).apply(null,arguments)},t._sqlite3changeset_new=function(){return(t._sqlite3changeset_new=t.asm.sqlite3changeset_new).apply(null,arguments)},t._sqlite3changeset_conflict=function(){return(t._sqlite3changeset_conflict=t.asm.sqlite3changeset_conflict).apply(null,arguments)},t._sqlite3changeset_fk_conflicts=function(){return(t._sqlite3changeset_fk_conflicts=t.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},t._sqlite3changeset_finalize=function(){return(t._sqlite3changeset_finalize=t.asm.sqlite3changeset_finalize).apply(null,arguments)},t._sqlite3changeset_invert=function(){return(t._sqlite3changeset_invert=t.asm.sqlite3changeset_invert).apply(null,arguments)},t._sqlite3changeset_invert_strm=function(){return(t._sqlite3changeset_invert_strm=t.asm.sqlite3changeset_invert_strm).apply(null,arguments)},t._sqlite3changeset_apply_v2=function(){return(t._sqlite3changeset_apply_v2=t.asm.sqlite3changeset_apply_v2).apply(null,arguments)},t._sqlite3changeset_apply=function(){return(t._sqlite3changeset_apply=t.asm.sqlite3changeset_apply).apply(null,arguments)},t._sqlite3changeset_apply_v2_strm=function(){return(t._sqlite3changeset_apply_v2_strm=t.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},t._sqlite3changeset_apply_strm=function(){return(t._sqlite3changeset_apply_strm=t.asm.sqlite3changeset_apply_strm).apply(null,arguments)},t._sqlite3changegroup_new=function(){return(t._sqlite3changegroup_new=t.asm.sqlite3changegroup_new).apply(null,arguments)},t._sqlite3changegroup_add=function(){return(t._sqlite3changegroup_add=t.asm.sqlite3changegroup_add).apply(null,arguments)},t._sqlite3changegroup_output=function(){return(t._sqlite3changegroup_output=t.asm.sqlite3changegroup_output).apply(null,arguments)},t._sqlite3changegroup_add_strm=function(){return(t._sqlite3changegroup_add_strm=t.asm.sqlite3changegroup_add_strm).apply(null,arguments)},t._sqlite3changegroup_output_strm=function(){return(t._sqlite3changegroup_output_strm=t.asm.sqlite3changegroup_output_strm).apply(null,arguments)},t._sqlite3changegroup_delete=function(){return(t._sqlite3changegroup_delete=t.asm.sqlite3changegroup_delete).apply(null,arguments)},t._sqlite3changeset_concat=function(){return(t._sqlite3changeset_concat=t.asm.sqlite3changeset_concat).apply(null,arguments)},t._sqlite3changeset_concat_strm=function(){return(t._sqlite3changeset_concat_strm=t.asm.sqlite3changeset_concat_strm).apply(null,arguments)},t._sqlite3session_config=function(){return(t._sqlite3session_config=t.asm.sqlite3session_config).apply(null,arguments)},t._sqlite3_sourceid=function(){return(t._sqlite3_sourceid=t.asm.sqlite3_sourceid).apply(null,arguments)},t._sqlite3_wasm_pstack_ptr=function(){return(t._sqlite3_wasm_pstack_ptr=t.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},t._sqlite3_wasm_pstack_restore=function(){return(t._sqlite3_wasm_pstack_restore=t.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},t._sqlite3_wasm_pstack_alloc=function(){return(t._sqlite3_wasm_pstack_alloc=t.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},t._sqlite3_wasm_pstack_remaining=function(){return(t._sqlite3_wasm_pstack_remaining=t.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},t._sqlite3_wasm_pstack_quota=function(){return(t._sqlite3_wasm_pstack_quota=t.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},t._sqlite3_wasm_db_error=function(){return(t._sqlite3_wasm_db_error=t.asm.sqlite3_wasm_db_error).apply(null,arguments)},t._sqlite3_wasm_test_struct=function(){return(t._sqlite3_wasm_test_struct=t.asm.sqlite3_wasm_test_struct).apply(null,arguments)},t._sqlite3_wasm_enum_json=function(){return(t._sqlite3_wasm_enum_json=t.asm.sqlite3_wasm_enum_json).apply(null,arguments)},t._sqlite3_wasm_vfs_unlink=function(){return(t._sqlite3_wasm_vfs_unlink=t.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},t._sqlite3_wasm_db_vfs=function(){return(t._sqlite3_wasm_db_vfs=t.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},t._sqlite3_wasm_db_reset=function(){return(t._sqlite3_wasm_db_reset=t.asm.sqlite3_wasm_db_reset).apply(null,arguments)},t._sqlite3_wasm_db_export_chunked=function(){return(t._sqlite3_wasm_db_export_chunked=t.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},t._sqlite3_wasm_db_serialize=function(){return(t._sqlite3_wasm_db_serialize=t.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},t._sqlite3_wasm_vfs_create_file=function(){return(t._sqlite3_wasm_vfs_create_file=t.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},t._sqlite3_wasm_posix_create_file=function(){return(t._sqlite3_wasm_posix_create_file=t.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},t._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(t._sqlite3_wasm_kvvfsMakeKeyOnPstack=t.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},t._sqlite3_wasm_kvvfs_methods=function(){return(t._sqlite3_wasm_kvvfs_methods=t.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},t._sqlite3_wasm_vtab_config=function(){return(t._sqlite3_wasm_vtab_config=t.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},t._sqlite3_wasm_db_config_ip=function(){return(t._sqlite3_wasm_db_config_ip=t.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},t._sqlite3_wasm_db_config_pii=function(){return(t._sqlite3_wasm_db_config_pii=t.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},t._sqlite3_wasm_db_config_s=function(){return(t._sqlite3_wasm_db_config_s=t.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},t._sqlite3_wasm_config_i=function(){return(t._sqlite3_wasm_config_i=t.asm.sqlite3_wasm_config_i).apply(null,arguments)},t._sqlite3_wasm_config_ii=function(){return(t._sqlite3_wasm_config_ii=t.asm.sqlite3_wasm_config_ii).apply(null,arguments)},t._sqlite3_wasm_config_j=function(){return(t._sqlite3_wasm_config_j=t.asm.sqlite3_wasm_config_j).apply(null,arguments)},t._sqlite3_wasm_init_wasmfs=function(){return(t._sqlite3_wasm_init_wasmfs=t.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},t._sqlite3_wasm_test_intptr=function(){return(t._sqlite3_wasm_test_intptr=t.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},t._sqlite3_wasm_test_voidptr=function(){return(t._sqlite3_wasm_test_voidptr=t.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},t._sqlite3_wasm_test_int64_max=function(){return(t._sqlite3_wasm_test_int64_max=t.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},t._sqlite3_wasm_test_int64_min=function(){return(t._sqlite3_wasm_test_int64_min=t.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},t._sqlite3_wasm_test_int64_times2=function(){return(t._sqlite3_wasm_test_int64_times2=t.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},t._sqlite3_wasm_test_int64_minmax=function(){return(t._sqlite3_wasm_test_int64_minmax=t.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},t._sqlite3_wasm_test_int64ptr=function(){return(t._sqlite3_wasm_test_int64ptr=t.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},t._sqlite3_wasm_test_stack_overflow=function(){return(t._sqlite3_wasm_test_stack_overflow=t.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},t._sqlite3_wasm_test_str_hello=function(){return(t._sqlite3_wasm_test_str_hello=t.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)},t._sqlite3_wasm_SQLTester_strglob=function(){return(t._sqlite3_wasm_SQLTester_strglob=t.asm.sqlite3_wasm_SQLTester_strglob).apply(null,arguments)};var Vt=t._malloc=function(){return(Vt=t._malloc=t.asm.malloc).apply(null,arguments)};t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._realloc=function(){return(t._realloc=t.asm.realloc).apply(null,arguments)};var Gt=t._emscripten_builtin_memalign=function(){return(Gt=t._emscripten_builtin_memalign=t.asm.emscripten_builtin_memalign).apply(null,arguments)};t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)},t.wasmMemory=Me;var lt;Ke=function n(){lt||$t(),lt||(Ke=n)};function $t(n){if(je>0||(mn(),je>0))return;function e(){lt||(lt=!0,t.calledRun=!0,!kt&&(hn(),ge(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),gn()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return $t(),t.postRun||(t.postRun=[]),t.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=function e(s=globalThis.sqlite3ApiConfig||e.defaultConfig){if(e.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),e.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>typeof n<"u"?!!n.HEAPU64:!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof r[l]=="function"&&(r[l]=r[l]())});const i=Object.create(null),a=Object.create(null),m=l=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(l)||"Unknown result code #"+l,q=l=>typeof l=="number"&&l===(l|0);class F extends Error{constructor(...c){let u;if(c.length)if(q(c[0]))if(u=c[0],c.length===1)super(m(c[0]));else{const k=m(u);typeof c[1]=="object"?super(k,c[1]):(c[0]=k+":",super(c.join(" ")))}else c.length===2&&typeof c[1]=="object"?super(...c):super(c.join(" "));this.resultCode=u||i.SQLITE_ERROR,this.name="SQLite3Error"}}F.toss=(...l)=>{throw new F(...l)};const B=F.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&B("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const H=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,ee=function l(c){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),c>=l._min&&c<=l._max},x=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,f=function l(c){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),c>=l._min&&c<=l._max},d=l=>l&&l.constructor&&H(l.constructor.BYTES_PER_ELEMENT)?l:!1,y=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,E=l=>l.buffer instanceof y,h=(l,c,u)=>E(l)?l.slice(c,u):l.subarray(c,u),L=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),M=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),z=l=>L(l)||B("Value is not of a supported TypedArray type."),O=new TextDecoder("utf-8"),se=function(l,c,u){return O.decode(h(l,c,u))},_=function(l){return M(l)?se(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(a.isPtr(l)&&(l=a.cstrToJs(l)),l)};class b extends Error{constructor(...c){c.length===2&&typeof c[1]=="object"?super(...c):c.length?super(c.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}b.toss=(...l)=>{throw new b(...l)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,c,u,k,U,te,re,ae,N)=>{},sqlite3_create_function:(l,c,u,k,U,te,re,ae)=>{},sqlite3_create_window_function:(l,c,u,k,U,te,re,ae,N,w)=>{},sqlite3_prepare_v3:(l,c,u,k,U,te)=>{},sqlite3_prepare_v2:(l,c,u,k,U)=>{},sqlite3_exec:(l,c,u,k,U)=>{},sqlite3_randomness:(l,c)=>{}});const S={affirmBindableTypedArray:z,flexibleString:_,bigIntFits32:x,bigIntFits64:ee,bigIntFitsDouble:f,isBindableTypedArray:L,isInt32:H,isSQLableTypedArray:M,isTypedArray:d,typedArrayToString:se,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:E,toss:function(...l){throw new Error(l.join(" "))},toss3:B,typedArrayPart:h,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const c="SQLite format 3";c.length>l.byteLength&&B("Input does not contain an SQLite3 database header.");for(let u=0;u<c.length;++u)c.charCodeAt(u)!==l[u]&&B("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const c=l.byteLength;(c<512||c%512!==0)&&B("Byte array size",c,"is invalid for an SQLite3 db."),S.affirmDbHeader(l)}};Object.assign(a,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||B("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||B("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),a.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),z(l);const c=a.alloc(l.byteLength||1);return a.heapForSize(l.constructor).set(l.byteLength?l:[0],c),c};{const l=r.allocExportName,c=r.deallocExportName,u=r.reallocExportName;for(const k of[l,c,u])a.exports[k]instanceof Function||B("Missing required exports[",k,"] function.");a.alloc=function k(U){return k.impl(U)||b.toss("Failed to allocate",U," bytes.")},a.alloc.impl=a.exports[l],a.realloc=function k(U,te){const re=k.impl(U,te);return te?re||b.toss("Failed to reallocate",te," bytes."):0},a.realloc.impl=a.exports[u],a.dealloc=a.exports[c]}a.compileOptionUsed=function l(c){if(arguments.length){if(Array.isArray(c)){const u={};return c.forEach(k=>{u[k]=i.sqlite3_compileoption_used(k)}),u}else if(typeof c=="object")return Object.keys(c).forEach(u=>{c[u]=i.sqlite3_compileoption_used(u)}),c}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(re,ae){const N=l._rx.exec(re);ae[0]=N?N[1]:re,ae[1]=N?l._rxInt.test(N[2])?+N[2]:N[2]:!0});const u={},k=[0,0];let U=0,te;for(;te=i.sqlite3_compileoption_get(U++);)l._opt(te,k),u[k[0]]=k[1];return l._result=u}return typeof c=="string"?!!i.sqlite3_compileoption_used(c):!1},a.pstack=Object.assign(Object.create(null),{restore:a.exports.sqlite3_wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=a.sizeofIR(l))&&b.toss("Invalid value for pstack.alloc(",arguments[0],")"),a.exports.sqlite3_wasm_pstack_alloc(l)||b.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,c){typeof c=="string"&&!(c=a.sizeofIR(c))&&b.toss("Invalid size value for allocChunks(",arguments[1],")");const u=a.pstack.alloc(l*c),k=[];let U=0,te=0;for(;U<l;++U,te+=c)k.push(u+te);return k},allocPtr:(l=1,c=!0)=>l===1?a.pstack.alloc(c?8:a.ptrSizeof):a.pstack.allocChunks(l,c?8:a.ptrSizeof),call:function(l){const c=a.pstack.pointer;try{return l(g)}finally{a.pstack.restore(c)}}}),Object.defineProperties(a.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_remaining}}),i.sqlite3_randomness=(...l)=>{if(l.length===1&&S.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){const c=l[0];if(c.byteLength===0)return a.exports.sqlite3_randomness(0,0),c;const u=a.pstack.pointer;try{let k=c.byteLength,U=0;const te=a.exports.sqlite3_randomness,re=a.heap8u(),ae=k<512?k:512,N=a.pstack.alloc(ae);do{const w=k>ae?ae:k;te(w,N),c.set(h(re,N,N+w),U),k-=w,U+=w}while(k>0)}catch(k){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",k)}finally{a.pstack.restore(u)}return c}a.exports.sqlite3_randomness(...l)};let R;if(i.sqlite3_wasmfs_opfs_dir=function(){if(R!==void 0)return R;const l=r.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return R="";try{return l&&a.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],l)===0?R=l:R=""}catch{return R=""}},i.sqlite3_wasmfs_filename_is_persistent=function(l){const c=i.sqlite3_wasmfs_opfs_dir();return c&&l?l.startsWith(c+"/"):!1},i.sqlite3_js_db_uses_vfs=function(l,c,u=0){try{const k=i.sqlite3_vfs_find(c);return k?l?k===i.sqlite3_js_db_vfs(l,u)?k:!1:k===i.sqlite3_vfs_find(0)?k:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const l=[];let c=i.sqlite3_vfs_find(0);for(;c;){const u=new i.sqlite3_vfs(c);l.push(a.cstrToJs(u.$zName)),c=u.$pNext,u.dispose()}return l},i.sqlite3_js_db_export=function(l,c=0){l=a.xWrap.testConvertArg("sqlite3*",l),l||B("Invalid sqlite3* argument."),a.bigIntEnabled||B("BigInt64 support is not enabled.");const u=a.scopedAllocPush();let k;try{const U=a.scopedAlloc(8+a.ptrSizeof),te=U+8,re=c?a.isPtr(c)?c:a.scopedAllocCString(""+c):0;let ae=a.exports.sqlite3_wasm_db_serialize(l,re,te,U,0);ae&&B("Database serialization failed with code",g.capi.sqlite3_js_rc_str(ae)),k=a.peekPtr(te);const N=a.peek(U,"i64");return ae=N?a.heap8u().slice(k,k+Number(N)):new Uint8Array,ae}finally{k&&a.exports.sqlite3_free(k),a.scopedAllocPop(u)}},i.sqlite3_js_db_vfs=(l,c=0)=>a.sqlite3_wasm_db_vfs(l,c),i.sqlite3_js_aggregate_context=(l,c)=>i.sqlite3_aggregate_context(l,c)||(c?b.toss("Cannot allocate",c,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(l,c,u){let k;c&&a.isPtr(c)?k=c:c instanceof ArrayBuffer||c instanceof Uint8Array?(k=a.allocFromTypedArray(c),(arguments.length<3||!S.isInt32(u)||u<0)&&(u=c.byteLength)):F.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!S.isInt32(u)||u<0)&&F.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const U=a.sqlite3_wasm_posix_create_file(l,k,u);U&&F.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(U))}finally{a.dealloc(k)}},i.sqlite3_js_vfs_create_file=function(l,c,u,k){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let U;u?(a.isPtr(u)?U=u:u instanceof ArrayBuffer&&(u=new Uint8Array(u)),u instanceof Uint8Array?(U=a.allocFromTypedArray(u),(arguments.length<4||!S.isInt32(k)||k<0)&&(k=u.byteLength)):F.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):U=0,(!S.isInt32(k)||k<0)&&(a.dealloc(U),F.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const te=a.sqlite3_wasm_vfs_create_file(l,c,U,k);te&&F.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(te))}finally{a.dealloc(U)}},i.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;const c=_(v);return c===v?void 0:c},S.isUIThread()){const l=function(c){const u=Object.create(null);return u.prefix="kvvfs-"+c,u.stores=[],(c==="session"||c==="")&&u.stores.push(globalThis.sessionStorage),(c==="local"||c==="")&&u.stores.push(globalThis.localStorage),u};i.sqlite3_js_kvvfs_clear=function(c=""){let u=0;const k=l(c);return k.stores.forEach(U=>{const te=[];let re;for(re=0;re<U.length;++re){const ae=U.key(re);ae.startsWith(k.prefix)&&te.push(ae)}te.forEach(ae=>U.removeItem(ae)),u+=te.length}),u},i.sqlite3_js_kvvfs_size=function(c=""){let u=0;const k=l(c);return k.stores.forEach(U=>{let te;for(te=0;te<U.length;++te){const re=U.key(te);re.startsWith(k.prefix)&&(u+=re.length,u+=U.getItem(re).length)}}),u*2}}i.sqlite3_db_config=function(l,c,...u){switch(this.s||(this.s=a.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=a.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=a.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),c){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(l,c,u[0],u[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(l,c,u[0],u[1],u[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(l,c,u[0]);default:return i.SQLITE_MISUSE}}.bind(Object.create(null)),i.sqlite3_value_to_js=function(l,c=!0){let u;const k=i.sqlite3_value_type(l);switch(k){case i.SQLITE_INTEGER:a.bigIntEnabled?(u=i.sqlite3_value_int64(l),S.bigIntFitsDouble(u)&&(u=Number(u))):u=i.sqlite3_value_double(l);break;case i.SQLITE_FLOAT:u=i.sqlite3_value_double(l);break;case i.SQLITE_TEXT:u=i.sqlite3_value_text(l);break;case i.SQLITE_BLOB:{const U=i.sqlite3_value_bytes(l),te=i.sqlite3_value_blob(l);U&&!te&&g.WasmAllocError.toss("Cannot allocate memory for blob argument of",U,"byte(s)"),u=U?a.heap8u().slice(te,te+Number(U)):null;break}case i.SQLITE_NULL:u=null;break;default:c&&B(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",k),u=void 0}return u},i.sqlite3_values_to_js=function(l,c,u=!0){let k;const U=[];for(k=0;k<l;++k)U.push(i.sqlite3_value_to_js(a.peekPtr(c+a.ptrSizeof*k),u));return U},i.sqlite3_result_error_js=function(l,c){c instanceof b?i.sqlite3_result_error_nomem(l):i.sqlite3_result_error(l,""+c,-1)},i.sqlite3_result_js=function(l,c){if(c instanceof Error){i.sqlite3_result_error_js(l,c);return}try{switch(typeof c){case"undefined":break;case"boolean":i.sqlite3_result_int(l,c?1:0);break;case"bigint":S.bigIntFits32(c)?i.sqlite3_result_int(l,Number(c)):S.bigIntFitsDouble(c)?i.sqlite3_result_double(l,Number(c)):a.bigIntEnabled?S.bigIntFits64(c)?i.sqlite3_result_int64(l,c):B("BigInt value",c.toString(),"is too BigInt for int64."):B("BigInt value",c.toString(),"is too BigInt.");break;case"number":{let u;S.isInt32(c)?u=i.sqlite3_result_int:a.bigIntEnabled&&Number.isInteger(c)&&S.bigIntFits64(BigInt(c))?u=i.sqlite3_result_int64:u=i.sqlite3_result_double,u(l,c);break}case"string":{const[u,k]=a.allocCString(c,!0);i.sqlite3_result_text(l,u,k,i.SQLITE_WASM_DEALLOC);break}case"object":if(c===null){i.sqlite3_result_null(l);break}else if(S.isBindableTypedArray(c)){const u=a.allocFromTypedArray(c);i.sqlite3_result_blob(l,u,c.byteLength,i.SQLITE_WASM_DEALLOC);break}default:B("Don't not how to handle this UDF result value:",typeof c,c)}}catch(u){i.sqlite3_result_error_js(l,u)}},i.sqlite3_column_js=function(l,c,u=!0){const k=i.sqlite3_column_value(l,c);return k===0?void 0:i.sqlite3_value_to_js(k,u)};const p=function(l,c,u){u=i[u],this.ptr?a.pokePtr(this.ptr,0):this.ptr=a.allocPtr();const k=u(l,c,this.ptr);if(k)return F.toss(k,arguments[2]+"() failed with code "+k);const U=a.peekPtr(this.ptr);return U?i.sqlite3_value_to_js(U,!0):void 0}.bind(Object.create(null));i.sqlite3_preupdate_new_js=(l,c)=>p(l,c,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(l,c)=>p(l,c,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(l,c)=>p(l,c,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(l,c)=>p(l,c,"sqlite3changeset_old");const g={WasmAllocError:b,SQLite3Error:F,capi:i,util:S,wasm:a,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let c=e.initializersAsync;delete e.initializersAsync;const u=async()=>(g.__isUnderTest||(delete g.util,delete g.StructBinder),g),k=te=>{throw r.error("an async sqlite3 initializer failed:",te),te};if(!c||!c.length)return l.isReady=u().catch(k);c=c.map(te=>te instanceof Function?async re=>te(g):te),c.push(u);let U=Promise.resolve(g);for(;c.length;)U=U.then(c.shift());return l.isReady=U.catch(k)},scriptInfo:void 0};try{e.initializers.forEach(l=>{l(g)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete e.initializers,e.sqlite3=g,g},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){e.bigIntEnabled===void 0&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const s=(..._)=>{throw new Error(_.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const r=e.pointerIR||"i32",i=e.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),a=Object.create(null);a.heapSize=0,a.memory=null,a.freeFuncIndexes=[],a.scopedAlloc=[],a.utf8Decoder=new TextDecoder,a.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=_=>{switch(_){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+_).endsWith("*")?i:void 0}};const m=function(){if(!a.memory)a.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;else if(a.heapSize===a.memory.buffer.byteLength)return a;const _=a.memory.buffer;return a.HEAP8=new Int8Array(_),a.HEAP8U=new Uint8Array(_),a.HEAP16=new Int16Array(_),a.HEAP16U=new Uint16Array(_),a.HEAP32=new Int32Array(_),a.HEAP32U=new Uint32Array(_),e.bigIntEnabled&&(a.HEAP64=new BigInt64Array(_),a.HEAP64U=new BigUint64Array(_)),a.HEAP32F=new Float32Array(_),a.HEAP64F=new Float64Array(_),a.heapSize=_.byteLength,a};e.heap8=()=>m().HEAP8,e.heap8u=()=>m().HEAP8U,e.heap16=()=>m().HEAP16,e.heap16u=()=>m().HEAP16U,e.heap32=()=>m().HEAP32,e.heap32u=()=>m().HEAP32U,e.heapForSize=function(_,b=!0){const S=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:m();switch(_){case Int8Array:return S.HEAP8;case Uint8Array:return S.HEAP8U;case Int16Array:return S.HEAP16;case Uint16Array:return S.HEAP16U;case Int32Array:return S.HEAP32;case Uint32Array:return S.HEAP32U;case 8:return b?S.HEAP8U:S.HEAP8;case 16:return b?S.HEAP16U:S.HEAP16;case 32:return b?S.HEAP32U:S.HEAP32;case 64:if(S.HEAP64)return b?S.HEAP64U:S.HEAP64;break;default:if(e.bigIntEnabled){if(_===globalThis.BigUint64Array)return S.HEAP64U;if(_===globalThis.BigInt64Array)return S.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(_){const b=e.functionTable();return _<b.length?b.get(_):void 0},e.jsFuncToWasm=function _(b,S){if(_._||(_._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(g,l,c){c<128?g[l](c):g[l](c%128|128,c>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(g){const l=_._.rxJSig.exec(g);return l?l[2]:g.substr(1)},letterType:g=>_._.sigTypes[g]||s("Invalid signature letter:",g),pushSigType:(g,l)=>g.push(_._.typeCodes[_._.letterType(l)])}),typeof b=="string"){const g=S;S=b,b=g}const R=_._.sigParams(S),p=[1,96];_._.uleb128Encode(p,"push",R.length);for(const g of R)_._.pushSigType(p,g);return S[0]==="v"?p.push(0):(p.push(1),_._.pushSigType(p,S[0])),_._.uleb128Encode(p,"unshift",p.length),p.unshift(0,97,115,109,1,0,0,0,1),p.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(p)),{e:{f:b}}).exports.f};const q=function(b,S,R){if(R&&!a.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof b=="string"){const c=S;S=b,b=c}(typeof S!="string"||!(b instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const p=e.functionTable(),g=p.length;let l;for(;a.freeFuncIndexes.length&&(l=a.freeFuncIndexes.pop(),p.get(l));){l=null;continue}l||(l=g,p.grow(1));try{return p.set(l,b),R&&a.scopedAlloc[a.scopedAlloc.length-1].push(l),l}catch(c){if(!(c instanceof TypeError))throw l===g&&a.freeFuncIndexes.push(g),c}try{const c=e.jsFuncToWasm(b,S);p.set(l,c),R&&a.scopedAlloc[a.scopedAlloc.length-1].push(l)}catch(c){throw l===g&&a.freeFuncIndexes.push(g),c}return l};e.installFunction=(_,b)=>q(_,b,!1),e.scopedInstallFunction=(_,b)=>q(_,b,!0),e.uninstallFunction=function(_){if(!_&&_!==0)return;const b=a.freeFuncIndexes,S=e.functionTable();b.push(_);const R=S.get(_);return S.set(_,null),R},e.peek=function(b,S="i8"){S.endsWith("*")&&(S=r);const R=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:m(),p=Array.isArray(b)?[]:void 0;let g;do{switch(p&&(b=arguments[0].shift()),S){case"i1":case"i8":g=R.HEAP8[b>>0];break;case"i16":g=R.HEAP16[b>>1];break;case"i32":g=R.HEAP32[b>>2];break;case"float":case"f32":g=R.HEAP32F[b>>2];break;case"double":case"f64":g=Number(R.HEAP64F[b>>3]);break;case"i64":if(e.bigIntEnabled){g=BigInt(R.HEAP64[b>>3]);break}default:s("Invalid type for peek():",S)}p&&p.push(g)}while(p&&arguments[0].length);return p||g},e.poke=function(_,b,S="i8"){S.endsWith("*")&&(S=r);const R=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:m();for(const p of Array.isArray(_)?_:[_])switch(S){case"i1":case"i8":R.HEAP8[p>>0]=b;continue;case"i16":R.HEAP16[p>>1]=b;continue;case"i32":R.HEAP32[p>>2]=b;continue;case"float":case"f32":R.HEAP32F[p>>2]=b;continue;case"double":case"f64":R.HEAP64F[p>>3]=b;continue;case"i64":if(R.HEAP64){R.HEAP64[p>>3]=BigInt(b);continue}default:s("Invalid type for poke(): "+S)}return this},e.peekPtr=(..._)=>e.peek(_.length===1?_[0]:_,r),e.pokePtr=(_,b=0)=>e.poke(_,b,r),e.peek8=(..._)=>e.peek(_.length===1?_[0]:_,"i8"),e.poke8=(_,b)=>e.poke(_,b,"i8"),e.peek16=(..._)=>e.peek(_.length===1?_[0]:_,"i16"),e.poke16=(_,b)=>e.poke(_,b,"i16"),e.peek32=(..._)=>e.peek(_.length===1?_[0]:_,"i32"),e.poke32=(_,b)=>e.poke(_,b,"i32"),e.peek64=(..._)=>e.peek(_.length===1?_[0]:_,"i64"),e.poke64=(_,b)=>e.poke(_,b,"i64"),e.peek32f=(..._)=>e.peek(_.length===1?_[0]:_,"f32"),e.poke32f=(_,b)=>e.poke(_,b,"f32"),e.peek64f=(..._)=>e.peek(_.length===1?_[0]:_,"f64"),e.poke64f=(_,b)=>e.poke(_,b,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=_=>typeof _=="number"&&_===(_|0)&&_>=0,e.isPtr=e.isPtr32,e.cstrlen=function(_){if(!_||!e.isPtr(_))return null;const b=m().HEAP8U;let S=_;for(;b[S]!==0;++S);return S-_};const F=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,B=function(_,b,S){return a.utf8Decoder.decode(_.buffer instanceof F?_.slice(b,S):_.subarray(b,S))};e.cstrToJs=function(_){const b=e.cstrlen(_);return b?B(m().HEAP8U,_,_+b):b===null?b:""},e.jstrlen=function(_){if(typeof _!="string")return null;const b=_.length;let S=0;for(let R=0;R<b;++R){let p=_.charCodeAt(R);p>=55296&&p<=57343&&(p=65536+((p&1023)<<10)|_.charCodeAt(++R)&1023),p<=127?++S:p<=2047?S+=2:p<=65535?S+=3:S+=4}return S},e.jstrcpy=function(_,b,S=0,R=-1,p=!0){if((!b||!(b instanceof Int8Array)&&!(b instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),R<0&&(R=b.length-S),!(R>0)||!(S>=0))return 0;let g=0,l=_.length;const c=S,u=S+R-(p?1:0);for(;g<l&&S<u;++g){let k=_.charCodeAt(g);if(k>=55296&&k<=57343&&(k=65536+((k&1023)<<10)|_.charCodeAt(++g)&1023),k<=127){if(S>=u)break;b[S++]=k}else if(k<=2047){if(S+1>=u)break;b[S++]=192|k>>6,b[S++]=128|k&63}else if(k<=65535){if(S+2>=u)break;b[S++]=224|k>>12,b[S++]=128|k>>6&63,b[S++]=128|k&63}else{if(S+3>=u)break;b[S++]=240|k>>18,b[S++]=128|k>>12&63,b[S++]=128|k>>6&63,b[S++]=128|k&63}}return p&&(b[S++]=0),S-c},e.cstrncpy=function(_,b,S){if((!_||!b)&&s("cstrncpy() does not accept NULL strings."),S<0)S=e.cstrlen(strPtr)+1;else if(!(S>0))return 0;const R=e.heap8u();let p=0,g;for(;p<S&&(g=R[b+p]);++p)R[_+p]=g;return p<S&&(R[_+p++]=0),p},e.jstrToUintArray=(_,b=!1)=>a.utf8Encoder.encode(b?_+"\0":_);const H=(_,b)=>{(!(_.alloc instanceof Function)||!(_.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",b+"().")},ee=function(_,b,S,R){if(H(e,R),typeof _!="string")return null;{const p=a.utf8Encoder.encode(_),g=S(p.length+1),l=m().HEAP8U;return l.set(p,g),l[g+p.length]=0,b?[g,p.length]:g}};e.allocCString=(_,b=!1)=>ee(_,b,e.alloc,"allocCString()"),e.scopedAllocPush=function(){H(e,"scopedAllocPush");const _=[];return a.scopedAlloc.push(_),_},e.scopedAllocPop=function(_){H(e,"scopedAllocPop");const b=arguments.length?a.scopedAlloc.indexOf(_):a.scopedAlloc.length-1;b<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(_=a.scopedAlloc[b]),a.scopedAlloc.splice(b,1);for(let S;S=_.pop();)e.functionEntry(S)?e.uninstallFunction(S):e.dealloc(S)},e.scopedAlloc=function(_){a.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const b=e.alloc(_);return a.scopedAlloc[a.scopedAlloc.length-1].push(b),b},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>a.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),e.scopedAllocCString=(_,b=!1)=>ee(_,b,e.scopedAlloc,"scopedAllocCString()");const x=function(_,b){const S=e[_?"scopedAlloc":"alloc"]((b.length+1)*e.ptrSizeof);let R=0;return b.forEach(p=>{e.pokePtr(S+e.ptrSizeof*R++,e[_?"scopedAllocCString":"allocCString"](""+p))}),e.pokePtr(S+e.ptrSizeof*R,0),S};e.scopedAllocMainArgv=_=>x(!0,_),e.allocMainArgv=_=>x(!1,_),e.cArgvToJs=(_,b)=>{const S=[];for(let R=0;R<_;++R){const p=e.peekPtr(b+e.ptrSizeof*R);S.push(p?e.cstrToJs(p):null)}return S},e.scopedAllocCall=function(_){e.scopedAllocPush();try{return _()}finally{e.scopedAllocPop()}};const f=function(_,b,S){H(e,S);const R=b?"i64":r;let p=e[S](_*(b?8:i));if(e.poke(p,0,R),_===1)return p;const g=[p];for(let l=1;l<_;++l)p+=b?8:i,g[l]=p,e.poke(p,0,R);return g};e.allocPtr=(_=1,b=!0)=>f(_,b,"alloc"),e.scopedAllocPtr=(_=1,b=!0)=>f(_,b,"scopedAlloc"),e.xGet=function(_){return e.exports[_]||s("Cannot find exported symbol:",_)};const d=(_,b)=>s(_+"() requires",b,"argument(s).");e.xCall=function(_,...b){const S=e.xGet(_);return S instanceof Function||s("Exported symbol",_,"is not a function."),S.length!==b.length&&d(_,S.length),arguments.length===2&&Array.isArray(arguments[1])?S.apply(null,arguments[1]):S.apply(null,b)},a.xWrap=Object.create(null),a.xWrap.convert=Object.create(null),a.xWrap.convert.arg=new Map,a.xWrap.convert.result=new Map;const y=a.xWrap.convert.arg,E=a.xWrap.convert.result;e.bigIntEnabled&&y.set("i64",_=>BigInt(_));const h=r==="i32"?_=>_|0:_=>BigInt(_)|BigInt(0);y.set("i32",h).set("i16",_=>(_|0)&65535).set("i8",_=>(_|0)&255).set("f32",_=>Number(_).valueOf()).set("float",y.get("f32")).set("f64",y.get("f32")).set("double",y.get("f64")).set("int",y.get("i32")).set("null",_=>_).set(null,y.get("null")).set("**",h).set("*",h),E.set("*",h).set("pointer",h).set("number",_=>Number(_)).set("void",_=>{}).set("null",_=>_).set(null,E.get("null"));{const _=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&_.push("i64");const b=y.get(r);for(const S of _)y.set(S+"*",b),E.set(S+"*",b),E.set(S,y.get(S)||s("Missing arg converter:",S))}const L=function(_){return typeof _=="string"?e.scopedAllocCString(_):_?h(_):null};y.set("string",L).set("utf8",L).set("pointer",L),E.set("string",_=>e.cstrToJs(_)).set("utf8",E.get("string")).set("string:dealloc",_=>{try{return _?e.cstrToJs(_):null}finally{e.dealloc(_)}}).set("utf8:dealloc",E.get("string:dealloc")).set("json",_=>JSON.parse(e.cstrToJs(_))).set("json:dealloc",_=>{try{return _?JSON.parse(e.cstrToJs(_)):null}finally{e.dealloc(_)}});const M=class{constructor(_){this.name=_.name||"unnamed adapter"}convertArg(_,b,S){s("AbstractArgAdapter must be subclassed.")}};y.FuncPtrAdapter=class Ce extends M{constructor(b){super(b),y.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",b),this.name=b.name||"unnamed",this.signature=b.signature,b.contextKey instanceof Function&&(this.contextKey=b.contextKey,b.bindScope||(b.bindScope="context")),this.bindScope=b.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Ce.bindScopes.indexOf(b.bindScope)<0&&s("Invalid options.bindScope ("+b.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Ce.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=b.callProxy instanceof Function?b.callProxy:void 0}contextKey(b,S){return this}contextMap(b){const S=this.__cmap||(this.__cmap=new Map);let R=S.get(b);return R===void 0&&S.set(b,R=[]),R}convertArg(b,S,R){let p=this.singleton;if(!p&&this.isContext&&(p=this.contextMap(this.contextKey(S,R))),p&&p[0]===b)return p[1];if(b instanceof Function){this.callProxy&&(b=this.callProxy(b));const g=q(b,this.signature,this.isTransient);if(Ce.debugFuncInstall&&Ce.debugOut("FuncPtrAdapter installed",this,this.contextKey(S,R),"@"+g,b),p){if(p[1]){Ce.debugFuncInstall&&Ce.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(S,R),"@"+p[1],b);try{a.scopedAlloc[a.scopedAlloc.length-1].push(p[1])}catch{}}p[0]=b,p[1]=g}return g}else if(e.isPtr(b)||b===null||b===void 0){if(p&&p[1]&&p[1]!==b){Ce.debugFuncInstall&&Ce.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(S,R),"@"+p[1],b);try{a.scopedAlloc[a.scopedAlloc.length-1].push(p[1])}catch{}p[0]=p[1]=b|0}return b||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},y.FuncPtrAdapter.warnOnUse=!1,y.FuncPtrAdapter.debugFuncInstall=!1,y.FuncPtrAdapter.debugOut=console.debug.bind(console),y.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const z=_=>y.get(_)||s("Argument adapter not found:",_),O=_=>E.get(_)||s("Result adapter not found:",_);a.xWrap.convertArg=(_,...b)=>z(_)(...b),a.xWrap.convertArgNoCheck=(_,...b)=>y.get(_)(...b),a.xWrap.convertResult=(_,b)=>_===null?b:_?O(_)(b):void 0,a.xWrap.convertResultNoCheck=(_,b)=>_===null?b:_?E.get(_)(b):void 0,e.xWrap=function(_,b,...S){arguments.length===3&&Array.isArray(arguments[2])&&(S=arguments[2]),e.isPtr(_)&&(_=e.functionEntry(_)||s("Function pointer not found in WASM function table."));const R=_ instanceof Function,p=R?_:e.xGet(_);if(R&&(_=p.name||"unnamed function"),S.length!==p.length&&d(_,p.length),b===null&&p.length===0)return p;b!=null&&O(b);for(const l of S)l instanceof M?y.set(l,(...c)=>l.convertArg(...c)):z(l);const g=a.xWrap;return p.length===0?(...l)=>l.length?d(_,p.length):g.convertResult(b,p.call(null)):function(...l){l.length!==p.length&&d(_,p.length);const c=e.scopedAllocPush();try{for(const u in l)l[u]=g.convertArgNoCheck(S[u],l[u],l,u);return g.convertResultNoCheck(b,p.apply(null,l))}finally{e.scopedAllocPop(c)}}};const se=function(_,b,S,R,p,g){if(typeof S=="string"){if(b===1)return g.get(S);if(b===2){if(R)R instanceof Function||s(p,"requires a function argument.");else return delete g.get(S),_;return g.set(S,R),_}}s("Invalid arguments to",p)};return e.xWrap.resultAdapter=function _(b,S){return se(_,arguments.length,b,S,"resultAdapter()",E)},e.xWrap.argAdapter=function _(b,S){return se(_,arguments.length,b,S,"argAdapter()",y)},e.xWrap.FuncPtrAdapter=y.FuncPtrAdapter,e.xCallWrapped=function(_,b,S,...R){return Array.isArray(arguments[3])&&(R=arguments[3]),e.xWrap(_,b,S||[]).apply(null,R||[])},e.xWrap.testConvertArg=a.xWrap.convertArg,e.xWrap.testConvertResult=a.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=function(e){const s=()=>fetch(e.uri,{credentials:"same-origin"}),r=this,i=function(m){if(e.wasmUtilTarget){const q=(...B)=>{throw new Error(B.join(" "))},F=e.wasmUtilTarget;if(F.module=m.module,F.instance=m.instance,F.instance.exports.memory||(F.memory=e.imports&&e.imports.env&&e.imports.env.memory||q("Missing 'memory' object!")),!F.alloc&&m.instance.exports.malloc){const B=m.instance.exports;F.alloc=function(H){return B.malloc(H)||q("Allocation of",H,"bytes failed.")},F.dealloc=function(H){B.free(H)}}r(F)}return e.onload&&e.onload(m,e),m};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),e.imports||{}).then(i)}:function(){return s().then(q=>q.arrayBuffer()).then(q=>WebAssembly.instantiate(q,e.imports||{})).then(i)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(s){const r=(...T)=>{throw new Error(T.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(T){s[T]instanceof Function||r("Config option '"+T+"' must be a function.")});const i=e,a=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),m=s.alloc,q=s.dealloc,F=s.log||console.log.bind(console),B=s.memberPrefix||"",H=s.memberSuffix||"",ee=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,x=globalThis.BigInt,f=globalThis.BigInt64Array,d=s.ptrSizeof||4,y=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(T=null){T&&T.__flags&&(T=T.__flags);const Q=function G(J){return arguments.length===0?G.__flags:(J<0?(delete G.__flags.getter,delete G.__flags.setter,delete G.__flags.alloc,delete G.__flags.dealloc):(G.__flags.getter=(1&J)!==0,G.__flags.setter=(2&J)!==0,G.__flags.alloc=(4&J)!==0,G.__flags.dealloc=(8&J)!==0),G._flags)};return Object.defineProperty(Q,"__flags",{iterable:!1,writable:!1,value:Object.create(T)}),T||Q(0),Q},i.debugFlags=i.__makeDebugFlags());const E=function(){const T=new ArrayBuffer(2);return new DataView(T).setInt16(0,256,!0),new Int16Array(T)[0]===256}(),h=T=>T[1]==="(",L=T=>T==="P",M=T=>h(T)?"p":T[0],z=function(T){switch(M(T)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return y;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",T)},O=f?()=>!0:()=>r("BigInt64Array is not available."),se=function(T){switch(M(T)){case"p":case"P":case"s":{switch(d){case 4:return"getInt32";case 8:return O()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return O()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",T)},_=function(T){switch(M(T)){case"p":case"P":case"s":{switch(d){case 4:return"setInt32";case 8:return O()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return O()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",T)},b=function(T){switch(M(T)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return O()&&x;case"p":case"P":case"s":switch(d){case 4:return Number;case 8:return O()&&x}break}r("Unhandled DataView set wrapper for signature:",T)},S=(T,Q)=>T+"::"+Q,R=function(T,Q){return()=>r(S(T,Q),"is read-only.")},p=new WeakMap,g="(pointer-is-external)",l=function(T,Q,G){if(G||(G=p.get(Q)),G){if(p.delete(Q),Array.isArray(Q.ondispose)){let J;for(;J=Q.ondispose.shift();)try{J instanceof Function?J.call(Q):J instanceof ne?J.dispose():typeof J=="number"&&q(J)}catch(fe){console.warn("ondispose() for",T.structName,"@",G,"threw. NOT propagating it.",fe)}}else if(Q.ondispose instanceof Function)try{Q.ondispose()}catch(J){console.warn("ondispose() for",T.structName,"@",G,"threw. NOT propagating it.",J)}delete Q.ondispose,T.debugFlags.__flags.dealloc&&F("debug.dealloc:",Q[g]?"EXTERNAL":"",T.structName,"instance:",T.structInfo.sizeof,"bytes @"+G),Q[g]||q(G)}},c=T=>({configurable:!1,writable:!1,iterable:!1,value:T}),u=function(T,Q,G){let J=!G;G?Object.defineProperty(Q,g,c(G)):(G=m(T.structInfo.sizeof),G||r("Allocation of",T.structName,"structure failed."));try{T.debugFlags.__flags.alloc&&F("debug.alloc:",J?"":"EXTERNAL",T.structName,"instance:",T.structInfo.sizeof,"bytes @"+G),J&&a().fill(0,G,G+T.structInfo.sizeof),p.set(Q,G)}catch(fe){throw l(T,Q,G),fe}},k=function(){const T=this.pointer;return T?new Uint8Array(a().slice(T,T+this.structInfo.sizeof)):null},te=c(T=>B+T+H),re=function(T,Q,G=!0){let J=T.members[Q];if(!J&&(B||H)){for(const fe of Object.values(T.members))if(fe.key===Q){J=fe;break}!J&&G&&r(S(T.name,Q),"is not a mapped struct member.")}return J},ae=function T(Q,G,J=!1){T._||(T._=qe=>qe.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const fe=re(Q.structInfo,G,!0);return J?T._(fe.signature):fe.signature},N={configurable:!1,enumerable:!1,get:function(){return p.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},w=c(function(){const T=[];for(const Q of Object.keys(this.structInfo.members))T.push(this.memberKey(Q));return T}),I=new TextDecoder("utf-8"),D=new TextEncoder,W=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Y=function(T,Q,G){return I.decode(T.buffer instanceof W?T.slice(Q,G):T.subarray(Q,G))},ie=function(T,Q,G=!1){const J=re(T.structInfo,Q,G);return J&&J.signature.length===1&&J.signature[0]==="s"?J:!1},A=function(T){T.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(T))},P=function(Q,G){const J=re(Q.structInfo,G,!0);A(J);const fe=Q[J.key];if(!fe)return null;let qe=fe;const ye=a();for(;ye[qe]!==0;++qe);return fe===qe?"":Y(ye,fe,qe)},j=function(T,...Q){T.ondispose?Array.isArray(T.ondispose)||(T.ondispose=[T.ondispose]):T.ondispose=[],T.ondispose.push(...Q)},K=function(T){const Q=D.encode(T),G=m(Q.length+1);G||r("Allocation error while duplicating string:",T);const J=a();return J.set(Q,G),J[G+Q.length]=0,G},$=function(T,Q,G){const J=re(T.structInfo,Q,!0);A(J);const fe=K(G);return T[J.key]=fe,j(T,fe),T},ne=function(Q,G){arguments[2]!==c&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:c(Q),structInfo:c(G)})};ne.prototype=Object.create(null,{dispose:c(function(){l(this.constructor,this)}),lookupMember:c(function(T,Q=!0){return re(this.structInfo,T,Q)}),memberToJsString:c(function(T){return P(this,T)}),memberIsString:c(function(T,Q=!0){return ie(this,T,Q)}),memberKey:te,memberKeys:w,memberSignature:c(function(T,Q=!1){return ae(this,T,Q)}),memoryDump:c(k),pointer:N,setMemberCString:c(function(T,Q){return $(this,T,Q)})}),Object.assign(ne.prototype,{addOnDispose:function(...T){return j(this,...T),this}}),Object.defineProperties(ne,{allocCString:c(K),isA:c(T=>T instanceof ne),hasExternalPointer:c(T=>T instanceof ne&&!!T[g]),memberKey:te});const ue=T=>Number.isFinite(T)||T instanceof(x||Number),X=function T(Q,G,J){if(!T._){T._={getters:{},setters:{},sw:{}};const Te=["i","c","C","p","P","s","f","d","v()"];ee&&Te.push("j"),Te.forEach(function(Le){T._.getters[Le]=se(Le),T._.setters[Le]=_(Le),T._.sw[Le]=b(Le)});const wr=/^[ipPsjfdcC]$/,Er=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;T.sigCheck=function(Le,vr,Kt,bt){Object.prototype.hasOwnProperty.call(Le,Kt)&&r(Le.structName,"already has a property named",Kt+"."),wr.test(bt)||Er.test(bt)||r("Malformed signature for",S(Le.structName,vr)+":",bt)}}const fe=Q.memberKey(G);T.sigCheck(Q.prototype,G,fe,J.signature),J.key=fe,J.name=G;const qe=M(J.signature),ye=S(Q.prototype.structName,fe),be=Q.prototype.debugFlags.__flags,He=Object.create(null);He.configurable=!1,He.enumerable=!1,He.get=function(){be.getter&&F("debug.getter:",T._.getters[qe],"for",z(qe),ye,"@",this.pointer,"+",J.offset,"sz",J.sizeof);let Te=new DataView(a().buffer,this.pointer+J.offset,J.sizeof)[T._.getters[qe]](0,E);return be.getter&&F("debug.getter:",ye,"result =",Te),Te},J.readOnly?He.set=R(Q.prototype.structName,fe):He.set=function(Te){if(be.setter&&F("debug.setter:",T._.setters[qe],"for",z(qe),ye,"@",this.pointer,"+",J.offset,"sz",J.sizeof,Te),this.pointer||r("Cannot set struct property on disposed instance."),Te===null)Te=0;else for(;!ue(Te);){if(L(J.signature)&&Te instanceof ne){Te=Te.pointer||0,be.setter&&F("debug.setter:",ye,"resolved to",Te);break}r("Invalid value for pointer-type",ye+".")}new DataView(a().buffer,this.pointer+J.offset,J.sizeof)[T._.setters[qe]](0,T._.sw[qe](Te),E)},Object.defineProperty(Q.prototype,fe,He)},xe=function T(Q,G){arguments.length===1?(G=Q,Q=G.name):G.name||(G.name=Q),Q||r("Struct name is required.");let J=!1;Object.keys(G.members).forEach(ye=>{const be=G.members[ye];be.sizeof?be.sizeof===1?be.signature==="c"||be.signature==="C"||r("Unexpected sizeof==1 member",S(G.name,ye),"with signature",be.signature):(be.sizeof%4!==0&&(console.warn("Invalid struct member description =",be,"from",G),r(Q,"member",ye,"sizeof is not aligned. sizeof="+be.sizeof)),be.offset%4!==0&&(console.warn("Invalid struct member description =",be,"from",G),r(Q,"member",ye,"offset is not aligned. offset="+be.offset))):r(Q,"member",ye,"is missing sizeof."),(!J||J.offset<be.offset)&&(J=be)}),J?G.sizeof<J.offset+J.sizeof&&r("Invalid struct config:",Q,"max member offset ("+J.offset+") ","extends past end of struct (sizeof="+G.sizeof+")."):r("No member property descriptions found.");const fe=c(i.__makeDebugFlags(T.debugFlags)),qe=function ye(be){this instanceof ye?arguments.length?((be!==(be|0)||be<=0)&&r("Invalid pointer value for",Q,"constructor."),u(ye,this,be)):u(ye,this):r("The",Q,"constructor may only be called via 'new'.")};return Object.defineProperties(qe,{debugFlags:fe,isA:c(ye=>ye instanceof qe),memberKey:te,memberKeys:w,methodInfoForKey:c(function(ye){}),structInfo:c(G),structName:c(Q)}),qe.prototype=new ne(Q,G,c),Object.defineProperties(qe.prototype,{debugFlags:fe,constructor:c(qe)}),Object.keys(G.members).forEach(ye=>X(qe,ye,G.members[ye])),qe};return xe.StructType=ne,xe.config=s,xe.allocCString=K,xe.debugFlags||(xe.debugFlags=i.__makeDebugFlags(i.debugFlags)),xe},globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(...x)=>{throw new Error(x.join(" "))};e.SQLite3Error.toss;const r=e.capi,i=e.wasm,a=e.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(x,f)=>x[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:x=>x[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:x=>{let f;return(d,y,E,h)=>{try{const L=i.cArgvToJs(y,E);return f||(f=i.cArgvToJs(y,h)),x(L,f)|0}catch(L){return L.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(x,f)=>x[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:x=>x[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(x,f)=>x[0],callProxy:x=>(f,d,y,E,h,L)=>{try{return y=y&&i.cstrToJs(y),E=E&&i.cstrToJs(E),h=h&&i.cstrToJs(h),L=L&&i.cstrToJs(L),x(f,d,y,E,h,L)||0}catch(M){return M.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(x,f)=>x[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(x,f)=>x[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.exports.sqlite3_activate_see instanceof Function&&i.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:x=>x[0],callProxy:x=>(f,d,y,E,h,L,M)=>{x(f,d,y,i.cstrToJs(E),i.cstrToJs(h),L,M)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:x=>x[0],callProxy:x=>(f,d,y,E,h)=>{x(f,d,i.cstrToJs(y),i.cstrToJs(E),h)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const x={signature:"i(ps)",callProxy:f=>(d,y)=>{try{return f(d,i.cstrToJs(y))|0}catch(E){return E.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...x,contextKey:(f,d)=>f[0]}),"*"]])}i.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],e.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const x=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",h=>x(a.flexibleString(h))),i.xWrap.argAdapter("string:static",function(h){return i.isPtr(h)?h:(h=""+h,this[h]||(this[h]=i.allocCString(h)))}.bind(Object.create(null)));const f=i.xWrap.argAdapter("*"),d=function(){};i.xWrap.argAdapter("sqlite3_filename",f)("sqlite3_context*",f)("sqlite3_value*",f)("void*",f)("sqlite3_changegroup*",f)("sqlite3_changeset_iter*",f)("sqlite3_session*",f)("sqlite3_stmt*",h=>f(h instanceof(e?.oo1?.Stmt||d)?h.pointer:h))("sqlite3*",h=>f(h instanceof(e?.oo1?.DB||d)?h.pointer:h))("sqlite3_index_info*",h=>f(h instanceof(r.sqlite3_index_info||d)?h.pointer:h))("sqlite3_module*",h=>f(h instanceof(r.sqlite3_module||d)?h.pointer:h))("sqlite3_vfs*",h=>typeof h=="string"?r.sqlite3_vfs_find(h)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",h):f(h instanceof(r.sqlite3_vfs||d)?h.pointer:h));const y=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",y)("sqlite3_context*",y)("sqlite3_stmt*",y)("sqlite3_value*",y)("sqlite3_vfs*",y)("void*",y),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const h of i.bindingSignatures)r[h[0]]=i.xWrap.apply(null,h);for(const h of i.bindingSignatures.wasm)i[h[0]]=i.xWrap.apply(null,h);const E=function(h){return()=>s(h+"() is unavailable due to lack","of BigInt support in this build.")};for(const h of i.bindingSignatures.int64)r[h[0]]=i.bigIntEnabled?i.xWrap.apply(null,h):E(h[0]);if(delete i.bindingSignatures,i.exports.sqlite3_wasm_db_error){const h=i.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");a.sqlite3_wasm_db_error=function(L,M,z){return M instanceof e.WasmAllocError?(M=r.SQLITE_NOMEM,z=0):M instanceof Error&&(z=z||""+M,M=M.resultCode||r.SQLITE_ERROR),L?h(L,M,z):M}}else a.sqlite3_wasm_db_error=function(h,L,M){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),L}}{const x=i.xCall("sqlite3_wasm_enum_json");x||s("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(x));const f=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&f.push("serialize","session","vtab");for(const E of f)for(const h of Object.entries(i.ctype[E]))r[h[0]]=h[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const d=Object.create(null);for(const E of["resultCodes"])for(const h of Object.entries(i.ctype[E]))d[h[1]]=h[0];r.sqlite3_js_rc_str=E=>d[E];const y=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!a.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const E of i.ctype.structs)y[E.name]||(r[E.name]=e.StructBinder(E));if(r.sqlite3_index_info){for(const E of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[E]=r[E],delete r[E];r.sqlite3_vtab_config=i.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const m=(x,f,d)=>a.sqlite3_wasm_db_error(x,r.SQLITE_MISUSE,f+"() requires "+d+" argument"+(d===1?"":"s")+"."),q=x=>a.sqlite3_wasm_db_error(x,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),F=x=>i.xWrap.argAdapter("sqlite3*")(x),B=x=>i.isPtr(x)?i.cstrToJs(x):x,H=function(x,f){x=F(x);let d=this.dbMap.get(x);if(f)!d&&f>0&&this.dbMap.set(x,d=Object.create(null));else return this.dbMap.delete(x),d;return d}.bind(Object.assign(Object.create(null),{dbMap:new Map}));H.addCollation=function(x,f){const d=H(x,1);d.collation||(d.collation=new Set),d.collation.add(B(f).toLowerCase())},H._addUDF=function(x,f,d,y){f=B(f).toLowerCase();let E=y.get(f);E||y.set(f,E=new Set),E.add(d<0?-1:d)},H.addFunction=function(x,f,d){const y=H(x,1);y.udf||(y.udf=new Map),this._addUDF(x,f,d,y.udf)},H.addWindowFunc=function(x,f,d){const y=H(x,1);y.wudf||(y.wudf=new Map),this._addUDF(x,f,d,y.wudf)},H.cleanup=function(x){x=F(x);const f=[x];for(const E of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const h=i.exports[E];f.length=h.length;try{r[E](...f)}catch(L){console.warn("close-time call of",E+"(",f,") threw:",L)}}const d=H(x,0);if(!d)return;if(d.collation){for(const E of d.collation)try{r.sqlite3_create_collation_v2(x,E,r.SQLITE_UTF8,0,0,0)}catch{}delete d.collation}let y;for(y=0;y<2;++y){const E=y?d.wudf:d.udf;if(!E)continue;const h=y?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const L of E){const M=L[0],z=L[1],O=[x,M,0,r.SQLITE_UTF8,0,0,0,0,0];y&&O.push(0);for(const se of z)try{O[2]=se,h.apply(null,O)}catch{}z.clear()}E.clear()}delete d.udf,delete d.wudf};{const x=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(f){if(arguments.length!==1)return m(f,"sqlite3_close_v2",1);if(f)try{H.cleanup(f)}catch{}return x(f)}}if(r.sqlite3session_table_filter){const x=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(f){if(arguments.length!==1)return m(pDb,"sqlite3session_delete",1);f&&r.sqlite3session_table_filter(f,0,0),x(f)}}{const x=(d,y)=>"argv["+y+"]:"+d[0]+":"+i.cstrToJs(d[1]).toLowerCase(),f=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:x}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:x})]);r.sqlite3_create_collation_v2=function(d,y,E,h,L,M){if(arguments.length!==6)return m(d,"sqlite3_create_collation_v2",6);if(!(E&15))E|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(E&15))return q(d);try{const z=f(d,y,E,h,L,M);return z===0&&L instanceof Function&&H.addCollation(d,y),z}catch(z){return a.sqlite3_wasm_db_error(d,z)}},r.sqlite3_create_collation=(d,y,E,h,L)=>arguments.length===5?r.sqlite3_create_collation_v2(d,y,E,h,L,0):m(d,"sqlite3_create_collation",5)}{const x=function(E,h){return E[0]+":"+(E[2]<0?-1:E[2])+":"+h+":"+i.cstrToJs(E[1]).toLowerCase()},f=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:x,callProxy:E=>(h,L,M)=>{try{E(h,...r.sqlite3_values_to_js(L,M))}catch(z){r.sqlite3_result_error_js(h,z)}}},xFinalAndValue:{signature:"v(p)",contextKey:x,callProxy:E=>h=>{try{r.sqlite3_result_js(h,E(h))}catch(L){r.sqlite3_result_error_js(h,L)}}},xFunc:{signature:"v(pip)",contextKey:x,callProxy:E=>(h,L,M)=>{try{r.sqlite3_result_js(h,E(h,...r.sqlite3_values_to_js(L,M)))}catch(z){r.sqlite3_result_error_js(h,z)}}},xDestroy:{signature:"v(p)",contextKey:x,callProxy:E=>h=>{try{E(h)}catch(L){console.error("UDF xDestroy method threw:",L)}}}}),d=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...f.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...f.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...f.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...f.xDestroy})]),y=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...f.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...f.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...f.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...f.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...f.xDestroy})]);r.sqlite3_create_function_v2=function E(h,L,M,z,O,se,_,b,S){if(E.length!==arguments.length)return m(h,"sqlite3_create_function_v2",E.length);if(!(z&15))z|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(z&15))return q(h);try{const R=d(h,L,M,z,O,se,_,b,S);return R===0&&(se instanceof Function||_ instanceof Function||b instanceof Function||S instanceof Function)&&H.addFunction(h,L,M),R}catch(R){return console.error("sqlite3_create_function_v2() setup threw:",R),a.sqlite3_wasm_db_error(h,R,"Creation of UDF threw: "+R)}},r.sqlite3_create_function=function E(h,L,M,z,O,se,_,b){return E.length===arguments.length?r.sqlite3_create_function_v2(h,L,M,z,O,se,_,b,0):m(h,"sqlite3_create_function",E.length)},r.sqlite3_create_window_function=function E(h,L,M,z,O,se,_,b,S,R){if(E.length!==arguments.length)return m(h,"sqlite3_create_window_function",E.length);if(!(z&15))z|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(z&15))return q(h);try{const p=y(h,L,M,z,O,se,_,b,S,R);return p===0&&(se instanceof Function||_ instanceof Function||b instanceof Function||S instanceof Function||R instanceof Function)&&H.addWindowFunc(h,L,M),p}catch(p){return console.error("sqlite3_create_window_function() setup threw:",p),a.sqlite3_wasm_db_error(h,p,"Creation of UDF threw: "+p)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const x=(d,y)=>(typeof d=="string"?y=-1:a.isSQLableTypedArray(d)?(y=d.byteLength,d=a.typedArrayToString(d instanceof ArrayBuffer?new Uint8Array(d):d)):Array.isArray(d)&&(d=d.join(""),y=-1),[d,y]),f={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function d(y,E,h,L,M,z){if(d.length!==arguments.length)return m(y,"sqlite3_prepare_v3",d.length);const[O,se]=x(E,h);switch(typeof O){case"string":return f.basic(y,O,se,L,M,null);case"number":return f.full(y,O,se,L,M,z);default:return a.sqlite3_wasm_db_error(y,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function d(y,E,h,L,M){return d.length===arguments.length?r.sqlite3_prepare_v3(y,E,h,0,L,M):m(y,"sqlite3_prepare_v2",d.length)}}{const x=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),f=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function d(y,E,h,L,M){if(d.length!==arguments.length)return m(r.sqlite3_db_handle(y),"sqlite3_bind_text",d.length);if(i.isPtr(h)||h===null)return x(y,E,h,L,M);h instanceof ArrayBuffer?h=new Uint8Array(h):Array.isArray(pMem)&&(h=pMem.join(""));let z,O;try{if(a.isSQLableTypedArray(h))z=i.allocFromTypedArray(h),O=h.byteLength;else if(typeof h=="string")[z,O]=i.allocCString(h);else return a.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return x(y,E,z,O,r.SQLITE_WASM_DEALLOC)}catch(se){return i.dealloc(z),a.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),se)}},r.sqlite3_bind_blob=function d(y,E,h,L,M){if(d.length!==arguments.length)return m(r.sqlite3_db_handle(y),"sqlite3_bind_blob",d.length);if(i.isPtr(h)||h===null)return f(y,E,h,L,M);h instanceof ArrayBuffer?h=new Uint8Array(h):Array.isArray(h)&&(h=h.join(""));let z,O;try{if(a.isBindableTypedArray(h))z=i.allocFromTypedArray(h),O=L>=0?L:h.byteLength;else if(typeof h=="string")[z,O]=i.allocCString(h);else return a.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return f(y,E,z,O,r.SQLITE_WASM_DEALLOC)}catch(se){return i.dealloc(z),a.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),se)}}}r.sqlite3_config=function(x,...f){if(arguments.length<2)return r.SQLITE_MISUSE;switch(x){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3_wasm_config_i(x,f[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3_wasm_config_ii(x,f[0],f[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3_wasm_config_j(x,f[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const x=new Set;r.sqlite3_auto_extension=function(f){if(f instanceof Function)f=i.installFunction("i(ppp)",f);else if(arguments.length!==1||!i.isPtr(f))return r.SQLITE_MISUSE;const d=i.exports.sqlite3_auto_extension(f);return f!==arguments[0]&&(d===0?x.add(f):i.uninstallFunction(f)),d},r.sqlite3_cancel_auto_extension=function(f){return!f||arguments.length!==1||!i.isPtr(f)?0:i.exports.sqlite3_cancel_auto_extension(f)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const f of x)i.uninstallFunction(f);x.clear()}}const ee=r.sqlite3_vfs_find("kvvfs");if(ee)if(a.isUIThread()){const x=new r.sqlite3_kvvfs_methods(i.exports.sqlite3_wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const f=i.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,d=i.pstack,y=h=>i.peek(h)===115?sessionStorage:localStorage,E={xRead:(h,L,M,z)=>{const O=d.pointer,se=i.scopedAllocPush();try{const _=f(h,L);if(!_)return-3;const b=i.cstrToJs(_),S=y(h).getItem(b);if(!S)return-1;const R=S.length;if(z<=0)return R;if(z===1)return i.poke(M,0),R;const p=i.scopedAllocCString(S);return z>R+1&&(z=R+1),i.heap8u().copyWithin(M,p,p+z-1),i.poke(M+z-1,0),z-1}catch(_){return console.error("kvstorageRead()",_),-2}finally{d.restore(O),i.scopedAllocPop(se)}},xWrite:(h,L,M)=>{const z=d.pointer;try{const O=f(h,L);if(!O)return 1;const se=i.cstrToJs(O);return y(h).setItem(se,i.cstrToJs(M)),0}catch(O){return console.error("kvstorageWrite()",O),r.SQLITE_IOERR}finally{d.restore(z)}},xDelete:(h,L)=>{const M=d.pointer;try{const z=f(h,L);return z?(y(h).removeItem(i.cstrToJs(z)),0):1}catch(z){return console.error("kvstorageDelete()",z),r.SQLITE_IOERR}finally{d.restore(M)}}};for(const h of Object.keys(E))x[x.memberKey(h)]=i.installFunction(x.memberSignature(h),E[h])}else r.sqlite3_vfs_unregister(ee);i.xWrap.FuncPtrAdapter.warnOnUse=!0}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.version={libVersion:"3.44.1",libVersionNumber:3044001,sourceId:"2023-11-22 14:18:12 d295f48e8f367b066b881780c98bdf980a1d550397d5ba0b0e49842c95b3e8b4",downloadVersion:3440100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(...p)=>{throw new e.SQLite3Error(...p)},r=e.capi,i=e.wasm,a=e.util,m=new WeakMap,q=new WeakMap,F=(p,g,l)=>{const c=Object.getOwnPropertyDescriptor(p,g);return c?c.value:l},B=function(p,g){return g&&(p instanceof f&&(p=p.pointer),s(g,"sqlite3 result code",g+":",p?r.sqlite3_errmsg(p):r.sqlite3_errstr(g))),arguments[0]},H=i.installFunction("i(ippp)",function(p,g,l,c){r.SQLITE_TRACE_STMT===p&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+g+":",i.cstrToJs(c))}.bind({counter:0})),ee=Object.create(null),x=function p(...g){if(!p._name2vfs){p._name2vfs=Object.create(null);const w=typeof importScripts=="function"?I=>s("The VFS for",I,"is only available in the main window thread."):!1;p._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:w||(()=>"local")},p._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:w||(()=>"session")}}const l=p.normalizeArgs(...g);let c=l.filename,u=l.vfs,k=l.flags;(typeof c!="string"&&typeof c!="number"||typeof k!="string"||u&&typeof u!="string"&&typeof u!="number")&&(e.config.error("Invalid DB ctor args",l,arguments),s("Invalid arguments for DB constructor."));let U=typeof c=="number"?i.cstrToJs(c):c;const te=p._name2vfs[U];te&&(u=te.vfs,c=U=te.filename(U));let re,ae=0;k.indexOf("c")>=0&&(ae|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),k.indexOf("w")>=0&&(ae|=r.SQLITE_OPEN_READWRITE),ae===0&&(ae|=r.SQLITE_OPEN_READONLY),ae|=r.SQLITE_OPEN_EXRESCODE;const N=i.pstack.pointer;try{const w=i.pstack.allocPtr();let I=r.sqlite3_open_v2(c,w,ae,u||0);re=i.peekPtr(w),B(re,I),r.sqlite3_extended_result_codes(re,1),k.indexOf("t")>=0&&r.sqlite3_trace_v2(re,r.SQLITE_TRACE_STMT,H,re)}catch(w){throw re&&r.sqlite3_close_v2(re),w}finally{i.pstack.restore(N)}this.filename=U,m.set(this,re),q.set(this,Object.create(null));try{const w=r.sqlite3_js_db_vfs(re);w||s("Internal error: cannot get VFS for new db handle.");const I=ee[w];I instanceof Function?I(this,e):I&&B(re,r.sqlite3_exec(re,I,0,0,0))}catch(w){throw this.close(),w}};x.setVfsPostOpenSql=function(p,g){ee[p]=g},x.normalizeArgs=function(p=":memory:",g="c",l=null){const c={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(c,arguments[0]),c.flags===void 0&&(c.flags="c"),c.vfs===void 0&&(c.vfs=null),c.filename===void 0&&(c.filename=":memory:")):(c.filename=p,c.flags=g,c.vfs=l),c};const f=function(...p){x.apply(this,p)};f.dbCtorHelper=x;const d={null:1,number:2,string:3,boolean:4,blob:5};d.undefined==d.null,i.bigIntEnabled&&(d.bigint=d.number);const y=function(){d!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],m.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},E=function(p){return p.pointer||s("DB has been closed."),p},h=function(p,g){return(g!==(g|0)||g<0||g>=p.columnCount)&&s("Column index",g,"is out of range."),p},L=function(p,g){const l=Object.create(null);switch(l.opt=Object.create(null),g.length){case 1:typeof g[0]=="string"||a.isSQLableTypedArray(g[0])||Array.isArray(g[0])?l.sql=g[0]:g[0]&&typeof g[0]=="object"&&(l.opt=g[0],l.sql=l.opt.sql);break;case 2:l.sql=g[0],l.opt=g[1];break;default:s("Invalid argument count for exec().")}l.sql=a.flexibleString(l.sql),typeof l.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const c=l.opt;switch(c.returnValue){case"resultRows":c.resultRows||(c.resultRows=[]),l.returnVal=()=>c.resultRows;break;case"saveSql":c.saveSql||(c.saveSql=[]),l.returnVal=()=>c.saveSql;break;case void 0:case"this":l.returnVal=()=>p;break;default:s("Invalid returnValue value:",c.returnValue)}if(!c.callback&&!c.returnValue&&c.rowMode!==void 0&&(c.resultRows||(c.resultRows=[]),l.returnVal=()=>c.resultRows),c.callback||c.resultRows)switch(c.rowMode===void 0?"array":c.rowMode){case"object":l.cbArg=u=>u.get(Object.create(null));break;case"array":l.cbArg=u=>u.get([]);break;case"stmt":Array.isArray(c.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),l.cbArg=u=>u;break;default:if(a.isInt32(c.rowMode)){l.cbArg=u=>u.get(c.rowMode);break}else if(typeof c.rowMode=="string"&&c.rowMode.length>1&&c.rowMode[0]==="$"){const u=c.rowMode.substr(1);l.cbArg=k=>{const U=k.get(Object.create(null))[u];return U===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",u):U};break}s("Invalid rowMode:",c.rowMode)}return l},M=(p,g,l,...c)=>{const u=p.prepare(g);try{const k=u.bind(l).step()?u.get(...c):void 0;return u.reset(),k}finally{u.finalize()}},z=(p,g,l,c)=>p.exec({sql:g,bind:l,rowMode:c,returnValue:"resultRows"});f.checkRc=(p,g)=>B(p,g),f.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return E(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const p=this.pointer;if(Object.keys(q.get(this)).forEach((g,l)=>{if(l&&l.pointer)try{l.finalize()}catch{}}),m.delete(this),q.delete(this),r.sqlite3_close_v2(p),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(p=!1,g=!1){const l=E(this).pointer;return p?g?r.sqlite3_total_changes64(l):r.sqlite3_total_changes(l):g?r.sqlite3_changes64(l):r.sqlite3_changes(l)},dbFilename:function(p="main"){return r.sqlite3_db_filename(E(this).pointer,p)},dbName:function(p=0){return r.sqlite3_db_name(E(this).pointer,p)},dbVfsName:function(p=0){let g;const l=r.sqlite3_js_db_vfs(E(this).pointer,p);if(l){const c=new r.sqlite3_vfs(l);try{g=i.cstrToJs(c.$zName)}finally{c.dispose()}}return g},prepare:function(p){E(this);const g=i.pstack.pointer;let l,c;try{l=i.pstack.alloc(8),f.checkRc(this,r.sqlite3_prepare_v2(this.pointer,p,-1,l,null)),c=i.peekPtr(l)}finally{i.pstack.restore(g)}c||s("Cannot prepare empty SQL.");const u=new y(this,c,d);return q.get(this)[c]=u,u},exec:function(){E(this);const p=L(this,arguments);if(!p.sql)return s("exec() requires an SQL string.");const g=p.opt,l=g.callback,c=Array.isArray(g.resultRows)?g.resultRows:void 0;let u,k=g.bind,U=!!(p.cbArg||g.columnNames||c);const te=i.scopedAllocPush(),re=Array.isArray(g.saveSql)?g.saveSql:void 0;try{const ae=a.isSQLableTypedArray(p.sql);let N=ae?p.sql.byteLength:i.jstrlen(p.sql);const w=i.scopedAlloc(2*i.ptrSizeof+(N+1)),I=w+i.ptrSizeof;let D=I+i.ptrSizeof;const W=D+N;for(ae?i.heap8().set(p.sql,D):i.jstrcpy(p.sql,i.heap8(),D,N,!1),i.poke(D+N,0);D&&i.peek(D,"i8");){i.pokePtr([w,I],0),f.checkRc(this,r.sqlite3_prepare_v3(this.pointer,D,N,0,w,I));const Y=i.peekPtr(w);if(D=i.peekPtr(I),N=W-D,!!Y){if(re&&re.push(r.sqlite3_sql(Y).trim()),u=new y(this,Y,d),k&&u.parameterCount&&(u.bind(k),k=null),U&&u.columnCount){let ie=Array.isArray(g.columnNames)?0:1;if(U=!1,p.cbArg||c){for(;u.step();u._lockedByExec=!1){ie++===0&&u.getColumnNames(g.columnNames),u._lockedByExec=!0;const A=p.cbArg(u);if(c&&c.push(A),l&&l.call(g,A,u)===!1)break}u._lockedByExec=!1}ie===0&&u.getColumnNames(g.columnNames)}else u.step();u.reset().finalize(),u=null}}}finally{i.scopedAllocPop(te),u&&(delete u._lockedByExec,u.finalize())}return p.returnVal()},createFunction:function(g,l,c){const u=A=>A instanceof Function;switch(arguments.length){case 1:c=g,g=c.name,l=c.xFunc||0;break;case 2:u(l)||(c=l,l=c.xFunc||0);break}c||(c={}),typeof g!="string"&&s("Invalid arguments: missing function name.");let k=c.xStep||0,U=c.xFinal||0;const te=c.xValue||0,re=c.xInverse||0;let ae;u(l)?(ae=!1,(u(k)||u(U))&&s("Ambiguous arguments: scalar or aggregate?"),k=U=null):u(k)?(u(U)||s("Missing xFinal() callback for aggregate or window UDF."),l=null):u(U)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),ae===!1?(u(te)||u(re))&&s("xValue and xInverse are not permitted for non-window UDFs."):u(te)?(u(re)||s("xInverse must be provided if xValue is."),ae=!0):u(re)&&s("xValue must be provided if xInverse is.");const N=c.pApp;N!=null&&(typeof N!="number"||!a.isInt32(N))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const w=c.xDestroy||0;w&&!u(w)&&s("xDestroy property must be a function.");let I=0;F(c,"deterministic")&&(I|=r.SQLITE_DETERMINISTIC),F(c,"directOnly")&&(I|=r.SQLITE_DIRECTONLY),F(c,"innocuous")&&(I|=r.SQLITE_INNOCUOUS),g=g.toLowerCase();const D=l||k,W=F(c,"arity"),Y=typeof W=="number"?W:D.length?D.length-1:0;let ie;return ae?ie=r.sqlite3_create_window_function(this.pointer,g,Y,r.SQLITE_UTF8|I,N||0,k,U,te,re,w):ie=r.sqlite3_create_function_v2(this.pointer,g,Y,r.SQLITE_UTF8|I,N||0,l,k,U,w),f.checkRc(this,ie),this},selectValue:function(p,g,l){return M(this,p,g,0,l)},selectValues:function(p,g,l){const c=this.prepare(p),u=[];try{for(c.bind(g);c.step();)u.push(c.get(0,l));c.reset()}finally{c.finalize()}return u},selectArray:function(p,g){return M(this,p,g,[])},selectObject:function(p,g){return M(this,p,g,{})},selectArrays:function(p,g){return z(this,p,g,"array")},selectObjects:function(p,g){return z(this,p,g,"object")},openStatementCount:function(){return this.pointer?Object.keys(q.get(this)).length:0},transaction:function(p){let g="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),g+=" "+arguments[0],p=arguments[1]),E(this).exec(g);try{const l=p(this);return this.exec("COMMIT"),l}catch(l){throw this.exec("ROLLBACK"),l}},savepoint:function(p){E(this).exec("SAVEPOINT oo1");try{const g=p(this);return this.exec("RELEASE oo1"),g}catch(g){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),g}},checkRc:function(p){return B(this,p)}};const O=function(p){return p.pointer||s("Stmt has been closed."),p},se=function(p){let g=d[p==null?"null":typeof p];switch(g){case d.boolean:case d.null:case d.number:case d.string:return g;case d.bigint:if(i.bigIntEnabled)return g;default:return a.isBindableTypedArray(p)?d.blob:void 0}},_=function(p){return se(p)||s("Unsupported bind() argument type:",typeof p)},b=function(p,g){const l=typeof g=="number"?g:r.sqlite3_bind_parameter_index(p.pointer,g);return l===0||!a.isInt32(l)?s("Invalid bind() parameter name: "+g):(l<1||l>p.parameterCount)&&s("Bind index",g,"is out of range."),l},S=function(p,g){return p._lockedByExec&&s("Operation is illegal when statement is locked:",g),p},R=function p(g,l,c,u){S(O(g),"bind()"),p._||(p._tooBigInt=U=>s("BigInt value is too big to store without precision loss:",U),p._={string:function(U,te,re,ae){const[N,w]=i.allocCString(re,!0);return(ae?r.sqlite3_bind_blob:r.sqlite3_bind_text)(U.pointer,te,N,w,r.SQLITE_WASM_DEALLOC)}}),_(u),l=b(g,l);let k=0;switch(u==null?d.null:c){case d.null:k=r.sqlite3_bind_null(g.pointer,l);break;case d.string:k=p._.string(g,l,u,!1);break;case d.number:{let U;a.isInt32(u)?U=r.sqlite3_bind_int:typeof u=="bigint"?a.bigIntFits64(u)?i.bigIntEnabled?U=r.sqlite3_bind_int64:a.bigIntFitsDouble(u)?(u=Number(u),U=r.sqlite3_bind_double):p._tooBigInt(u):p._tooBigInt(u):(u=Number(u),i.bigIntEnabled&&Number.isInteger(u)?U=r.sqlite3_bind_int64:U=r.sqlite3_bind_double),k=U(g.pointer,l,u);break}case d.boolean:k=r.sqlite3_bind_int(g.pointer,l,u?1:0);break;case d.blob:{if(typeof u=="string"){k=p._.string(g,l,u,!0);break}else u instanceof ArrayBuffer?u=new Uint8Array(u):a.isBindableTypedArray(u)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const U=i.alloc(u.byteLength||1);i.heap8().set(u.byteLength?u:[0],U),k=r.sqlite3_bind_blob(g.pointer,l,U,u.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",u),s("Unsupported bind() argument type: "+typeof u)}return k&&f.checkRc(g.db.pointer,k),g._mayGet=!1,g};y.prototype={finalize:function(){if(this.pointer){S(this,"finalize()");const p=r.sqlite3_finalize(this.pointer);return delete q.get(this.db)[this.pointer],m.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,p}},clearBindings:function(){return S(O(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(p){S(this,"reset()"),p&&this.clearBindings();const g=r.sqlite3_reset(O(this).pointer);return this._mayGet=!1,B(this.db,g),this},bind:function(){O(this);let p,g;switch(arguments.length){case 1:p=1,g=arguments[0];break;case 2:p=arguments[0],g=arguments[1];break;default:s("Invalid bind() arguments.")}return g===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,g===null?R(this,p,d.null,g):Array.isArray(g)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),g.forEach((l,c)=>R(this,c+1,_(l),l)),this):(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),typeof g=="object"&&!a.isBindableTypedArray(g)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(g).forEach(l=>R(this,l,_(g[l]),g[l])),this):R(this,p,_(g),g)))},bindAsBlob:function(p,g){O(this),arguments.length===1&&(g=p,p=1);const l=_(g);return d.string!==l&&d.blob!==l&&d.null!==l&&s("Invalid value type for bindAsBlob()"),R(this,p,d.blob,g)},step:function(){S(this,"step()");const p=r.sqlite3_step(O(this).pointer);switch(p){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",p,r.sqlite3_js_rc_str(p),"SQL =",r.sqlite3_sql(this.pointer)),f.checkRc(this.db.pointer,p)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const p=this.step();return this.reset(),p}finally{try{this.finalize()}catch{}}},get:function(p,g){if(O(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(p)){let l=0;const c=this.columnCount;for(;l<c;)p[l]=this.get(l++);return p}else if(p&&typeof p=="object"){let l=0;const c=this.columnCount;for(;l<c;)p[r.sqlite3_column_name(this.pointer,l)]=this.get(l++);return p}switch(h(this,p),g===void 0?r.sqlite3_column_type(this.pointer,p):g){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const l=r.sqlite3_column_int64(this.pointer,p);return l>=Number.MIN_SAFE_INTEGER&&l<=Number.MAX_SAFE_INTEGER?Number(l).valueOf():l}else{const l=r.sqlite3_column_double(this.pointer,p);return(l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+l),a.isInt32(l)?l|0:l}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,p);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,p);case r.SQLITE_BLOB:{const l=r.sqlite3_column_bytes(this.pointer,p),c=r.sqlite3_column_blob(this.pointer,p),u=new Uint8Array(l);return l&&u.set(i.heap8u().slice(c,c+l),0),l&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(u.buffer),u}default:s("Don't know how to translate","type of result column #"+p+".")}s("Not reached.")},getInt:function(p){return this.get(p,r.SQLITE_INTEGER)},getFloat:function(p){return this.get(p,r.SQLITE_FLOAT)},getString:function(p){return this.get(p,r.SQLITE_TEXT)},getBlob:function(p){return this.get(p,r.SQLITE_BLOB)},getJSON:function(p){const g=this.get(p,r.SQLITE_STRING);return g===null?g:JSON.parse(g)},getColumnName:function(p){return r.sqlite3_column_name(h(O(this),p).pointer,p)},getColumnNames:function(p=[]){h(O(this),0);const g=this.columnCount;for(let l=0;l<g;++l)p.push(r.sqlite3_column_name(this.pointer,l));return p},getParamIndex:function(p){return O(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,p):void 0}};{const p={enumerable:!0,get:function(){return m.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(y.prototype,"pointer",p),Object.defineProperty(f.prototype,"pointer",p)}if(Object.defineProperty(y.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),e.oo1={DB:f,Stmt:y},a.isUIThread()){e.oo1.JsStorageDb=function(g="session"){g!=="session"&&g!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),x.call(this,{filename:g,flags:"c",vfs:"kvvfs"})};const p=e.oo1.JsStorageDb;p.prototype=Object.create(f.prototype),p.clearStorage=r.sqlite3_js_kvvfs_clear,p.prototype.clearStorage=function(){return p.clearStorage(E(this).filename)},p.storageSize=r.sqlite3_js_kvvfs_size,p.prototype.storageSize=function(){return p.storageSize(E(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.initWorker1API=function(){const s=(...f)=>{throw new Error(f.join(" "))};globalThis.WorkerGlobalScope instanceof Function||s("initWorker1API() must be run from a Worker thread.");const r=this.sqlite3||s("Missing this.sqlite3 object."),i=r.oo1.DB,a=function(f){let d=m.idMap.get(f);return d||(d="db#"+ ++m.idSeq+"@"+f.pointer,m.idMap.set(f,d),d)},m={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(f){const d=new i(f);return this.dbs[a(d)]=d,this.dbList.indexOf(d)<0&&this.dbList.push(d),d},close:function(f,d){if(f){delete this.dbs[a(f)];const y=f.filename,E=r.wasm.sqlite3_wasm_db_vfs(f.pointer,0);f.close();const h=this.dbList.indexOf(f);h>=0&&this.dbList.splice(h,1),d&&y&&E&&r.wasm.sqlite3_wasm_vfs_unlink(E,y)}},post:function(f,d){d&&d.length?(globalThis.postMessage(f,Array.from(d)),d.length=0):globalThis.postMessage(f)},dbs:Object.create(null),getDb:function(f,d=!0){return this.dbs[f]||(d?s("Unknown (or closed) DB ID:",f):void 0)}},q=function(f=m.dbList[0]){return f&&f.pointer?f:s("DB is not opened.")},F=function(f,d=!0){const y=m.getDb(f.dbId,!1)||m.dbList[0];return d?q(y):y},B=function(){return m.dbList[0]&&a(m.dbList[0])},H=function(f){const d=/^file:.+(vfs=(\w+))/.exec(f);return r.capi.sqlite3_vfs_find(d?d[2]:0)},ee=f=>f===""||f[0]===":",x={open:function(f){const d=Object.create(null),y=f.args||Object.create(null);y.simulateError&&s("Throwing because of simulateError flag.");const E=Object.create(null);let h,L;if(d.vfs=y.vfs,ee(y.filename)?d.filename=y.filename||"":(d.filename=y.filename,h=y.byteArray,h&&(L=H(y.filename))),L){let z;try{z=r.wasm.allocFromTypedArray(h);const O=r.wasm.sqlite3_wasm_vfs_create_file(L,d.filename,z,h.byteLength);O&&r.SQLite3Error.toss(O)}catch(O){throw new r.SQLite3Error(O.name+" creating "+y.filename+": "+O.message,{cause:O})}finally{z&&r.wasm.dealloc(z)}}const M=m.open(d);return E.filename=M.filename,E.persistent=!!r.capi.sqlite3_js_db_uses_vfs(M.pointer,"opfs"),E.dbId=a(M),E.vfs=M.dbVfsName(),E},close:function(f){const d=F(f,!1),y={filename:d&&d.filename};if(d){const E=f.args&&typeof f.args=="object"?!!f.args.unlink:!1;m.close(d,E)}return y},exec:function(f){const d=typeof f.args=="string"?{sql:f.args}:f.args||Object.create(null);d.rowMode==="stmt"?s("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):d.sql||s("'exec' requires input SQL.");const y=F(f);(d.callback||Array.isArray(d.resultRows))&&(y._blobXfer=m.xfer);const E=d.callback;let h=0;const L=!!d.columnNames;typeof E=="string"&&(L||(d.columnNames=[]),d.callback=function(M,z){m.post({type:E,columnNames:d.columnNames,rowNumber:++h,row:M},m.xfer)});try{const M=d.countChanges?y.changes(!0,d.countChanges===64):void 0;y.exec(d),M!==void 0&&(d.changeCount=y.changes(!0,d.countChanges===64)-M),d.callback instanceof Function&&(d.callback=E,m.post({type:E,columnNames:d.columnNames,rowNumber:null,row:void 0}))}finally{delete y._blobXfer,d.callback&&(d.callback=E)}return d},"config-get":function(){const f=Object.create(null),d=r.config;return["bigIntEnabled"].forEach(function(y){Object.getOwnPropertyDescriptor(d,y)&&(f[y]=d[y])}),f.version=r.version,f.vfsList=r.capi.sqlite3_js_vfs_list(),f.opfsEnabled=!!r.opfs,f},export:function(f){const d=F(f),y={byteArray:r.capi.sqlite3_js_db_export(d.pointer),filename:d.filename,mimetype:"application/x-sqlite3"};return m.xfer.push(y.byteArray.buffer),y},toss:function(f){s("Testing worker exception")},"opfs-tree":async function(f){return r.opfs||s("OPFS support is unavailable."),await r.opfs.treeList()}};globalThis.onmessage=async function(f){f=f.data;let d,y=f.dbId,E=f.type;const h=performance.now();try{x.hasOwnProperty(E)&&x[E]instanceof Function?d=await x[E](f):s("Unknown db worker message type:",f.type)}catch(L){E="error",d={operation:f.type,message:L.message,errorClass:L.name,input:f},L.stack&&(d.stack=typeof L.stack=="string"?L.stack.split(/\n\s*/):L.stack)}y||(y=d.dbId||B()),m.post({type:E,dbId:y,messageId:f.messageId,workerReceivedTime:h,workerRespondTime:performance.now(),departureTime:f.departureTime,result:d},m.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:e})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.wasm,r=e.capi,i=e.util.toss3,a=Object.create(null),m=Object.create(null),q=e.StructBinder;e.vfs=a,e.vtab=m;const F=r.sqlite3_index_info;F.prototype.nthConstraint=function(f,d=!1){if(f<0||f>=this.$nConstraint)return!1;const y=this.$aConstraint+F.sqlite3_index_constraint.structInfo.sizeof*f;return d?y:new F.sqlite3_index_constraint(y)},F.prototype.nthConstraintUsage=function(f,d=!1){if(f<0||f>=this.$nConstraint)return!1;const y=this.$aConstraintUsage+F.sqlite3_index_constraint_usage.structInfo.sizeof*f;return d?y:new F.sqlite3_index_constraint_usage(y)},F.prototype.nthOrderBy=function(f,d=!1){if(f<0||f>=this.$nOrderBy)return!1;const y=this.$aOrderBy+F.sqlite3_index_orderby.structInfo.sizeof*f;return d?y:new F.sqlite3_index_orderby(y)};const B=function f(d,y,E,h=f.installMethodArgcCheck){if(d instanceof q.StructType?!(E instanceof Function)&&!s.isPtr(E)&&i("Usage errror: expecting a Function or WASM pointer to one."):i("Usage error: target object is-not-a StructType."),arguments.length===1)return(O,se)=>f(d,O,se,h);f.argcProxy||(f.argcProxy=function(O,se,_,b){return function(...S){return _.length!==arguments.length&&i("Argument mismatch for",O.structInfo.name+"::"+se+": Native signature is:",b),_.apply(this,S)}},f.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((O,se)=>{if(typeof O=="number")try{s.uninstallFunction(O)}catch{}}),delete this.ondispose.__removeFuncList)});const L=d.memberSignature(y);L.length<2&&i("Member",y,"does not have a function pointer signature:",L);const M=d.memberKey(y),z=h&&!s.isPtr(E)?f.argcProxy(d,M,E,L):E;if(s.isPtr(z))z&&!s.functionEntry(z)&&i("Pointer",z,"is not a WASM function table entry."),d[M]=z;else{const O=s.installFunction(z,d.memberSignature(y,!0));d[M]=O,(!d.ondispose||!d.ondispose.__removeFuncList)&&(d.addOnDispose("ondispose.__removeFuncList handler",f.removeFuncList),d.ondispose.__removeFuncList=[]),d.ondispose.__removeFuncList.push(M,O)}return(O,se)=>f(d,O,se,h)};B.installMethodArgcCheck=!1;const H=function(f,d,y=B.installMethodArgcCheck){const E=new Map;for(const h of Object.keys(d)){const L=d[h],M=E.get(L);if(M){const z=f.memberKey(h);f[z]=f[f.memberKey(M)]}else B(f,h,L,y),E.set(L,h)}return f};q.StructType.prototype.installMethod=function(d,y,E=B.installMethodArgcCheck){return arguments.length<3&&d&&typeof d=="object"?H(this,...arguments):B(this,...arguments)},q.StructType.prototype.installMethods=function(f,d=B.installMethodArgcCheck){return H(this,f,d)},r.sqlite3_vfs.prototype.registerVfs=function(f=!1){this instanceof e.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const d=r.sqlite3_vfs_register(this,f?1:0);return d&&i("sqlite3_vfs_register(",this,") failed with rc",d),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},a.installVfs=function(f){let d=0;const y=["io","vfs"];for(const E of y){const h=f[E];h&&(++d,H(h.struct,h.methods,!!h.applyArgcCheck),E==="vfs"&&(!h.struct.$zName&&typeof h.name=="string"&&h.struct.addOnDispose(h.struct.$zName=s.allocCString(h.name)),h.struct.registerVfs(!!h.asDefault)))}return d||i("Misuse: installVfs() options object requires at least","one of:",y),this};const ee=function(f,d){return function(y,E=!1){if(arguments.length===0&&(y=new d),y instanceof d)return this.set(y.pointer,y),y;s.isPtr(y)||e.SQLite3Error.toss("Invalid argument to",f+"()");let h=this.get(y);return E&&this.delete(y),h}.bind(new Map)},x=function(f,d){const y=ee(f,d);return Object.assign(Object.create(null),{StructType:d,create:E=>{const h=y();return s.pokePtr(E,h.pointer),h},get:E=>y(E),unget:E=>y(E,!0),dispose:E=>{const h=y(E,!0);h&&h.dispose()}})};m.xVtab=x("xVtab",r.sqlite3_vtab),m.xCursor=x("xCursor",r.sqlite3_vtab_cursor),m.xIndexInfo=f=>new r.sqlite3_index_info(f),m.xError=function f(d,y,E){if(f.errorReporter instanceof Function)try{f.errorReporter("sqlite3_module::"+d+"(): "+y.message)}catch{}let h;return y instanceof e.WasmAllocError?h=r.SQLITE_NOMEM:arguments.length>2?h=E:y instanceof e.SQLite3Error&&(h=y.resultCode),h||r.SQLITE_ERROR},m.xError.errorReporter=console.error.bind(console),m.xRowid=(f,d)=>s.poke(f,d,"i64"),m.setupModule=function(f){let d=!1;const y=this instanceof r.sqlite3_module?this:f.struct||(d=new r.sqlite3_module);try{const E=f.methods||i("Missing 'methods' object.");for(const h of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const L=h[0],M=h[1];E[L]===!0?E[L]=E[M]:E[M]===!0&&(E[M]=E[L])}if(f.catchExceptions){const h=function(z,O){return["xConnect","xCreate"].indexOf(z)>=0?function(se,_,b,S,R,p){try{return O(...arguments)||0}catch(g){return g instanceof e.WasmAllocError||(s.dealloc(s.peekPtr(p)),s.pokePtr(p,s.allocCString(g.message))),m.xError(z,g)}}:function(...se){try{return O(...se)||0}catch(_){return m.xError(z,_)}}},L=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],M=Object.create(null);for(const z of L){const O=E[z];if(O instanceof Function)z==="xConnect"&&E.xCreate===O?M[z]=E.xCreate:z==="xCreate"&&E.xConnect===O?M[z]=E.xConnect:M[z]=h(z,O);else continue}H(y,M,!1)}else H(y,E,!!f.applyArgcCheck);if(y.$iVersion===0){let h;typeof f.iVersion=="number"?h=f.iVersion:y.$xShadowName?h=3:y.$xSavePoint||y.$xRelease||y.$xRollbackTo?h=2:h=1,y.$iVersion=h}}catch(E){throw d&&d.dispose(),E}return y},r.sqlite3_module.prototype.setupModule=function(f){return m.setupModule.call(this,f)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=function r(i){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const a=new URL(globalThis.location.href).searchParams;return a.has("opfs-disable")?Promise.resolve(e):(i.verbose===void 0&&(i.verbose=a.has("opfs-verbose")?+a.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=a.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(q,F){const B=[e.config.error,e.config.warn,e.config.log],H=(A,...P)=>{i.verbose>A&&B[A]("OPFS syncer:",...P)},ee=(...A)=>H(2,...A),x=(...A)=>H(1,...A),f=(...A)=>H(0,...A),d=e.util.toss,y=e.capi,E=e.util,h=e.wasm,L=y.sqlite3_vfs,M=y.sqlite3_file,z=y.sqlite3_io_methods,O=Object.create(null),se=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;O.metrics={dump:function(){let A,P=0,j=0,K=0;for(A in u.opIds){const $=k[A];P+=$.count,j+=$.time,K+=$.wait,$.avgTime=$.count&&$.time?$.time/$.count:0,$.avgWait=$.count&&$.wait?$.wait/$.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",k,`
Total of`,P,"op(s) for",j,"ms (incl. "+K+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",k.s11n),g.postMessage({type:"opfs-async-metrics"})},reset:function(){let A;const P=K=>K.count=K.time=K.wait=0;for(A in u.opIds)P(k[A]=Object.create(null));let j=k.s11n=Object.create(null);j=j.serialize=Object.create(null),j.count=j.time=0,j=k.s11n.deserialize=Object.create(null),j.count=j.time=0}};const _=new z,b=new L().addOnDispose(()=>_.dispose());let S;const R=A=>(S=!0,b.dispose(),F(A)),p=()=>(S=!1,q(e)),g=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-f7581b46.js",self.location));setTimeout(()=>{S===void 0&&R(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),g._originalOnError=g.onerror,g.onerror=function(A){f("Error initializing OPFS asyncer:",A),R(new Error("Loading OPFS async Worker failed for unknown reasons."))};const l=y.sqlite3_vfs_find(null),c=l?new L(l):null;_.$iVersion=1,b.$iVersion=2,b.$szOsFile=y.sqlite3_file.structInfo.sizeof,b.$mxPathname=1024,b.$zName=h.allocCString("opfs"),b.$xDlOpen=b.$xDlError=b.$xDlSym=b.$xDlClose=null,b.addOnDispose("$zName",b.$zName,"cleanup default VFS wrapper",()=>c?c.dispose():null);const u=Object.create(null);u.verbose=i.verbose,u.littleEndian=(()=>{const A=new ArrayBuffer(2);return new DataView(A).setInt16(0,256,!0),new Int16Array(A)[0]===256})(),u.asyncIdleWaitTime=150,u.asyncS11nExceptions=1,u.fileBufferSize=1024*64,u.sabS11nOffset=u.fileBufferSize,u.sabS11nSize=b.$mxPathname*2,u.sabIO=new SharedArrayBuffer(u.fileBufferSize+u.sabS11nSize),u.opIds=Object.create(null);const k=Object.create(null);{let A=0;u.opIds.whichOp=A++,u.opIds.rc=A++,u.opIds.xAccess=A++,u.opIds.xClose=A++,u.opIds.xDelete=A++,u.opIds.xDeleteNoWait=A++,u.opIds.xFileSize=A++,u.opIds.xLock=A++,u.opIds.xOpen=A++,u.opIds.xRead=A++,u.opIds.xSleep=A++,u.opIds.xSync=A++,u.opIds.xTruncate=A++,u.opIds.xUnlock=A++,u.opIds.xWrite=A++,u.opIds.mkdir=A++,u.opIds["opfs-async-metrics"]=A++,u.opIds["opfs-async-shutdown"]=A++,u.opIds.retry=A++,u.sabOP=new SharedArrayBuffer(A*4),O.metrics.reset()}u.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(A=>{(u.sq3Codes[A]=y[A])===void 0&&d("Maintenance required: not found:",A)}),u.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const U=(A,...P)=>{const j=u.opIds[A]||d("Invalid op ID:",A);u.s11n.serialize(...P),Atomics.store(u.sabOPView,u.opIds.rc,-1),Atomics.store(u.sabOPView,u.opIds.whichOp,j),Atomics.notify(u.sabOPView,u.opIds.whichOp);const K=performance.now();Atomics.wait(u.sabOPView,u.opIds.rc,-1);const $=Atomics.load(u.sabOPView,u.opIds.rc);if(k[A].wait+=performance.now()-K,$&&u.asyncS11nExceptions){const ne=u.s11n.deserialize();ne&&f(A+"() async error:",...ne)}return $};O.debug={asyncShutdown:()=>{x("Shutting down OPFS async listener. The OPFS VFS will no longer work."),U("opfs-async-shutdown")},asyncRestart:()=>{x("Attempting to restart OPFS VFS async listener. Might work, might not."),g.postMessage({type:"opfs-async-restart"})}};const te=()=>{if(u.s11n)return u.s11n;const A=new TextDecoder,P=new TextEncoder("utf-8"),j=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),K=new DataView(u.sabIO,u.sabS11nOffset,u.sabS11nSize);u.s11n=Object.create(null);const $=Object.create(null);$.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},$.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},$.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},$.string={id:4};const ne=X=>$[typeof X]||d("Maintenance required: this value type cannot be serialized.",X),ue=X=>{switch(X){case $.number.id:return $.number;case $.bigint.id:return $.bigint;case $.boolean.id:return $.boolean;case $.string.id:return $.string;default:d("Invalid type ID:",X)}};return u.s11n.deserialize=function(X=!1){++k.s11n.deserialize.count;const xe=performance.now(),T=j[0],Q=T?[]:null;if(T){const G=[];let J=1,fe,qe,ye;for(fe=0;fe<T;++fe,++J)G.push(ue(j[J]));for(fe=0;fe<T;++fe){const be=G[fe];be.getter?(ye=K[be.getter](J,u.littleEndian),J+=be.size):(qe=K.getInt32(J,u.littleEndian),J+=4,ye=A.decode(j.slice(J,J+qe)),J+=qe),Q.push(ye)}}return X&&(j[0]=0),k.s11n.deserialize.time+=performance.now()-xe,Q},u.s11n.serialize=function(...X){const xe=performance.now();if(++k.s11n.serialize.count,X.length){const T=[];let Q=0,G=1;for(j[0]=X.length&255;Q<X.length;++Q,++G)T.push(ne(X[Q])),j[G]=T[Q].id;for(Q=0;Q<X.length;++Q){const J=T[Q];if(J.setter)K[J.setter](G,X[Q],u.littleEndian),G+=J.size;else{const fe=P.encode(X[Q]);K.setInt32(G,fe.byteLength,u.littleEndian),G+=4,j.set(fe,G),G+=fe.byteLength}}}else j[0]=0;k.s11n.serialize.time+=performance.now()-xe},u.s11n},re=function A(P=16){A._chars||(A._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",A._n=A._chars.length);const j=[];let K=0;for(;K<P;++K){const $=Math.random()*(A._n*64)%A._n|0;j[K]=A._chars[$]}return j.join("")},ae=Object.create(null),N=Object.create(null);N.op=void 0,N.start=void 0;const w=A=>{N.start=performance.now(),N.op=A,++k[A].count},I=()=>k[N.op].time+=performance.now()-N.start,D={xCheckReservedLock:function(A,P){const j=ae[A];return h.poke(P,j.lockType?1:0,"i32"),0},xClose:function(A){w("xClose");let P=0;const j=ae[A];return j&&(delete ae[A],P=U("xClose",A),j.sq3File&&j.sq3File.dispose()),I(),P},xDeviceCharacteristics:function(A){return y.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(A,P,j){return y.SQLITE_NOTFOUND},xFileSize:function(A,P){w("xFileSize");let j=U("xFileSize",A);if(j==0)try{const K=u.s11n.deserialize()[0];h.poke(P,K,"i64")}catch(K){f("Unexpected error reading xFileSize() result:",K),j=u.sq3Codes.SQLITE_IOERR}return I(),j},xLock:function(A,P){w("xLock");const j=ae[A];let K=0;return j.lockType?j.lockType=P:(K=U("xLock",A,P),K===0&&(j.lockType=P)),I(),K},xRead:function(A,P,j,K){w("xRead");const $=ae[A];let ne;try{ne=U("xRead",A,j,Number(K)),(ne===0||y.SQLITE_IOERR_SHORT_READ===ne)&&h.heap8u().set($.sabView.subarray(0,j),P)}catch(ue){f("xRead(",arguments,") failed:",ue,$),ne=y.SQLITE_IOERR_READ}return I(),ne},xSync:function(A,P){w("xSync"),++k.xSync.count;const j=U("xSync",A,P);return I(),j},xTruncate:function(A,P){w("xTruncate");const j=U("xTruncate",A,Number(P));return I(),j},xUnlock:function(A,P){w("xUnlock");const j=ae[A];let K=0;return y.SQLITE_LOCK_NONE===P&&j.lockType&&(K=U("xUnlock",A,P)),K===0&&(j.lockType=P),I(),K},xWrite:function(A,P,j,K){w("xWrite");const $=ae[A];let ne;try{$.sabView.set(h.heap8u().subarray(P,P+j)),ne=U("xWrite",A,j,Number(K))}catch(ue){f("xWrite(",arguments,") failed:",ue,$),ne=y.SQLITE_IOERR_WRITE}return I(),ne}},W={xAccess:function(A,P,j,K){w("xAccess");const $=U("xAccess",h.cstrToJs(P));return h.poke(K,$?0:1,"i32"),I(),0},xCurrentTime:function(A,P){return h.poke(P,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(A,P){return h.poke(P,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(A,P,j){w("xDelete");const K=U("xDelete",h.cstrToJs(P),j,!1);return I(),K},xFullPathname:function(A,P,j,K){return h.cstrncpy(K,P,j)<j?0:y.SQLITE_CANTOPEN},xGetLastError:function(A,P,j){return x("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(P,j,K,$,ne){w("xOpen");let ue=0;j===0?j=re():typeof j=="number"&&(y.sqlite3_uri_boolean(j,"opfs-unlock-asap",0)&&(ue|=u.opfsFlags.OPFS_UNLOCK_ASAP),j=h.cstrToJs(j));const X=Object.create(null);X.fid=K,X.filename=j,X.sab=new SharedArrayBuffer(u.fileBufferSize),X.flags=$;const xe=U("xOpen",K,j,$,ue);return xe||(X.readOnly&&h.poke(ne,y.SQLITE_OPEN_READONLY,"i32"),ae[K]=X,X.sabView=u.sabFileBufView,X.sq3File=new M(K),X.sq3File.$pMethods=_.pointer,X.lockType=y.SQLITE_LOCK_NONE),I(),xe}};c&&(b.$xRandomness=c.$xRandomness,b.$xSleep=c.$xSleep),b.$xRandomness||(W.xRandomness=function(A,P,j){const K=h.heap8u();let $=0;for(;$<P;++$)K[j+$]=Math.random()*255e3&255;return $}),b.$xSleep||(W.xSleep=function(A,P){return Atomics.wait(u.sabOPView,u.opIds.xSleep,0,P),0}),O.getResolvedPath=function(A,P){const j=new URL(A,"file://irrelevant").pathname;return P?j.split("/").filter(K=>!!K):j},O.getDirForFilename=async function(P,j=!1){const K=O.getResolvedPath(P,!0),$=K.pop();let ne=O.rootDirectory;for(const ue of K)ue&&(ne=await ne.getDirectoryHandle(ue,{create:!!j}));return[ne,$]},O.mkdir=async function(A){try{return await O.getDirForFilename(A+"/filepart",!0),!0}catch{return!1}},O.entryExists=async function(A){try{const[P,j]=await O.getDirForFilename(A);return await P.getFileHandle(j),!0}catch{return!1}},O.randomFilename=re,O.registerVfs=(A=!1)=>h.exports.sqlite3_vfs_register(b.pointer,A?1:0),O.treeList=async function(){const A=async function j(K,$){$.name=K.name,$.dirs=[],$.files=[];for await(const ne of K.values())if(ne.kind==="directory"){const ue=Object.create(null);$.dirs.push(ue),await j(ne,ue)}else $.files.push(ne.name)},P=Object.create(null);return await A(O.rootDirectory,P),P},O.rmfr=async function(){const A=O.rootDirectory,P={recurse:!0};for await(const j of A.values())A.removeEntry(j.name,P)},O.unlink=async function(A,P=!1,j=!1){try{const[K,$]=await O.getDirForFilename(A,!1);return await K.removeEntry($,{recursive:P}),!0}catch(K){if(j)throw new Error("unlink(",arguments[0],") failed: "+K.message,{cause:K});return!1}},O.traverse=async function(A){const P={recursive:!0,directory:O.rootDirectory};typeof A=="function"&&(A={callback:A}),A=Object.assign(P,A||{}),async function K($,ne){for await(const ue of $.values()){if(A.callback(ue,$,ne)===!1)return!1;if(A.recursive&&ue.kind==="directory"&&await K(ue,ne+1)===!1)break}}(A.directory,0)};const Y=async function(A,P){const[j,K]=await O.getDirForFilename(A,!0);let ne=await(await j.getFileHandle(K,{create:!0})).createSyncAccessHandle(),ue=0,X,xe=!1;try{for(ne.truncate(0);(X=await P())!==void 0;)X instanceof ArrayBuffer&&(X=new Uint8Array(X)),ue===0&&X.byteLength>=15&&(E.affirmDbHeader(X),xe=!0),ne.write(X,{at:ue}),ue+=X.byteLength;if((ue<512||ue%512!==0)&&d("Input size",ue,"is not correct for an SQLite database."),!xe){const T=new Uint8Array(20);ne.read(T,{at:0}),E.affirmDbHeader(T)}return ne.write(new Uint8Array([1,1]),{at:18}),ue}catch(T){throw await ne.close(),ne=void 0,await j.removeEntry(K).catch(()=>{}),T}finally{ne&&await ne.close()}};if(O.importDb=async function(A,P){if(P instanceof Function)return Y(A,P);P instanceof ArrayBuffer&&(P=new Uint8Array(P)),E.affirmIsDb(P);const j=P.byteLength,[K,$]=await O.getDirForFilename(A,!0);let ne,ue=0;try{return ne=await(await K.getFileHandle($,{create:!0})).createSyncAccessHandle(),ne.truncate(0),ue=ne.write(P,{at:0}),ue!=j&&d("Expected to write "+j+" bytes but wrote "+ue+"."),ne.write(new Uint8Array([1,1]),{at:18}),ue}catch(X){throw ne&&(await ne.close(),ne=void 0),await K.removeEntry($).catch(()=>{}),X}finally{ne&&await ne.close()}},e.oo1){const A=function(...P){const j=e.oo1.DB.dbCtorHelper.normalizeArgs(...P);j.vfs=b.$zName,e.oo1.DB.dbCtorHelper.call(this,j)};A.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=A,A.importDb=O.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(b.pointer,function(P,j){j.capi.sqlite3_busy_timeout(P,1e4),j.capi.sqlite3_exec(P,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const ie=function(){const A=h.scopedAllocPush(),P=new M;try{const j=P.pointer,K=y.SQLITE_OPEN_CREATE|y.SQLITE_OPEN_READWRITE|y.SQLITE_OPEN_MAIN_DB,$=h.scopedAlloc(8),ne="/sanity/check/file"+re(8),ue=h.scopedAllocCString(ne);let X;if(u.s11n.serialize("This is ä string."),X=u.s11n.deserialize(),ee("deserialize() says:",X),X[0]!=="This is ä string."&&d("String d13n error."),W.xAccess(b.pointer,ue,0,$),X=h.peek($,"i32"),ee("xAccess(",ne,") exists ?=",X),X=W.xOpen(b.pointer,ue,j,K,$),ee("open rc =",X,"state.sabOPView[xOpen] =",u.sabOPView[u.opIds.xOpen]),X!==0){f("open failed with code",X);return}W.xAccess(b.pointer,ue,0,$),X=h.peek($,"i32"),X||d("xAccess() failed to detect file."),X=D.xSync(P.pointer,0),X&&d("sync failed w/ rc",X),X=D.xTruncate(P.pointer,1024),X&&d("truncate failed w/ rc",X),h.poke($,0,"i64"),X=D.xFileSize(P.pointer,$),X&&d("xFileSize failed w/ rc",X),ee("xFileSize says:",h.peek($,"i64")),X=D.xWrite(P.pointer,ue,10,1),X&&d("xWrite() failed!");const xe=h.scopedAlloc(16);X=D.xRead(P.pointer,xe,6,2),h.poke(xe+6,0);let T=h.cstrToJs(xe);ee("xRead() got:",T),T!=="sanity"&&d("Unexpected xRead() value."),W.xSleep&&(ee("xSleep()ing before close()ing..."),W.xSleep(b.pointer,2e3),ee("waking up from xSleep()")),X=D.xClose(j),ee("xClose rc =",X,"sabOPView =",u.sabOPView),ee("Deleting file:",ne),W.xDelete(b.pointer,ue,4660),W.xAccess(b.pointer,ue,0,$),X=h.peek($,"i32"),X&&d("Expecting 0 from xAccess(",ne,") after xDelete()."),x("End of OPFS sanity checks.")}finally{P.dispose(),h.scopedAllocPop(A)}};g.onmessage=function({data:A}){switch(A.type){case"opfs-unavailable":R(new Error(A.payload.join(" ")));break;case"opfs-async-loaded":g.postMessage({type:"opfs-async-init",args:u});break;case"opfs-async-inited":{if(S===!0)break;try{e.vfs.installVfs({io:{struct:_,methods:D},vfs:{struct:b,methods:W}}),u.sabOPView=new Int32Array(u.sabOP),u.sabFileBufView=new Uint8Array(u.sabIO,0,u.fileBufferSize),u.sabS11nView=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),te(),i.sanityChecks&&(x("Running sanity checks because of opfs-sanity-check URL arg..."),ie()),se()?navigator.storage.getDirectory().then(P=>{g.onerror=g._originalOnError,delete g._originalOnError,e.opfs=O,O.rootDirectory=P,ee("End of OPFS sqlite3_vfs setup.",b),p()}).catch(R):p()}catch(P){f(P),R(P)}break}default:{const P="Unexpected message from the OPFS async worker: "+JSON.stringify(A);f(P),R(new Error(P));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(a=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",a.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.util.toss,r=e.util.toss3,i=Object.create(null),a=e.capi,m=e.util,q=e.wasm,F=4096,B=512,H=4,ee=8,x=B+H,f=B,d=x,y=F,E=a.SQLITE_OPEN_MAIN_DB|a.SQLITE_OPEN_MAIN_JOURNAL|a.SQLITE_OPEN_SUPER_JOURNAL|a.SQLITE_OPEN_WAL,h=".opaque",L=()=>Math.random().toString(36).slice(2),M=new TextDecoder,z=new TextEncoder,O=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),se=[e.config.error,e.config.warn,e.config.log];e.config.log;const _=e.config.warn;e.config.error;const b=new Map,S=N=>b.get(N),R=(N,w)=>{w?b.set(N,w):b.delete(N)},p=new Map,g=N=>p.get(N),l=(N,w)=>{w?p.set(N,w):p.delete(N)},c={xCheckReservedLock:function(N,w){const I=g(N);return I.log("xCheckReservedLock"),I.storeErr(),q.poke32(w,1),0},xClose:function(N){const w=g(N);w.storeErr();const I=w.getOFileForS3File(N);if(I)try{w.log(`xClose ${I.path}`),w.mapS3FileToOFile(N,!1),I.sah.flush(),I.flags&a.SQLITE_OPEN_DELETEONCLOSE&&w.deletePath(I.path)}catch(D){return w.storeErr(D,a.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(N){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(N,w,I){return a.SQLITE_NOTFOUND},xFileSize:function(N,w){const I=g(N);I.log("xFileSize");const W=I.getOFileForS3File(N).sah.getSize()-y;return q.poke64(w,BigInt(W)),0},xLock:function(N,w){const I=g(N);I.log(`xLock ${w}`),I.storeErr();const D=I.getOFileForS3File(N);return D.lockType=w,0},xRead:function(N,w,I,D){const W=g(N);W.storeErr();const Y=W.getOFileForS3File(N);W.log(`xRead ${Y.path} ${I} @ ${D}`);try{const ie=Y.sah.read(q.heap8u().subarray(w,w+I),{at:y+Number(D)});return ie<I?(q.heap8u().fill(0,w+ie,w+I),a.SQLITE_IOERR_SHORT_READ):0}catch(ie){return W.storeErr(ie,a.SQLITE_IOERR)}},xSectorSize:function(N){return F},xSync:function(N,w){const I=g(N);I.log(`xSync ${w}`),I.storeErr();const D=I.getOFileForS3File(N);try{return D.sah.flush(),0}catch(W){return I.storeErr(W,a.SQLITE_IOERR)}},xTruncate:function(N,w){const I=g(N);I.log(`xTruncate ${w}`),I.storeErr();const D=I.getOFileForS3File(N);try{return D.sah.truncate(y+Number(w)),0}catch(W){return I.storeErr(W,a.SQLITE_IOERR)}},xUnlock:function(N,w){const I=g(N);I.log("xUnlock");const D=I.getOFileForS3File(N);return D.lockType=w,0},xWrite:function(N,w,I,D){const W=g(N);W.storeErr();const Y=W.getOFileForS3File(N);W.log(`xWrite ${Y.path} ${I} ${D}`);try{const ie=Y.sah.write(q.heap8u().subarray(w,w+I),{at:y+Number(D)});return I===ie?0:s("Unknown write() failure.")}catch(ie){return W.storeErr(ie,a.SQLITE_IOERR)}}},u=new a.sqlite3_io_methods;u.$iVersion=1,e.vfs.installVfs({io:{struct:u,methods:c}});const k={xAccess:function(N,w,I,D){const W=S(N);W.storeErr();try{const Y=W.getPath(w);q.poke32(D,W.hasFilename(Y)?1:0)}catch{q.poke32(D,0)}return 0},xCurrentTime:function(N,w){return q.poke(w,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(N,w){return q.poke(w,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(N,w,I){const D=S(N);D.log(`xDelete ${q.cstrToJs(w)}`),D.storeErr();try{return D.deletePath(D.getPath(w)),0}catch(W){return D.storeErr(W),a.SQLITE_IOERR_DELETE}},xFullPathname:function(N,w,I,D){return q.cstrncpy(D,w,I)<I?0:a.SQLITE_CANTOPEN},xGetLastError:function(N,w,I){const D=S(N),W=D.popErr();if(D.log(`xGetLastError ${w} e =`,W),W){const Y=q.scopedAllocPush();try{const[ie,A]=q.scopedAllocCString(W.message,!0);q.cstrncpy(I,ie,w),A>w&&q.poke8(I+w-1,0)}catch{return a.SQLITE_NOMEM}finally{q.scopedAllocPop(Y)}}return W?W.sqlite3Rc||a.SQLITE_IOERR:0},xOpen:function(w,I,D,W,Y){const ie=S(w);try{ie.log(`xOpen ${q.cstrToJs(I)} ${W}`);const A=I&&q.peek8(I)?ie.getPath(I):L();let P=ie.getSAHForPath(A);!P&&W&a.SQLITE_OPEN_CREATE&&(ie.getFileCount()<ie.getCapacity()?(P=ie.nextAvailableSAH(),ie.setAssociatedPath(P,A,W)):s("SAH pool is full. Cannot create file",A)),P||s("file not found:",A);const j={path:A,flags:W,sah:P};ie.mapS3FileToOFile(D,j),j.lockType=a.SQLITE_LOCK_NONE;const K=new a.sqlite3_file(D);return K.$pMethods=u.pointer,K.dispose(),q.poke32(Y,W),0}catch(A){return ie.storeErr(A),a.SQLITE_CANTOPEN}}},U=function(N){e.capi.sqlite3_vfs_find(N)&&r("VFS name is already registered:",N);const w=new a.sqlite3_vfs,I=a.sqlite3_vfs_find(null),D=I?new a.sqlite3_vfs(I):null;return w.$iVersion=2,w.$szOsFile=a.sqlite3_file.structInfo.sizeof,w.$mxPathname=B,w.addOnDispose(w.$zName=q.allocCString(N),()=>R(w.pointer,0)),D&&(w.$xRandomness=D.$xRandomness,w.$xSleep=D.$xSleep,D.dispose()),!w.$xRandomness&&!k.xRandomness&&(k.xRandomness=function(W,Y,ie){const A=q.heap8u();let P=0;for(;P<Y;++P)A[ie+P]=Math.random()*255e3&255;return P}),!w.$xSleep&&!k.xSleep&&(k.xSleep=(W,Y)=>0),e.vfs.installVfs({vfs:{struct:w,methods:k}}),w};class te{vfsDir;#e;#i;#a;#r=new Map;#t=new Map;#s=new Set;#l=new Map;#n=new Uint8Array(x);#c;#o;#_;constructor(w=Object.create(null)){this.#_=w.verbosity??O.verbosity,this.vfsName=w.name||O.name,this.#o=U(this.vfsName),R(this.#o.pointer,this),this.vfsDir=w.directory||"."+this.vfsName,this.#c=new DataView(this.#n.buffer,this.#n.byteOffset),this.isReady=this.reset(!!(w.clearOnInit??O.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(w.initialCapacity||O.initialCapacity)})}#u(w,...I){this.#_>w&&se[w](this.vfsName+":",...I)}log(...w){this.#u(2,...w)}warn(...w){this.#u(1,...w)}error(...w){this.#u(0,...w)}getVfs(){return this.#o}getCapacity(){return this.#r.size}getFileCount(){return this.#t.size}getFileNames(){const w=[],I=this.#t.keys();for(const D of I)w.push(D);return w}async addCapacity(w){for(let I=0;I<w;++I){const D=L(),Y=await(await this.#i.getFileHandle(D,{create:!0})).createSyncAccessHandle();this.#r.set(Y,D),this.setAssociatedPath(Y,"",0)}return this.getCapacity()}async reduceCapacity(w){let I=0;for(const D of Array.from(this.#s)){if(I===w||this.getFileCount()===this.getCapacity())break;const W=this.#r.get(D);D.close(),await this.#i.removeEntry(W),this.#r.delete(D),this.#s.delete(D),++I}return I}releaseAccessHandles(){for(const w of this.#r.keys())w.close();this.#r.clear(),this.#t.clear(),this.#s.clear()}async acquireAccessHandles(w){const I=[];for await(const[D,W]of this.#i)W.kind==="file"&&I.push([D,W]);return Promise.all(I.map(async([D,W])=>{try{const Y=await W.createSyncAccessHandle();if(this.#r.set(Y,D),w)Y.truncate(y),this.setAssociatedPath(Y,"",0);else{const ie=this.getAssociatedPath(Y);ie?this.#t.set(ie,Y):this.#s.add(Y)}}catch(Y){throw this.storeErr(Y),this.releaseAccessHandles(),Y}}))}getAssociatedPath(w){w.read(this.#n,{at:0});const I=this.#c.getUint32(f);if(this.#n[0]&&(I&a.SQLITE_OPEN_DELETEONCLOSE||!(I&E)))return _(`Removing file with unexpected flags ${I.toString(16)}`,this.#n),this.setAssociatedPath(w,"",0),"";const D=new Uint32Array(ee/4);w.read(D,{at:d});const W=this.computeDigest(this.#n);if(D.every((Y,ie)=>Y===W[ie])){const Y=this.#n.findIndex(ie=>ie===0);return Y===0&&w.truncate(y),Y?M.decode(this.#n.subarray(0,Y)):""}else return _("Disassociating file with bad digest."),this.setAssociatedPath(w,"",0),""}setAssociatedPath(w,I,D){const W=z.encodeInto(I,this.#n);B<=W.written+1&&s("Path too long:",I),this.#n.fill(0,W.written,B),this.#c.setUint32(f,D);const Y=this.computeDigest(this.#n);w.write(this.#n,{at:0}),w.write(Y,{at:d}),w.flush(),I?(this.#t.set(I,w),this.#s.delete(w)):(w.truncate(y),this.#s.add(w))}computeDigest(w){let I=3735928559,D=1103547991;for(const W of w)I=31*I+W*307,D=31*D+W*307;return new Uint32Array([I>>>0,D>>>0])}async reset(w){await this.isReady;let I=await navigator.storage.getDirectory(),D;for(const W of this.vfsDir.split("/"))W&&(D=I,I=await I.getDirectoryHandle(W,{create:!0}));return this.#e=I,this.#a=D,this.#i=await this.#e.getDirectoryHandle(h,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(w)}getPath(w){return q.isPtr(w)&&(w=q.cstrToJs(w)),(w instanceof URL?w:new URL(w,"file://localhost/")).pathname}deletePath(w){const I=this.#t.get(w);return I&&(this.#t.delete(w),this.setAssociatedPath(I,"",0)),!!I}storeErr(w,I){return w&&(w.sqlite3Rc=I||a.SQLITE_IOERR,this.error(w)),this.$error=w,I}popErr(){const w=this.$error;return this.$error=void 0,w}nextAvailableSAH(){const[w]=this.#s.keys();return w}getOFileForS3File(w){return this.#l.get(w)}mapS3FileToOFile(w,I){I?(this.#l.set(w,I),l(w,this)):(this.#l.delete(w),l(w,!1))}hasFilename(w){return this.#t.has(w)}getSAHForPath(w){return this.#t.get(w)}async removeVfs(){if(!this.#o.pointer||!this.#i)return!1;a.sqlite3_vfs_unregister(this.#o.pointer),this.#o.dispose();try{this.releaseAccessHandles(),await this.#e.removeEntry(h,{recursive:!0}),this.#i=void 0,await this.#a.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#a=void 0}catch(w){e.config.error(this.vfsName,"removeVfs() failed:",w)}return!0}exportFile(w){const I=this.#t.get(w)||s("File not found:",w),D=I.getSize()-y,W=new Uint8Array(D>0?D:0);if(D>0){const Y=I.read(W,{at:y});Y!=D&&s("Expected to read "+D+" bytes but read "+Y+".")}return W}async importDbChunked(w,I){const D=this.#t.get(w)||this.nextAvailableSAH()||s("No available handles to import to.");D.truncate(0);let W=0,Y,ie=!1;try{for(;(Y=await I())!==void 0;)Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y)),W===0&&Y.byteLength>=15&&(m.affirmDbHeader(Y),ie=!0),D.write(Y,{at:y+W}),W+=Y.byteLength;if((W<512||W%512!==0)&&s("Input size",W,"is not correct for an SQLite database."),!ie){const A=new Uint8Array(20);D.read(A,{at:0}),m.affirmDbHeader(A)}D.write(new Uint8Array([1,1]),{at:y+18})}catch(A){throw this.setAssociatedPath(D,"",0),A}return this.setAssociatedPath(D,w,a.SQLITE_OPEN_MAIN_DB),W}importDb(w,I){if(I instanceof ArrayBuffer)I=new Uint8Array(I);else if(I instanceof Function)return this.importDbChunked(w,I);const D=this.#t.get(w)||this.nextAvailableSAH()||s("No available handles to import to."),W=I.byteLength;(W<512||W%512!=0)&&s("Byte array size is invalid for an SQLite db.");const Y="SQLite format 3";for(let A=0;A<Y.length;++A)Y.charCodeAt(A)!==I[A]&&s("Input does not contain an SQLite database header.");const ie=D.write(I,{at:y});return ie!=W?(this.setAssociatedPath(D,"",0),s("Expected to write "+W+" bytes but wrote "+ie+".")):(D.write(new Uint8Array([1,1]),{at:y+18}),this.setAssociatedPath(D,w,a.SQLITE_OPEN_MAIN_DB)),ie}}class re{#e;constructor(w){this.#e=w,this.vfsName=w.vfsName}async addCapacity(w){return this.#e.addCapacity(w)}async reduceCapacity(w){return this.#e.reduceCapacity(w)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(w){const I=this.#e.getCapacity();return I<w?this.#e.addCapacity(w-I):I}exportFile(w){return this.#e.exportFile(w)}importDb(w,I){return this.#e.importDb(w,I)}async wipeFiles(){return this.#e.reset(!0)}unlink(w){return this.#e.deletePath(w)}async removeVfs(){return this.#e.removeVfs()}}const ae=async()=>{const N=await navigator.storage.getDirectory(),w=".opfs-sahpool-sync-check-"+L(),W=(await(await N.getFileHandle(w,{create:!0})).createSyncAccessHandle()).close();return await W,await N.removeEntry(w),W?.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};e.installOpfsSAHPoolVfs=async function(N=Object.create(null)){const w=N.name||O.name;return i[w]?i[w]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?i[w]=Promise.reject(new Error("Missing required OPFS APIs.")):i[w]=ae().then(async function(){if(N.$testThrowInInit)throw N.$testThrowInInit;const I=new te(N);return I.isReady.then(async()=>{const D=new re(I);if(e.oo1){const W=e.oo1,Y=I.getVfs(),ie=function(...A){const P=W.DB.dbCtorHelper.normalizeArgs(...A);P.vfs=Y.$zName,W.DB.dbCtorHelper.call(this,P)};ie.prototype=Object.create(W.DB.prototype),D.OpfsSAHPoolDb=ie,W.DB.dbCtorHelper.setVfsPostOpenSql(Y.pointer,function(A,P){P.capi.sqlite3_exec(A,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return I.log("VFS initialized."),D}).catch(async D=>(await I.removeVfs().catch(()=>{}),D))}).catch(I=>i[w]=Promise.reject(I))}}),typeof n<"u"){const e=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=e;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),oe.ready}})();ft=function(){const C=ft;if(!C)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const V=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(V.debugModule=V.urlParams.has("sqlite3.debugModule")?(...oe)=>console.warn("sqlite3.debugModule:",...oe):()=>{},V.urlParams.has("sqlite3.dir"))V.sqlite3Dir=V.urlParams.get("sqlite3.dir")+"/";else if(V.moduleScript){const oe=V.moduleScript.src.split("/");oe.pop(),V.sqlite3Dir=oe.join("/")+"/"}if(globalThis.sqlite3InitModule=function oe(...t){return C(...t).then(ge=>{const ve=ge.sqlite3;ve.scriptInfo=V,oe.__isUnderTest&&(ve.__isUnderTest=!0);const we=ve.asyncPostInit;return delete ve.asyncPostInit,we()}).catch(ge=>{throw console.error("Exception loading sqlite3 module:",ge),ge})},globalThis.sqlite3InitModule.ready=C.ready,globalThis.sqlite3InitModuleState.moduleScript){const oe=globalThis.sqlite3InitModuleState;let t=oe.moduleScript.src.split("/");t.pop(),oe.scriptDir=t.join("/")+"/"}return V.debugModule("sqlite3InitModuleState =",V),globalThis.sqlite3InitModule}();var un=ft;globalThis.sqlite3Worker1Promiser=function C(V=C.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const Z=V;V=Object.assign(Object.create(null),C.defaultConfig),V.onready=Z}else V=Object.assign(Object.create(null),C.defaultConfig,V);const oe=Object.create(null),t=function(){},ge=V.onerror||t,ve=V.debug||t,we=V.generateMessageId?void 0:Object.create(null),Ie=V.generateMessageId||function(Z){return Z.type+"#"+(we[Z.type]=(we[Z.type]||0)+1)},ke=(...Z)=>{throw new Error(Z.join(" "))};V.worker||(V.worker=C.defaultConfig.worker),typeof V.worker=="function"&&(V.worker=V.worker());let Ee;return V.worker.onmessage=function(Z){Z=Z.data,ve("worker1.onmessage",Z);let he=oe[Z.messageId];if(!he){if(Z&&Z.type==="sqlite3-api"&&Z.result==="worker1-ready"){V.onready&&V.onready();return}if(he=oe[Z.type],he&&he.onrow){he.onrow(Z);return}V.onunhandled?V.onunhandled(arguments[0]):ge("sqlite3Worker1Promiser() unhandled worker message:",Z);return}switch(delete oe[Z.messageId],Z.type){case"error":he.reject(Z);return;case"open":Ee||(Ee=Z.dbId);break;case"close":Z.dbId===Ee&&(Ee=void 0);break}try{he.resolve(Z)}catch(pe){he.reject(pe)}},function(){let Z;arguments.length===1?Z=arguments[0]:arguments.length===2?(Z=Object.create(null),Z.type=arguments[0],Z.args=arguments[1]):ke("Invalid arugments for sqlite3Worker1Promiser()-created factory."),Z.dbId||(Z.dbId=Ee),Z.messageId=Ie(Z),Z.departureTime=performance.now();const he=Object.create(null);he.message=Z;let pe;Z.type==="exec"&&Z.args&&(typeof Z.args.callback=="function"?(pe=Z.messageId+":row",he.onrow=Z.args.callback,Z.args.callback=pe,oe[pe]=he):typeof Z.args.callback=="string"&&ke("exec callback may not be a string when using the Promise interface."));let Pe=new Promise(function(Ve,nt){he.resolve=Ve,he.reject=nt,oe[Z.messageId]=he,ve("Posting",Z.type,"message to Worker dbId="+(Ee||"default")+":",Z),V.worker.postMessage(Z)});return pe&&(Pe=Pe.finally(()=>delete oe[pe])),Pe}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker("sqlite3-worker1-bundler-friendly.mjs",{type:"module"})}.bind({currentScript:globalThis?.document?.currentScript}),onerror:(...C)=>console.error("worker1 promiser error",...C)};const It=(...C)=>console.log(...C),_n=(...C)=>console.error(...C);It("Starting worker");class fn{db;rowMode="object";async init(V,oe){if(oe&&oe!=="array"&&oe!=="object")throw new Error("Invalid rowMode");this.rowMode=oe||this.rowMode;const ge=await(await un({print:It,printErr:_n})).installOpfsSAHPoolVfs();this.db=new ge.OpfsSAHPoolDb(V,"c")}executeSql(V,oe,t){return t(this.db.exec({sql:V,bind:oe,returnValue:"resultRows",rowMode:this.rowMode}))}}ut(fn)})();
